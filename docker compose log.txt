Microsoft Windows [Version 10.0.19041.1237]
[+] Building 33.5s (15/68)
 => => sha256:443de0a6edaed89f11a4f50e1b047c8278c4260e80acb57a3ea10c50797e0de0 10.06MB / 10.06MB                                                                       1.3s
 => => sha256:07aded7c29c6011dfdf02fc98e087c941d3c2661c4e73d134c6491e25231d16c 27.15MB / 27.15MB                                                                       8.0s
[+] Building 34.1s (15/68)
 => => sha256:443de0a6edaed89f11a4f50e1b047c8278c4260e80acb57a3ea10c50797e0de0 10.06MB / 10.06MB                                                                       1.3s
 => => sha256:07aded7c29c6011dfdf02fc98e087c941d3c2661c4e73d134c6491e25231d16c 27.15MB / 27.15MB                                                                       8.0s
 => => sha256:1242903d2b2348c44f7d30c366f0f9f034913c7353d1eaf1967f39233f343772 2.77MB / 2.77MB                                                                         2.9s
 => => sha256:c5cc184b58e626824a11ce53e0321e7714d8e4b859fa4a7525ae8829dfb7c679 233B / 233B                                                                             2.8s
 => => sha256:8a8d14390375c724e57c7f5f1646b98afea51bc23ca55ae782feedca1e3dfe5c 2.64MB / 2.64MB                                                                         5.2s
 => => extracting sha256:07aded7c29c6011dfdf02fc98e087c941d3c2661c4e73d134c6491e25231d16c                                                                              1.6s
 => => extracting sha256:1242903d2b2348c44f7d30c366f0f9f034913c7353d1eaf1967f39233f343772                                                                              0.2s
 => => extracting sha256:443de0a6edaed89f11a4f50e1b047c8278c4260e80acb57a3ea10c50797e0de0                                                                              0.8s
 => => extracting sha256:c5cc184b58e626824a11ce53e0321e7714d8e4b859fa4a7525ae8829dfb7c679                                                                              0.0s
 => => extracting sha256:8a8d14390375c724e57c7f5f1646b98afea51bc23ca55ae782feedca1e3dfe5c                                                                              0.3s
 => [redash-master_scheduler internal] load build context                                                                                                              3.1s
[+] Building 34.7s (15/68)
 => => sha256:443de0a6edaed89f11a4f50e1b047c8278c4260e80acb57a3ea10c50797e0de0 10.06MB / 10.06MB                                                                       1.3s
 => => sha256:07aded7c29c6011dfdf02fc98e087c941d3c2661c4e73d134c6491e25231d16c 27.15MB / 27.15MB                                                                       8.0s
 => => sha256:1242903d2b2348c44f7d30c366f0f9f034913c7353d1eaf1967f39233f343772 2.77MB / 2.77MB                                                                         2.9s
 => => sha256:c5cc184b58e626824a11ce53e0321e7714d8e4b859fa4a7525ae8829dfb7c679 233B / 233B                                                                             2.8s
 => => sha256:8a8d14390375c724e57c7f5f1646b98afea51bc23ca55ae782feedca1e3dfe5c 2.64MB / 2.64MB                                                                         5.2s
[+] Building 34.8s (15/68)
 => => sha256:443de0a6edaed89f11a4f50e1b047c8278c4260e80acb57a3ea10c50797e0de0 10.06MB / 10.06MB                                                                       1.3s
 => => sha256:07aded7c29c6011dfdf02fc98e087c941d3c2661c4e73d134c6491e25231d16c 27.15MB / 27.15MB                                                                       8.0s
 => => sha256:1242903d2b2348c44f7d30c366f0f9f034913c7353d1eaf1967f39233f343772 2.77MB / 2.77MB                                                                         2.9s
 => => sha256:c5cc184b58e626824a11ce53e0321e7714d8e4b859fa4a7525ae8829dfb7c679 233B / 233B                                                                             2.8s
 => => sha256:8a8d14390375c724e57c7f5f1646b98afea51bc23ca55ae782feedca1e3dfe5c 2.64MB / 2.64MB                                                                         5.2s
[+] Building 35.5s (15/68)
 => => sha256:443de0a6edaed89f11a4f50e1b047c8278c4260e80acb57a3ea10c50797e0de0 10.06MB / 10.06MB                                                                       1.3s
 => => sha256:07aded7c29c6011dfdf02fc98e087c941d3c2661c4e73d134c6491e25231d16c 27.15MB / 27.15MB                                                                       8.0s
 => => sha256:1242903d2b2348c44f7d30c366f0f9f034913c7353d1eaf1967f39233f343772 2.77MB / 2.77MB                                                                         2.9s
 => => sha256:c5cc184b58e626824a11ce53e0321e7714d8e4b859fa4a7525ae8829dfb7c679 233B / 233B                                                                             2.8s
 => => sha256:8a8d14390375c724e57c7f5f1646b98afea51bc23ca55ae782feedca1e3dfe5c 2.64MB / 2.64MB                                                                         5.2s
 => => extracting sha256:07aded7c29c6011dfdf02fc98e087c941d3c2661c4e73d134c6491e25231d16c                                                                              1.6s
 => => extracting sha256:1242903d2b2348c44f7d30c366f0f9f034913c7353d1eaf1967f39233f343772                                                                              0.2s
 => => extracting sha256:443de0a6edaed89f11a4f50e1b047c8278c4260e80acb57a3ea10c50797e0de0                                                                              0.8s
[+] Building 35.6s (15/68)
 => => sha256:443de0a6edaed89f11a4f50e1b047c8278c4260e80acb57a3ea10c50797e0de0 10.06MB / 10.06MB                                                                       1.3s
 => => sha256:07aded7c29c6011dfdf02fc98e087c941d3c2661c4e73d134c6491e25231d16c 27.15MB / 27.15MB                                                                       8.0s
[+] Building 36.1s (15/68)
 => => sha256:443de0a6edaed89f11a4f50e1b047c8278c4260e80acb57a3ea10c50797e0de0 10.06MB / 10.06MB                                                                       1.3s
 => => sha256:07aded7c29c6011dfdf02fc98e087c941d3c2661c4e73d134c6491e25231d16c 27.15MB / 27.15MB                                                                       8.0s
 => => sha256:1242903d2b2348c44f7d30c366f0f9f034913c7353d1eaf1967f39233f343772 2.77MB / 2.77MB                                                                         2.9s
 => => sha256:c5cc184b58e626824a11ce53e0321e7714d8e4b859fa4a7525ae8829dfb7c679 233B / 233B                                                                             2.8s
 => => sha256:8a8d14390375c724e57c7f5f1646b98afea51bc23ca55ae782feedca1e3dfe5c 2.64MB / 2.64MB                                                                         5.2s
 => => extracting sha256:07aded7c29c6011dfdf02fc98e087c941d3c2661c4e73d134c6491e25231d16c                                                                              1.6s
 => => extracting sha256:1242903d2b2348c44f7d30c366f0f9f034913c7353d1eaf1967f39233f343772                                                                              0.2s
 => => extracting sha256:443de0a6edaed89f11a4f50e1b047c8278c4260e80acb57a3ea10c50797e0de0                                                                              0.8s
 => => extracting sha256:c5cc184b58e626824a11ce53e0321e7714d8e4b859fa4a7525ae8829dfb7c679                                                                              0.0s
 => => extracting sha256:8a8d14390375c724e57c7f5f1646b98afea51bc23ca55ae782feedca1e3dfe5c                                                                              0.3s
 => [redash-master_scheduler internal] load build context                                                                                                              3.1s
 => => transferring context: 12.53MB                                                                                                                                   3.0s
 => [redash-master_scheduler frontend-builder  1/10] FROM docker.io/library/node:14.17@sha256:40aa86fa97c6cb85af15ecdd67798f7578c5c20e8d16f99d5b4f8f14196a0568        32.2s
 => => resolve docker.io/library/node:14.17@sha256:40aa86fa97c6cb85af15ecdd67798f7578c5c20e8d16f99d5b4f8f14196a0568                                                    0.2s
[+] Building 36.7s (15/68)
 => => sha256:443de0a6edaed89f11a4f50e1b047c8278c4260e80acb57a3ea10c50797e0de0 10.06MB / 10.06MB                                                                       1.3s
 => => sha256:07aded7c29c6011dfdf02fc98e087c941d3c2661c4e73d134c6491e25231d16c 27.15MB / 27.15MB                                                                       8.0s
[+] Building 36.8s (15/68)
 => => sha256:443de0a6edaed89f11a4f50e1b047c8278c4260e80acb57a3ea10c50797e0de0 10.06MB / 10.06MB                                                                       1.3s
 => => sha256:07aded7c29c6011dfdf02fc98e087c941d3c2661c4e73d134c6491e25231d16c 27.15MB / 27.15MB                                                                       8.0s
 => => sha256:1242903d2b2348c44f7d30c366f0f9f034913c7353d1eaf1967f39233f343772 2.77MB / 2.77MB                                                                         2.9s
 => => sha256:c5cc184b58e626824a11ce53e0321e7714d8e4b859fa4a7525ae8829dfb7c679 233B / 233B                                                                             2.8s
 => => sha256:8a8d14390375c724e57c7f5f1646b98afea51bc23ca55ae782feedca1e3dfe5c 2.64MB / 2.64MB                                                                         5.2s
 => => extracting sha256:07aded7c29c6011dfdf02fc98e087c941d3c2661c4e73d134c6491e25231d16c                                                                              1.6s
 => => extracting sha256:1242903d2b2348c44f7d30c366f0f9f034913c7353d1eaf1967f39233f343772                                                                              0.2s
 => => extracting sha256:443de0a6edaed89f11a4f50e1b047c8278c4260e80acb57a3ea10c50797e0de0                                                                              0.8s
 => => extracting sha256:c5cc184b58e626824a11ce53e0321e7714d8e4b859fa4a7525ae8829dfb7c679                                                                              0.0s
 => => extracting sha256:8a8d14390375c724e57c7f5f1646b98afea51bc23ca55ae782feedca1e3dfe5c                                                                              0.3s
 => [redash-master_scheduler internal] load build context                                                                                                              3.1s
[+] Building 39.4s (15/68)
 => => sha256:443de0a6edaed89f11a4f50e1b047c8278c4260e80acb57a3ea10c50797e0de0 10.06MB / 10.06MB                                                                       1.3s
 => => sha256:07aded7c29c6011dfdf02fc98e087c941d3c2661c4e73d134c6491e25231d16c 27.15MB / 27.15MB                                                                       8.0s
[+] Building 39.6s (15/68)
 => => sha256:443de0a6edaed89f11a4f50e1b047c8278c4260e80acb57a3ea10c50797e0de0 10.06MB / 10.06MB                                                                       1.3s
 => => sha256:07aded7c29c6011dfdf02fc98e087c941d3c2661c4e73d134c6491e25231d16c 27.15MB / 27.15MB                                                                       8.0s
 => => sha256:1242903d2b2348c44f7d30c366f0f9f034913c7353d1eaf1967f39233f343772 2.77MB / 2.77MB                                                                         2.9s
 => => sha256:c5cc184b58e626824a11ce53e0321e7714d8e4b859fa4a7525ae8829dfb7c679 233B / 233B                                                                             2.8s
 => => sha256:8a8d14390375c724e57c7f5f1646b98afea51bc23ca55ae782feedca1e3dfe5c 2.64MB / 2.64MB                                                                         5.2s
 => => extracting sha256:07aded7c29c6011dfdf02fc98e087c941d3c2661c4e73d134c6491e25231d16c                                                                              1.6s
 => => extracting sha256:1242903d2b2348c44f7d30c366f0f9f034913c7353d1eaf1967f39233f343772                                                                              0.2s
 => => extracting sha256:443de0a6edaed89f11a4f50e1b047c8278c4260e80acb57a3ea10c50797e0de0                                                                              0.8s
 => => extracting sha256:c5cc184b58e626824a11ce53e0321e7714d8e4b859fa4a7525ae8829dfb7c679                                                                              0.0s
 => => extracting sha256:8a8d14390375c724e57c7f5f1646b98afea51bc23ca55ae782feedca1e3dfe5c                                                                              0.3s
 => [redash-master_scheduler internal] load build context                                                                                                              3.1s
[+] Building 40.0s (15/68)
 => => sha256:443de0a6edaed89f11a4f50e1b047c8278c4260e80acb57a3ea10c50797e0de0 10.06MB / 10.06MB                                                                       1.3s
 => => sha256:07aded7c29c6011dfdf02fc98e087c941d3c2661c4e73d134c6491e25231d16c 27.15MB / 27.15MB                                                                       8.0s
 => => sha256:1242903d2b2348c44f7d30c366f0f9f034913c7353d1eaf1967f39233f343772 2.77MB / 2.77MB                                                                         2.9s
 => => sha256:c5cc184b58e626824a11ce53e0321e7714d8e4b859fa4a7525ae8829dfb7c679 233B / 233B                                                                             2.8s
 => => sha256:8a8d14390375c724e57c7f5f1646b98afea51bc23ca55ae782feedca1e3dfe5c 2.64MB / 2.64MB                                                                         5.2s
 => => extracting sha256:07aded7c29c6011dfdf02fc98e087c941d3c2661c4e73d134c6491e25231d16c                                                                              1.6s
 => => extracting sha256:1242903d2b2348c44f7d30c366f0f9f034913c7353d1eaf1967f39233f343772                                                                              0.2s
 => => extracting sha256:443de0a6edaed89f11a4f50e1b047c8278c4260e80acb57a3ea10c50797e0de0                                                                              0.8s
[+] Building 40.6s (15/68)
 => => sha256:443de0a6edaed89f11a4f50e1b047c8278c4260e80acb57a3ea10c50797e0de0 10.06MB / 10.06MB                                                                       1.3s
 => => sha256:07aded7c29c6011dfdf02fc98e087c941d3c2661c4e73d134c6491e25231d16c 27.15MB / 27.15MB                                                                       8.0s
 => => sha256:1242903d2b2348c44f7d30c366f0f9f034913c7353d1eaf1967f39233f343772 2.77MB / 2.77MB                                                                         2.9s
 => => sha256:c5cc184b58e626824a11ce53e0321e7714d8e4b859fa4a7525ae8829dfb7c679 233B / 233B                                                                             2.8s
 => => sha256:8a8d14390375c724e57c7f5f1646b98afea51bc23ca55ae782feedca1e3dfe5c 2.64MB / 2.64MB                                                                         5.2s
 => => extracting sha256:07aded7c29c6011dfdf02fc98e087c941d3c2661c4e73d134c6491e25231d16c                                                                              1.6s
 => => extracting sha256:1242903d2b2348c44f7d30c366f0f9f034913c7353d1eaf1967f39233f343772                                                                              0.2s
 => => extracting sha256:443de0a6edaed89f11a4f50e1b047c8278c4260e80acb57a3ea10c50797e0de0                                                                              0.8s
 => => extracting sha256:c5cc184b58e626824a11ce53e0321e7714d8e4b859fa4a7525ae8829dfb7c679                                                                              0.0s
 => => extracting sha256:8a8d14390375c724e57c7f5f1646b98afea51bc23ca55ae782feedca1e3dfe5c                                                                              0.3s
 => [redash-master_scheduler internal] load build context                                                                                                              3.1s
[+] Building 40.8s (15/68)
 => => sha256:443de0a6edaed89f11a4f50e1b047c8278c4260e80acb57a3ea10c50797e0de0 10.06MB / 10.06MB                                                                       1.3s
 => => sha256:07aded7c29c6011dfdf02fc98e087c941d3c2661c4e73d134c6491e25231d16c 27.15MB / 27.15MB                                                                       8.0s
[+] Building 41.4s (15/68)
 => => sha256:443de0a6edaed89f11a4f50e1b047c8278c4260e80acb57a3ea10c50797e0de0 10.06MB / 10.06MB                                                                       1.3s
 => => sha256:07aded7c29c6011dfdf02fc98e087c941d3c2661c4e73d134c6491e25231d16c 27.15MB / 27.15MB                                                                       8.0s
 => => sha256:1242903d2b2348c44f7d30c366f0f9f034913c7353d1eaf1967f39233f343772 2.77MB / 2.77MB                                                                         2.9s
 => => sha256:c5cc184b58e626824a11ce53e0321e7714d8e4b859fa4a7525ae8829dfb7c679 233B / 233B                                                                             2.8s
 => => sha256:8a8d14390375c724e57c7f5f1646b98afea51bc23ca55ae782feedca1e3dfe5c 2.64MB / 2.64MB                                                                         5.2s
 => => extracting sha256:07aded7c29c6011dfdf02fc98e087c941d3c2661c4e73d134c6491e25231d16c                                                                              1.6s
 => => extracting sha256:1242903d2b2348c44f7d30c366f0f9f034913c7353d1eaf1967f39233f343772                                                                              0.2s
 => => extracting sha256:443de0a6edaed89f11a4f50e1b047c8278c4260e80acb57a3ea10c50797e0de0                                                                              0.8s
 => => extracting sha256:c5cc184b58e626824a11ce53e0321e7714d8e4b859fa4a7525ae8829dfb7c679                                                                              0.0s
 => => extracting sha256:8a8d14390375c724e57c7f5f1646b98afea51bc23ca55ae782feedca1e3dfe5c                                                                              0.3s
 => [redash-master_scheduler internal] load build context                                                                                                              3.1s
 => => transferring context: 12.53MB                                                                                                                                   3.0s
 => [redash-master_scheduler frontend-builder  1/10] FROM docker.io/library/node:14.17@sha256:40aa86fa97c6cb85af15ecdd67798f7578c5c20e8d16f99d5b4f8f14196a0568        37.4s
 => => resolve docker.io/library/node:14.17@sha256:40aa86fa97c6cb85af15ecdd67798f7578c5c20e8d16f99d5b4f8f14196a0568                                                    0.2s
 => => sha256:9dc0768a629514929e03b3289a8164ca03393ea9e21129524b384babe8657858 7.63kB / 7.63kB                                                                         0.0s
 => => sha256:40aa86fa97c6cb85af15ecdd67798f7578c5c20e8d16f99d5b4f8f14196a0568 776B / 776B                                                                             0.0s
 => => sha256:86cfe02de86ec917c6739754ae342d423788f48abbc7c877970fe11c3adf7748 2.21kB / 2.21kB                                                                         0.0s
 => => sha256:af4c2580c6c3e68236ce4f353c045f871e4780b85fdb54c00529426e09bc36ce 45.38MB / 45.38MB                                                                      23.9s
 => => sha256:4ea40d27a2cfcec3d38b2a0ebe5ca77633d27a394541c449b500fce4639516d4 11.30MB / 11.30MB                                                                      14.8s
 => => sha256:523d612e9cd24c2fca3c4d97b340e89c7dc6bb326a9d75d5a0476f56680d06dc 4.34MB / 4.34MB                                                                        11.9s
[+] Building 41.8s (15/68)
 => => sha256:443de0a6edaed89f11a4f50e1b047c8278c4260e80acb57a3ea10c50797e0de0 10.06MB / 10.06MB                                                                       1.3s
 => => sha256:07aded7c29c6011dfdf02fc98e087c941d3c2661c4e73d134c6491e25231d16c 27.15MB / 27.15MB                                                                       8.0s
 => => sha256:1242903d2b2348c44f7d30c366f0f9f034913c7353d1eaf1967f39233f343772 2.77MB / 2.77MB                                                                         2.9s
 => => sha256:c5cc184b58e626824a11ce53e0321e7714d8e4b859fa4a7525ae8829dfb7c679 233B / 233B                                                                             2.8s
 => => sha256:8a8d14390375c724e57c7f5f1646b98afea51bc23ca55ae782feedca1e3dfe5c 2.64MB / 2.64MB                                                                         5.2s
 => => extracting sha256:07aded7c29c6011dfdf02fc98e087c941d3c2661c4e73d134c6491e25231d16c                                                                              1.6s
 => => extracting sha256:1242903d2b2348c44f7d30c366f0f9f034913c7353d1eaf1967f39233f343772                                                                              0.2s
 => => extracting sha256:443de0a6edaed89f11a4f50e1b047c8278c4260e80acb57a3ea10c50797e0de0                                                                              0.8s
 => => extracting sha256:c5cc184b58e626824a11ce53e0321e7714d8e4b859fa4a7525ae8829dfb7c679                                                                              0.0s
 => => extracting sha256:8a8d14390375c724e57c7f5f1646b98afea51bc23ca55ae782feedca1e3dfe5c                                                                              0.3s
 => [redash-master_scheduler internal] load build context                                                                                                              3.1s
 => => transferring context: 12.53MB                                                                                                                                   3.0s
 => [redash-master_scheduler frontend-builder  1/10] FROM docker.io/library/node:14.17@sha256:40aa86fa97c6cb85af15ecdd67798f7578c5c20e8d16f99d5b4f8f14196a0568        37.8s
 => => resolve docker.io/library/node:14.17@sha256:40aa86fa97c6cb85af15ecdd67798f7578c5c20e8d16f99d5b4f8f14196a0568                                                    0.2s
 => => sha256:9dc0768a629514929e03b3289a8164ca03393ea9e21129524b384babe8657858 7.63kB / 7.63kB                                                                         0.0s
 => => sha256:40aa86fa97c6cb85af15ecdd67798f7578c5c20e8d16f99d5b4f8f14196a0568 776B / 776B                                                                             0.0s
 => => sha256:86cfe02de86ec917c6739754ae342d423788f48abbc7c877970fe11c3adf7748 2.21kB / 2.21kB                                                                         0.0s
[+] Building 44.3s (15/68)
 => => sha256:1242903d2b2348c44f7d30c366f0f9f034913c7353d1eaf1967f39233f343772 2.77MB / 2.77MB                                                                         2.9s
 => => sha256:c5cc184b58e626824a11ce53e0321e7714d8e4b859fa4a7525ae8829dfb7c679 233B / 233B                                                                             2.8s
 => => sha256:8a8d14390375c724e57c7f5f1646b98afea51bc23ca55ae782feedca1e3dfe5c 2.64MB / 2.64MB                                                                         5.2s
 => => extracting sha256:07aded7c29c6011dfdf02fc98e087c941d3c2661c4e73d134c6491e25231d16c                                                                              1.6s
 => => extracting sha256:1242903d2b2348c44f7d30c366f0f9f034913c7353d1eaf1967f39233f343772                                                                              0.2s
 => => extracting sha256:443de0a6edaed89f11a4f50e1b047c8278c4260e80acb57a3ea10c50797e0de0                                                                              0.8s
 => => extracting sha256:c5cc184b58e626824a11ce53e0321e7714d8e4b859fa4a7525ae8829dfb7c679                                                                              0.0s
 => => extracting sha256:8a8d14390375c724e57c7f5f1646b98afea51bc23ca55ae782feedca1e3dfe5c                                                                              0.3s
 => [redash-master_scheduler internal] load build context                                                                                                              3.1s
 => => transferring context: 12.53MB                                                                                                                                   3.0s
 => [redash-master_scheduler frontend-builder  1/10] FROM docker.io/library/node:14.17@sha256:40aa86fa97c6cb85af15ecdd67798f7578c5c20e8d16f99d5b4f8f14196a0568        40.3s
 => => resolve docker.io/library/node:14.17@sha256:40aa86fa97c6cb85af15ecdd67798f7578c5c20e8d16f99d5b4f8f14196a0568                                                    0.2s
 => => sha256:9dc0768a629514929e03b3289a8164ca03393ea9e21129524b384babe8657858 7.63kB / 7.63kB                                                                         0.0s
 => => sha256:40aa86fa97c6cb85af15ecdd67798f7578c5c20e8d16f99d5b4f8f14196a0568 776B / 776B                                                                             0.0s
 => => sha256:86cfe02de86ec917c6739754ae342d423788f48abbc7c877970fe11c3adf7748 2.21kB / 2.21kB                                                                         0.0s
 => => sha256:af4c2580c6c3e68236ce4f353c045f871e4780b85fdb54c00529426e09bc36ce 45.38MB / 45.38MB                                                                      23.9s
 => => sha256:4ea40d27a2cfcec3d38b2a0ebe5ca77633d27a394541c449b500fce4639516d4 11.30MB / 11.30MB                                                                      14.8s
 => => sha256:523d612e9cd24c2fca3c4d97b340e89c7dc6bb326a9d75d5a0476f56680d06dc 4.34MB / 4.34MB                                                                        11.9s
 => => sha256:8fee6a1847b07f4933116726f66b9218dde8c59d1f7b94de92f9f0683571a362 49.76MB / 49.76MB                                                                      38.5s
 => => sha256:60cce3519052443b6eb66426edcfd7b395d8b97913e15256b77924964e8e6291 44.04MB / 214.43MB                                                                     40.2s
 => => sha256:4bae1011637c4c5e2de64ac5ce0966aaf91a44a12ccd12391deb60834bfdd77b 4.19kB / 4.19kB                                                                        25.1s
 => => extracting sha256:af4c2580c6c3e68236ce4f353c045f871e4780b85fdb54c00529426e09bc36ce                                                                              3.4s
 => => sha256:783afe6975b53da680bf8ae0575197c92148a1fa997256c2b6aca1e197550465 24.12MB / 35.02MB                                                                      40.2s
 => => extracting sha256:4ea40d27a2cfcec3d38b2a0ebe5ca77633d27a394541c449b500fce4639516d4                                                                              0.6s
 => => extracting sha256:523d612e9cd24c2fca3c4d97b340e89c7dc6bb326a9d75d5a0476f56680d06dc                                                                              0.2s
 => => sha256:8b79e5e67b68764e58b3a19c83ba2d0be32d57cd082fae546dd0af2bd2a2beb1 0B / 2.33MB                                                                            40.2s
 => => extracting sha256:8fee6a1847b07f4933116726f66b9218dde8c59d1f7b94de92f9f0683571a362                                                                              1.6s
 => [redash-master_server internal] load build context                                                                                                                 3.0s
 => => transferring context: 12.53MB                                                                                                                                   2.8s
 => [redash-master_worker internal] load build context                                                                                                                 2.9s
 => => transferring context: 12.53MB                                                                                                                                   1.4s
 => [redash-master_worker stage-1  2/15] RUN useradd --create-home redash                                                                                              0.6s
 => [redash-master_worker stage-1  3/15] RUN apt-get update &&   apt-get install -y     curl     gnupg     build-essential     pwgen     libffi-dev     sudo     git  27.8s
 => => # Get:4 http://deb.debian.org/debian buster-updates InRelease [51.9 kB]
 => => # Get:4 http://deb.debian.org/debian buster-updates InRelease [51.9 kB]
 => => # Get:4 http://deb.debian.org/debian buster-updates InRelease [51.9 kB]
 => => # Get:5 http://deb.debian.org/debian buster/main amd64 Packages [7907 kB]
 => => # Get:5 http://deb.debian.org/debian buster/main amd64 Packages [7907 kB]
 => => # Get:5 http://deb.debian.org/debian buster/main amd64 Packages [7907 kB]
[+] Building 46.2s (15/68)
 => => sha256:1242903d2b2348c44f7d30c366f0f9f034913c7353d1eaf1967f39233f343772 2.77MB / 2.77MB                                                                         2.9s
 => => sha256:c5cc184b58e626824a11ce53e0321e7714d8e4b859fa4a7525ae8829dfb7c679 233B / 233B                                                                             2.8s
[+] Building 132.6s (26/68)
 => [redash-master_scheduler frontend-builder  1/10] FROM docker.io/library/node:14.17@sha256:40aa86fa97c6cb85af15ecdd67798f7578c5c20e8d16f99d5b4f8f14196a0568        98.5s
 => => resolve docker.io/library/node:14.17@sha256:40aa86fa97c6cb85af15ecdd67798f7578c5c20e8d16f99d5b4f8f14196a0568                                                    0.2s
[+] Building 133.2s (26/68)
 => [redash-master_scheduler frontend-builder  1/10] FROM docker.io/library/node:14.17@sha256:40aa86fa97c6cb85af15ecdd67798f7578c5c20e8d16f99d5b4f8f14196a0568        98.5s
 => => resolve docker.io/library/node:14.17@sha256:40aa86fa97c6cb85af15ecdd67798f7578c5c20e8d16f99d5b4f8f14196a0568                                                    0.2s
[+] Building 133.4s (26/68)
 => [redash-master_scheduler frontend-builder  1/10] FROM docker.io/library/node:14.17@sha256:40aa86fa97c6cb85af15ecdd67798f7578c5c20e8d16f99d5b4f8f14196a0568        98.5s
 => => resolve docker.io/library/node:14.17@sha256:40aa86fa97c6cb85af15ecdd67798f7578c5c20e8d16f99d5b4f8f14196a0568                                                    0.2s
 => => sha256:9dc0768a629514929e03b3289a8164ca03393ea9e21129524b384babe8657858 7.63kB / 7.63kB                                                                         0.0s
 => => sha256:40aa86fa97c6cb85af15ecdd67798f7578c5c20e8d16f99d5b4f8f14196a0568 776B / 776B                                                                             0.0s
 => => sha256:86cfe02de86ec917c6739754ae342d423788f48abbc7c877970fe11c3adf7748 2.21kB / 2.21kB                                                                         0.0s
 => => sha256:af4c2580c6c3e68236ce4f353c045f871e4780b85fdb54c00529426e09bc36ce 45.38MB / 45.38MB                                                                      23.9s
 => => sha256:4ea40d27a2cfcec3d38b2a0ebe5ca77633d27a394541c449b500fce4639516d4 11.30MB / 11.30MB                                                                      14.8s
 => => sha256:523d612e9cd24c2fca3c4d97b340e89c7dc6bb326a9d75d5a0476f56680d06dc 4.34MB / 4.34MB                                                                        11.9s
[+] Building 358.1s (39/69)
 => [redash-master_worker internal] load build definition from Dockerfile                                                                                              0.1s
 => => transferring dockerfile: 3.32kB                                                                                                                                 0.0s
 => [redash-master_scheduler internal] load build definition from Dockerfile                                                                                           0.1s
 => => transferring dockerfile: 3.32kB                                                                                                                                 0.0s
 => [redash-master_server internal] load build definition from Dockerfile                                                                                              0.1s
 => => transferring dockerfile: 3.32kB                                                                                                                                 0.0s
 => [redash-master_worker internal] load .dockerignore                                                                                                                 0.1s
 => => transferring context: 216B                                                                                                                                      0.0s
 => [redash-master_server internal] load .dockerignore                                                                                                                 0.1s
 => => transferring context: 216B                                                                                                                                      0.0s
 => [redash-master_scheduler internal] load .dockerignore                                                                                                              0.1s
 => => transferring context: 216B                                                                                                                                      0.0s
 => [redash-master_server internal] load metadata for docker.io/library/python:3.7-slim-buster                                                                         3.4s
 => [redash-master_server internal] load metadata for docker.io/library/node:14.17                                                                                     3.4s
 => [auth] library/node:pull token for registry-1.docker.io                                                                                                            0.0s
 => [auth] library/python:pull token for registry-1.docker.io                                                                                                          0.0s
 => [redash-master_server stage-1  1/15] FROM docker.io/library/python:3.7-slim-buster@sha256:88e9ed044abd15c15069477046e8c65fb7e97cebd7cf140e901ae35440bfc073        11.8s
 => => resolve docker.io/library/python:3.7-slim-buster@sha256:88e9ed044abd15c15069477046e8c65fb7e97cebd7cf140e901ae35440bfc073                                        0.2s
 => => sha256:88e9ed044abd15c15069477046e8c65fb7e97cebd7cf140e901ae35440bfc073 1.86kB / 1.86kB                                                                         0.0s
 => => sha256:45087b724780ed2d06865f2887cb9db8240a7752c096f696c1ecfcceb4f27d97 1.37kB / 1.37kB                                                                         0.0s
 => => sha256:b563c95d9f24c369ff82ac62daf263a1e88a33658b335544f5fdb0d6a0cce0ae 8.56kB / 8.56kB                                                                         0.0s
 => => sha256:443de0a6edaed89f11a4f50e1b047c8278c4260e80acb57a3ea10c50797e0de0 10.06MB / 10.06MB                                                                       1.3s
 => => sha256:07aded7c29c6011dfdf02fc98e087c941d3c2661c4e73d134c6491e25231d16c 27.15MB / 27.15MB                                                                       8.0s
 => => sha256:1242903d2b2348c44f7d30c366f0f9f034913c7353d1eaf1967f39233f343772 2.77MB / 2.77MB                                                                         2.9s
 => => sha256:c5cc184b58e626824a11ce53e0321e7714d8e4b859fa4a7525ae8829dfb7c679 233B / 233B                                                                             2.8s
 => => sha256:8a8d14390375c724e57c7f5f1646b98afea51bc23ca55ae782feedca1e3dfe5c 2.64MB / 2.64MB                                                                         5.2s
 => => extracting sha256:07aded7c29c6011dfdf02fc98e087c941d3c2661c4e73d134c6491e25231d16c                                                                              1.6s
 => => extracting sha256:1242903d2b2348c44f7d30c366f0f9f034913c7353d1eaf1967f39233f343772                                                                              0.2s
 => => extracting sha256:443de0a6edaed89f11a4f50e1b047c8278c4260e80acb57a3ea10c50797e0de0                                                                              0.8s
 => => extracting sha256:c5cc184b58e626824a11ce53e0321e7714d8e4b859fa4a7525ae8829dfb7c679                                                                              0.0s
 => => extracting sha256:8a8d14390375c724e57c7f5f1646b98afea51bc23ca55ae782feedca1e3dfe5c                                                                              0.3s
 => [redash-master_scheduler internal] load build context                                                                                                              3.1s
 => => transferring context: 12.53MB                                                                                                                                   3.0s
 => [redash-master_scheduler frontend-builder  1/10] FROM docker.io/library/node:14.17@sha256:40aa86fa97c6cb85af15ecdd67798f7578c5c20e8d16f99d5b4f8f14196a0568        98.5s
 => => resolve docker.io/library/node:14.17@sha256:40aa86fa97c6cb85af15ecdd67798f7578c5c20e8d16f99d5b4f8f14196a0568                                                    0.2s
 => => sha256:9dc0768a629514929e03b3289a8164ca03393ea9e21129524b384babe8657858 7.63kB / 7.63kB                                                                         0.0s
 => => sha256:40aa86fa97c6cb85af15ecdd67798f7578c5c20e8d16f99d5b4f8f14196a0568 776B / 776B                                                                             0.0s
 => => sha256:86cfe02de86ec917c6739754ae342d423788f48abbc7c877970fe11c3adf7748 2.21kB / 2.21kB                                                                         0.0s
 => => sha256:af4c2580c6c3e68236ce4f353c045f871e4780b85fdb54c00529426e09bc36ce 45.38MB / 45.38MB                                                                      23.9s
 => => sha256:4ea40d27a2cfcec3d38b2a0ebe5ca77633d27a394541c449b500fce4639516d4 11.30MB / 11.30MB                                                                      14.8s
 => => sha256:523d612e9cd24c2fca3c4d97b340e89c7dc6bb326a9d75d5a0476f56680d06dc 4.34MB / 4.34MB                                                                        11.9s
 => => sha256:8fee6a1847b07f4933116726f66b9218dde8c59d1f7b94de92f9f0683571a362 49.76MB / 49.76MB                                                                      38.5s
 => => sha256:60cce3519052443b6eb66426edcfd7b395d8b97913e15256b77924964e8e6291 214.43MB / 214.43MB                                                                    76.2s
 => => sha256:4bae1011637c4c5e2de64ac5ce0966aaf91a44a12ccd12391deb60834bfdd77b 4.19kB / 4.19kB                                                                        25.1s
 => => extracting sha256:af4c2580c6c3e68236ce4f353c045f871e4780b85fdb54c00529426e09bc36ce                                                                              3.4s
 => => sha256:783afe6975b53da680bf8ae0575197c92148a1fa997256c2b6aca1e197550465 35.02MB / 35.02MB                                                                      46.1s
 => => extracting sha256:4ea40d27a2cfcec3d38b2a0ebe5ca77633d27a394541c449b500fce4639516d4                                                                              0.6s
 => => extracting sha256:523d612e9cd24c2fca3c4d97b340e89c7dc6bb326a9d75d5a0476f56680d06dc                                                                              0.2s
 => => sha256:8b79e5e67b68764e58b3a19c83ba2d0be32d57cd082fae546dd0af2bd2a2beb1 2.33MB / 2.33MB                                                                        42.6s
 => => extracting sha256:8fee6a1847b07f4933116726f66b9218dde8c59d1f7b94de92f9f0683571a362                                                                              3.9s
 => => sha256:b62bfcc64a57db0d2cbae4625c28b0166b950d5dc7b1a5bb1bbb7a5a755f3fec 290B / 290B                                                                            42.9s
 => => extracting sha256:60cce3519052443b6eb66426edcfd7b395d8b97913e15256b77924964e8e6291                                                                             14.5s
 => => extracting sha256:4bae1011637c4c5e2de64ac5ce0966aaf91a44a12ccd12391deb60834bfdd77b                                                                              0.1s
 => => extracting sha256:783afe6975b53da680bf8ae0575197c92148a1fa997256c2b6aca1e197550465                                                                              4.0s
 => => extracting sha256:8b79e5e67b68764e58b3a19c83ba2d0be32d57cd082fae546dd0af2bd2a2beb1                                                                              0.2s
 => => extracting sha256:b62bfcc64a57db0d2cbae4625c28b0166b950d5dc7b1a5bb1bbb7a5a755f3fec                                                                              0.0s
 => [redash-master_server internal] load build context                                                                                                                 3.0s
 => => transferring context: 12.53MB                                                                                                                                   2.8s
 => [redash-master_worker internal] load build context                                                                                                                 2.9s
 => => transferring context: 12.53MB                                                                                                                                   1.4s
 => [redash-master_worker stage-1  2/15] RUN useradd --create-home redash                                                                                              0.6s
 => [redash-master_server stage-1  3/15] RUN apt-get update &&   apt-get install -y     curl     gnupg     build-essential     pwgen     libffi-dev     sudo     gi  112.9s
 => [redash-master_worker frontend-builder  2/10] RUN npm install --global --force yarn@1.22.10                                                                        2.0s
 => [redash-master_server frontend-builder  3/10] RUN useradd -m -d /frontend redash                                                                                   0.4s
 => [redash-master_scheduler frontend-builder  4/10] WORKDIR /frontend                                                                                                 0.1s
 => [redash-master_scheduler frontend-builder  5/10] COPY --chown=redash package.json yarn.lock .yarnrc /frontend/                                                     0.1s
 => [redash-master_scheduler frontend-builder  6/10] COPY --chown=redash viz-lib /frontend/viz-lib                                                                     0.4s
 => [redash-master_scheduler frontend-builder  7/10] RUN if [ "xtrue" = "x" ] ; then yarn --frozen-lockfile --network-concurrency 1; fi                                0.3s
 => [redash-master_scheduler frontend-builder  8/10] COPY --chown=redash client /frontend/client                                                                       0.3s
 => [redash-master_scheduler frontend-builder  9/10] COPY --chown=redash webpack.config.js /frontend/                                                                  0.1s
 => [redash-master_scheduler frontend-builder 10/10] RUN if [ "xtrue" = "x" ] ; then yarn build; else mkdir -p /frontend/client/dist && touch /frontend/client/dist/m  0.3s
 => [redash-master_worker stage-1  4/15] RUN wget --quiet https://databricks.com/wp-content/uploads/2.6.10.1010-2/SimbaSparkODBC-2.6.10.1010-2-Debian-64bit.zip -O /t  8.6s
 => [redash-master_worker stage-1  5/15] WORKDIR /app                                                                                                                  0.1s
 => [redash-master_scheduler stage-1  6/15] RUN pip install pip==20.2.4;                                                                                               3.2s
 => [redash-master_scheduler stage-1  7/15] COPY requirements_all_ds.txt ./                                                                                            0.1s
 => [redash-master_scheduler stage-1  8/15] RUN if [ "x$skip_ds_deps" = "x" ] ; then pip install -r requirements_all_ds.txt ; else echo "Skipping pip install -r re  116.7s
 => [redash-master_scheduler stage-1  9/15] COPY requirements_bundles.txt requirements_dev.txt ./                                                                      0.1s
 => [redash-master_scheduler stage-1 10/15] RUN if [ "x$skip_dev_deps" = "x" ] ; then pip install -r requirements_dev.txt ; fi                                        11.9s
 => [redash-master_scheduler stage-1 11/15] COPY requirements.txt ./                                                                                                   0.1s
 => [redash-master_scheduler stage-1 12/15] RUN pip install -r requirements.txt                                                                                       63.9s
 => [redash-master_scheduler stage-1 13/15] COPY . /app                                                                                                                0.3s
 => [redash-master_scheduler stage-1 14/15] COPY --from=frontend-builder /frontend/client/dist /app/client/dist                                                        0.1s
 => [redash-master_scheduler stage-1 15/15] RUN chown -R redash /app                                                                                                   5.7s
 => [redash-master_worker] exporting to image                                                                                                                         18.1s
 => => exporting layers                                                                                                                                               18.0s
 => => writing image sha256:b1051e92c221c72fc7aaba3c9e6fa4e1a1e791f14a815ff354d784ceb37992df                                                                           0.0s
 => => naming to docker.io/library/redash-master_scheduler                                                                                                             0.0s
 => => naming to docker.io/library/redash-master_server                                                                                                                0.0s
 => => naming to docker.io/library/redash-master_worker                                                                                                                0.0s

Use 'docker scan' to run Snyk tests against images to find vulnerabilities and learn how to fix them
[+] Running 7/7
 - Network redash-master_default        Created                                                                                                                        0.0s
 - Container redash-master-postgres-1   Created                                                                                                                        1.1s
 - Container redash-master-email-1      Created                                                                                                                        1.1s
 - Container redash-master-redis-1      Created                                                                                                                        1.1s
 - Container redash-master-server-1     Created                                                                                                                       16.7s
 - Container redash-master-worker-1     Created                                                                                                                        0.2s
 - Container redash-master-scheduler-1  Created                                                                                                                        0.2s
Attaching to redash-master-email-1, redash-master-postgres-1, redash-master-redis-1, redash-master-scheduler-1, redash-master-server-1, redash-master-worker-1
redash-master-postgres-1   | ********************************************************************************
redash-master-postgres-1   | WARNING: POSTGRES_HOST_AUTH_METHOD has been set to "trust". This will allow
redash-master-postgres-1   |          anyone with access to the Postgres port to access your database without
redash-master-postgres-1   |          a password, even if POSTGRES_PASSWORD is set. See PostgreSQL
redash-master-postgres-1   |          documentation about "trust":
redash-master-postgres-1   |          https://www.postgresql.org/docs/current/auth-trust.html
redash-master-postgres-1   |          In Docker's default configuration, this is effectively any other
redash-master-postgres-1   |          container on the same system.
redash-master-postgres-1   |
redash-master-redis-1      | 1:C 07 Oct 14:59:54.810 # Warning: no config file specified, using the default config. In order to specify a config file use redis-server /path/to/redis.conf
redash-master-postgres-1   |          It is not recommended to use POSTGRES_HOST_AUTH_METHOD=trust. Replace
redash-master-redis-1      |                 _._
redash-master-postgres-1   |          it with "-e POSTGRES_PASSWORD=password" instead to set a password in
redash-master-redis-1      |            _.-``__ ''-._
redash-master-postgres-1   |          "docker run".
redash-master-redis-1      |       _.-``    `.  `_.  ''-._           Redis 3.2.12 (00000000/0) 64 bit
redash-master-postgres-1   | ********************************************************************************
redash-master-redis-1      |   .-`` .-```.  ```\/    _.,_ ''-._
redash-master-redis-1      |  (    '      ,       .-`  | `,    )     Running in standalone mode
redash-master-redis-1      |  |`-._`-...-` __...-.``-._|'` _.-'|     Port: 6379
redash-master-redis-1      |  |    `-._   `._    /     _.-'    |     PID: 1
redash-master-postgres-1   | The files belonging to this database system will be owned by user "postgres".
redash-master-redis-1      |   `-._    `-._  `-./  _.-'    _.-'
redash-master-postgres-1   | This user must also own the server process.
redash-master-redis-1      |  |`-._`-._    `-.__.-'    _.-'_.-'|
redash-master-postgres-1   |
redash-master-redis-1      |  |    `-._`-._        _.-'_.-'    |           http://redis.io
redash-master-postgres-1   | The database cluster will be initialized with locale "en_US.utf8".
redash-master-redis-1      |   `-._    `-._`-.__.-'_.-'    _.-'
redash-master-postgres-1   | The default database encoding has accordingly been set to "UTF8".
redash-master-redis-1      |  |`-._`-._    `-.__.-'    _.-'_.-'|
redash-master-postgres-1   | The default text search configuration will be set to "english".
redash-master-redis-1      |  |    `-._`-._        _.-'_.-'    |
redash-master-postgres-1   |
redash-master-redis-1      |   `-._    `-._`-.__.-'_.-'    _.-'
redash-master-postgres-1   | Data page checksums are disabled.
redash-master-redis-1      |       `-._    `-.__.-'    _.-'
redash-master-postgres-1   |
redash-master-redis-1      |           `-._        _.-'
redash-master-postgres-1   | fixing permissions on existing directory /var/lib/postgresql/data ... ok
redash-master-redis-1      |               `-.__.-'
redash-master-postgres-1   | creating subdirectories ... ok
redash-master-redis-1      |
redash-master-redis-1      | 1:M 07 Oct 14:59:54.818 # Server started, Redis version 3.2.12
redash-master-redis-1      | 1:M 07 Oct 14:59:54.823 # WARNING you have Transparent Huge Pages (THP) support enabled in your kernel. This will create latency and memory usage issues with Redis. To fix this issue run the command 'echo never > /sys/kernel/mm/transparent_hugepage/enabled' as root, and add it to your /etc/rc.local in order to retain the setting after a reboot. Redis must be restarted after THP is disabled.
redash-master-postgres-1   | selecting default max_connections ... 100
redash-master-redis-1      | 1:M 07 Oct 14:59:54.823 * The server is now ready to accept connections on port 6379
redash-master-postgres-1   | selecting default shared_buffers ... 128MB
redash-master-postgres-1   | selecting default timezone ... UTC
redash-master-postgres-1   | selecting dynamic shared memory implementation ... posix
redash-master-postgres-1   | creating configuration files ... ok
redash-master-email-1      | MailDev webapp running at http://0.0.0.0:80
redash-master-email-1      | MailDev SMTP Server running at 0.0.0.0:25
redash-master-postgres-1   | creating template1 database in /var/lib/postgresql/data/base/1 ... ok
redash-master-postgres-1   | initializing pg_authid ... ok
redash-master-postgres-1   | setting password ... ok
redash-master-postgres-1   | initializing dependencies ... ok
redash-master-postgres-1   | creating system views ... ok
redash-master-postgres-1   | loading system objects' descriptions ... ok
redash-master-postgres-1   | creating collations ... sh: locale: not found
redash-master-postgres-1   | ok
redash-master-postgres-1   | No usable system locales were found.
redash-master-postgres-1   | Use the option "--debug" to see details.
redash-master-postgres-1   | creating conversions ... ok
redash-master-postgres-1   | creating dictionaries ... ok
redash-master-postgres-1   | setting privileges on built-in objects ... ok
redash-master-postgres-1   | creating information schema ... ok
redash-master-postgres-1   | loading PL/pgSQL server-side language ... ok
redash-master-postgres-1   | vacuuming database template1 ... ok
redash-master-postgres-1   | copying template1 to template0 ... ok
redash-master-postgres-1   | copying template1 to postgres ... ok
redash-master-postgres-1   | syncing data to disk ... ok
redash-master-postgres-1   |
redash-master-postgres-1   | Success. You can now start the database server using:
redash-master-postgres-1   |
redash-master-postgres-1   |     pg_ctl -D /var/lib/postgresql/data -l logfile start
redash-master-postgres-1   |
redash-master-postgres-1   |
redash-master-postgres-1   | WARNING: enabling "trust" authentication for local connections
redash-master-worker-1     | Starting dev RQ worker...
redash-master-postgres-1   | You can change this by editing pg_hba.conf or using the option -A, or
redash-master-postgres-1   | --auth-local and --auth-host, the next time you run initdb.
redash-master-postgres-1   | waiting for server to start....LOG:  database system was shut down at 2021-10-07 14:59:56 UTC
redash-master-postgres-1   | LOG:  MultiXact member wraparound protections are now enabled
redash-master-postgres-1   | LOG:  database system is ready to accept connections
redash-master-postgres-1   | LOG:  autovacuum launcher started
redash-master-scheduler-1  | Starting dev RQ scheduler...
redash-master-postgres-1   |  done
redash-master-postgres-1   | server started
redash-master-postgres-1   |
redash-master-postgres-1   | /usr/local/bin/docker-entrypoint.sh: ignoring /docker-entrypoint-initdb.d/*
redash-master-postgres-1   |
redash-master-postgres-1   | LOG:  received fast shutdown request
redash-master-postgres-1   | LOG:  aborting any active transactions
redash-master-postgres-1   | waiting for server to shut down....LOG:  autovacuum launcher shutting down
redash-master-postgres-1   | LOG:  shutting down
redash-master-postgres-1   | LOG:  database system is shut down
redash-master-postgres-1   |  done
redash-master-postgres-1   | server stopped
redash-master-postgres-1   |
redash-master-postgres-1   | PostgreSQL init process complete; ready for start up.
redash-master-postgres-1   |
redash-master-postgres-1   | LOG:  database system was shut down at 2021-10-07 14:59:59 UTC
redash-master-postgres-1   | LOG:  MultiXact member wraparound protections are now enabled
redash-master-postgres-1   | LOG:  database system is ready to accept connections
redash-master-postgres-1   | LOG:  autovacuum launcher started
redash-master-server-1     |  * Environment: production
redash-master-server-1     |    WARNING: This is a development server. Do not use it in a production deployment.
redash-master-server-1     |    Use a production WSGI server instead.
redash-master-server-1     |  * Debug mode: on
redash-master-server-1     | [2021-10-07 15:00:06,283][PID:1][INFO][werkzeug]  * Running on http://0.0.0.0:5000/ (Press CTRL+C to quit)
redash-master-server-1     | [2021-10-07 15:00:06,337][PID:1][INFO][werkzeug]  * Restarting with inotify reloader
redash-master-scheduler-1  | [2021-10-07 15:00:06,904][PID:8][INFO][redash.tasks.schedule] Scheduling 305c0cae0a196ae96915fd2b6f81001c435aad65 (refresh_queries) with interval 30.
redash-master-scheduler-1  | [2021-10-07 15:00:06,905][PID:8][INFO][redash.tasks.schedule] Scheduling 59a84668e68687338646f735965213c58e814b32 (remove_ghost_locks) with interval 60.
redash-master-scheduler-1  | [2021-10-07 15:00:06,907][PID:8][INFO][redash.tasks.schedule] Scheduling 75540cdf868e7873f5eec072177423b13b98dece (empty_schedules) with interval 3600.
redash-master-scheduler-1  | [2021-10-07 15:00:06,909][PID:8][INFO][redash.tasks.schedule] Scheduling 52bcd40c254552539398db3cdb15055d4a9a536a (refresh_schemas) with interval 1800.
redash-master-scheduler-1  | [2021-10-07 15:00:06,910][PID:8][INFO][redash.tasks.schedule] Scheduling 18281a865ed3d1a60f366aeb8596fe2283aa421f (sync_user_details) with interval 60.
redash-master-scheduler-1  | [2021-10-07 15:00:06,919][PID:8][INFO][redash.tasks.schedule] Scheduling 797f4f959c6c96c738efd445b17db75742db80a9 (send_aggregated_errors) with interval 3600.
redash-master-scheduler-1  | [2021-10-07 15:00:06,920][PID:8][INFO][redash.tasks.schedule] Scheduling 526f2c7f55dfe92457914cd7df02cfffe4dec877 (version_check) with interval 86400.
redash-master-scheduler-1  | [2021-10-07 15:00:06,921][PID:8][INFO][redash.tasks.schedule] Scheduling e27209059575fcc17c527c47d0957cb21756e551 (cleanup_query_results) with interval 300.
redash-master-scheduler-1  | [2021-10-07 15:00:06,923][PID:8][INFO][rq_scheduler.scheduler] Registering birth
redash-master-worker-1     | [2021-10-07 15:00:07,040][PID:8][INFO][rq.worker] Worker rq:worker:2ab7efb449064ece9c0ee0dcba4fc353: started, version 1.5.0
redash-master-worker-1     | [2021-10-07 15:00:07,041][PID:8][INFO][rq.worker] *** Listening on periodic, emails, default, scheduled_queries, queries, schemas...
redash-master-worker-1     | [2021-10-07 15:00:07,042][PID:8][INFO][rq.worker] Cleaning registries for queue: periodic
redash-master-worker-1     | [2021-10-07 15:00:07,044][PID:8][INFO][rq.worker] Cleaning registries for queue: emails
redash-master-worker-1     | [2021-10-07 15:00:07,045][PID:8][INFO][rq.worker] Cleaning registries for queue: default
redash-master-worker-1     | [2021-10-07 15:00:07,047][PID:8][INFO][rq.worker] Cleaning registries for queue: scheduled_queries
redash-master-worker-1     | [2021-10-07 15:00:07,049][PID:8][INFO][rq.worker] Cleaning registries for queue: queries
redash-master-worker-1     | [2021-10-07 15:00:07,050][PID:8][INFO][rq.worker] Cleaning registries for queue: schemas
redash-master-worker-1     | [2021-10-07 15:00:07,054][PID:8][INFO][rq.worker] periodic: 18281a865ed3d1a60f366aeb8596fe2283aa421f
redash-master-worker-1     | [2021-10-07 15:00:07,077][PID:17][INFO][rq.worker] periodic: Job OK (18281a865ed3d1a60f366aeb8596fe2283aa421f)
redash-master-worker-1     | [2021-10-07 15:00:07,078][PID:17][INFO][rq.worker] Result is kept for 600 seconds
redash-master-worker-1     | [2021-10-07 15:00:07,099][PID:8][INFO][rq.worker] periodic: 305c0cae0a196ae96915fd2b6f81001c435aad65
redash-master-worker-1     | [2021-10-07 15:00:07,114][PID:18][INFO][rq.job.redash.tasks.queries.maintenance] job.func_name=redash.tasks.queries.maintenance.refresh_queries job.id=305c0cae0a196ae96915fd2b6f81001c435aad65 Refreshing queries...
redash-master-postgres-1   | ERROR:  relation "queries" does not exist at character 979
redash-master-postgres-1   | STATEMENT:  SELECT queries.query AS queries_query, queries.updated_at AS queries_updated_at, queries.created_at AS queries_created_at, queries.id AS queries_id, queries.version AS queries_version, queries.org_id AS queries_org_id, queries.data_source_id AS queries_data_source_id, queries.latest_query_data_id AS queries_latest_query_data_id, queries.name AS queries_name, queries.description AS queries_description, queries.query_hash AS queries_query_hash, queries.api_key AS queries_api_key, queries.user_id AS queries_user_id, queries.last_modified_by_id AS queries_last_modified_by_id, queries.is_archived AS queries_is_archived, queries.is_draft AS queries_is_draft, queries.schedule AS queries_schedule, queries.schedule_failures AS queries_schedule_failures, queries.options AS queries_options, queries.search_vector AS queries_search_vector, queries.tags AS queries_tags, query_results_1.id AS query_results_1_id, query_results_1.retrieved_at AS query_results_1_retrieved_at
redash-master-postgres-1   |    FROM queries LEFT OUTER JOIN query_results AS query_results_1 ON query_results_1.id = queries.latest_query_data_id
redash-master-postgres-1   |    WHERE queries.schedule IS NOT NULL ORDER BY queries.id
redash-master-worker-1     | [2021-10-07 15:00:07,181][PID:18][ERROR][rq.worker] sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "queries" does not exist
redash-master-worker-1     | LINE 2: FROM queries LEFT OUTER JOIN query_results AS query_results_...
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     | [SQL: SELECT queries.query AS queries_query, queries.updated_at AS queries_updated_at, queries.created_at AS queries_created_at, queries.id AS queries_id, queries.version AS queries_version, queries.org_id AS queries_org_id, queries.data_source_id AS queries_data_source_id, queries.latest_query_data_id AS queries_latest_query_data_id, queries.name AS queries_name, queries.description AS queries_description, queries.query_hash AS queries_query_hash, queries.api_key AS queries_api_key, queries.user_id AS queries_user_id, queries.last_modified_by_id AS queries_last_modified_by_id, queries.is_archived AS queries_is_archived, queries.is_draft AS queries_is_draft, queries.schedule AS queries_schedule, queries.schedule_failures AS queries_schedule_failures, queries.options AS queries_options, queries.search_vector AS queries_search_vector, queries.tags AS queries_tags, query_results_1.id AS query_results_1_id, query_results_1.retrieved_at AS query_results_1_retrieved_at
redash-master-worker-1     | FROM queries LEFT OUTER JOIN query_results AS query_results_1 ON query_results_1.id = queries.latest_query_data_id
redash-master-worker-1     | WHERE queries.schedule IS NOT NULL ORDER BY queries.id]
redash-master-worker-1     | (Background on this error at: http://sqlalche.me/e/f405)
redash-master-worker-1     | Traceback (most recent call last):
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
redash-master-worker-1     |     cursor, statement, parameters, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 580, in do_execute
redash-master-worker-1     |     cursor.execute(statement, parameters)
redash-master-worker-1     | psycopg2.errors.UndefinedTable: relation "queries" does not exist
redash-master-worker-1     | LINE 2: FROM queries LEFT OUTER JOIN query_results AS query_results_...
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     |
redash-master-worker-1     | The above exception was the direct cause of the following exception:
redash-master-worker-1     |
redash-master-worker-1     | Traceback (most recent call last):
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/worker.py", line 934, in perform_job
redash-master-worker-1     |     rv = job.perform()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/job.py", line 686, in perform
redash-master-worker-1     |     self._result = self._execute()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/job.py", line 692, in _execute
redash-master-worker-1     |     return self.func(*self.args, **self.kwargs)
redash-master-worker-1     |   File "/app/redash/tasks/queries/maintenance.py", line 89, in refresh_queries
redash-master-worker-1     |     for query in models.Query.outdated_queries():
redash-master-worker-1     |   File "/app/redash/models/__init__.py", line 641, in outdated_queries
redash-master-worker-1     |     .order_by(Query.id)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3186, in all
redash-master-worker-1     |     return list(self)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3342, in __iter__
redash-master-worker-1     |     return self._execute_and_instances(context)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3367, in _execute_and_instances
redash-master-worker-1     |     result = conn.execute(querycontext.statement, self._params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 988, in execute
redash-master-worker-1     |     return meth(self, multiparams, params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/sql/elements.py", line 287, in _execute_on_connection
redash-master-worker-1     |     return connection._execute_clauseelement(self, multiparams, params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1107, in _execute_clauseelement
redash-master-worker-1     |     distilled_params,
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1253, in _execute_context
redash-master-worker-1     |     e, statement, parameters, cursor, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1473, in _handle_dbapi_exception
redash-master-worker-1     |     util.raise_from_cause(sqlalchemy_exception, exc_info)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 398, in raise_from_cause
redash-master-worker-1     |     reraise(type(exception), exception, tb=exc_tb, cause=cause)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 152, in reraise
redash-master-worker-1     |     raise value.with_traceback(tb)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
redash-master-worker-1     |     cursor, statement, parameters, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 580, in do_execute
redash-master-worker-1     |     cursor.execute(statement, parameters)
redash-master-postgres-1   | ERROR:  relation "organizations" does not exist at character 293
redash-master-worker-1     | sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "queries" does not exist
redash-master-postgres-1   | STATEMENT:  SELECT organizations.updated_at AS organizations_updated_at, organizations.created_at AS organizations_created_at, organizations.id AS organizations_id, organizations.name AS organizations_name, organizations.slug AS organizations_slug, organizations.settings AS organizations_settings
redash-master-worker-1     | LINE 2: FROM queries LEFT OUTER JOIN query_results AS query_results_...
redash-master-postgres-1   |    FROM organizations
redash-master-worker-1     |              ^
redash-master-postgres-1   |     LIMIT 1
redash-master-worker-1     |
redash-master-worker-1     | [SQL: SELECT queries.query AS queries_query, queries.updated_at AS queries_updated_at, queries.created_at AS queries_created_at, queries.id AS queries_id, queries.version AS queries_version, queries.org_id AS queries_org_id, queries.data_source_id AS queries_data_source_id, queries.latest_query_data_id AS queries_latest_query_data_id, queries.name AS queries_name, queries.description AS queries_description, queries.query_hash AS queries_query_hash, queries.api_key AS queries_api_key, queries.user_id AS queries_user_id, queries.last_modified_by_id AS queries_last_modified_by_id, queries.is_archived AS queries_is_archived, queries.is_draft AS queries_is_draft, queries.schedule AS queries_schedule, queries.schedule_failures AS queries_schedule_failures, queries.options AS queries_options, queries.search_vector AS queries_search_vector, queries.tags AS queries_tags, query_results_1.id AS query_results_1_id, query_results_1.retrieved_at AS query_results_1_retrieved_at
redash-master-worker-1     | FROM queries LEFT OUTER JOIN query_results AS query_results_1 ON query_results_1.id = queries.latest_query_data_id
redash-master-worker-1     | WHERE queries.schedule IS NOT NULL ORDER BY queries.id]
redash-master-worker-1     | (Background on this error at: http://sqlalche.me/e/f405)
redash-master-worker-1     | Traceback (most recent call last):
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
redash-master-worker-1     |     cursor, statement, parameters, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 580, in do_execute
redash-master-worker-1     |     cursor.execute(statement, parameters)
redash-master-worker-1     | psycopg2.errors.UndefinedTable: relation "queries" does not exist
redash-master-worker-1     | LINE 2: FROM queries LEFT OUTER JOIN query_results AS query_results_...
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     |
redash-master-worker-1     | The above exception was the direct cause of the following exception:
redash-master-worker-1     |
redash-master-worker-1     | Traceback (most recent call last):
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/worker.py", line 934, in perform_job
redash-master-worker-1     |     rv = job.perform()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/job.py", line 686, in perform
redash-master-worker-1     |     self._result = self._execute()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/job.py", line 692, in _execute
redash-master-worker-1     |     return self.func(*self.args, **self.kwargs)
redash-master-worker-1     |   File "/app/redash/tasks/queries/maintenance.py", line 89, in refresh_queries
redash-master-worker-1     |     for query in models.Query.outdated_queries():
redash-master-worker-1     |   File "/app/redash/models/__init__.py", line 641, in outdated_queries
redash-master-worker-1     |     .order_by(Query.id)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3186, in all
redash-master-worker-1     |     return list(self)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3342, in __iter__
redash-master-worker-1     |     return self._execute_and_instances(context)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3367, in _execute_and_instances
redash-master-worker-1     |     result = conn.execute(querycontext.statement, self._params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 988, in execute
redash-master-worker-1     |     return meth(self, multiparams, params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/sql/elements.py", line 287, in _execute_on_connection
redash-master-worker-1     |     return connection._execute_clauseelement(self, multiparams, params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1107, in _execute_clauseelement
redash-master-worker-1     |     distilled_params,
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1253, in _execute_context
redash-master-worker-1     |     e, statement, parameters, cursor, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1473, in _handle_dbapi_exception
redash-master-worker-1     |     util.raise_from_cause(sqlalchemy_exception, exc_info)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 398, in raise_from_cause
redash-master-worker-1     |     reraise(type(exception), exception, tb=exc_tb, cause=cause)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 152, in reraise
redash-master-worker-1     |     raise value.with_traceback(tb)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
redash-master-worker-1     |     cursor, statement, parameters, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 580, in do_execute
redash-master-worker-1     |     cursor.execute(statement, parameters)
redash-master-worker-1     | sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "queries" does not exist
redash-master-worker-1     | LINE 2: FROM queries LEFT OUTER JOIN query_results AS query_results_...
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     | [SQL: SELECT queries.query AS queries_query, queries.updated_at AS queries_updated_at, queries.created_at AS queries_created_at, queries.id AS queries_id, queries.version AS queries_version, queries.org_id AS queries_org_id, queries.data_source_id AS queries_data_source_id, queries.latest_query_data_id AS queries_latest_query_data_id, queries.name AS queries_name, queries.description AS queries_description, queries.query_hash AS queries_query_hash, queries.api_key AS queries_api_key, queries.user_id AS queries_user_id, queries.last_modified_by_id AS queries_last_modified_by_id, queries.is_archived AS queries_is_archived, queries.is_draft AS queries_is_draft, queries.schedule AS queries_schedule, queries.schedule_failures AS queries_schedule_failures, queries.options AS queries_options, queries.search_vector AS queries_search_vector, queries.tags AS queries_tags, query_results_1.id AS query_results_1_id, query_results_1.retrieved_at AS query_results_1_retrieved_at
redash-master-postgres-1   | ERROR:  relation "data_sources" does not exist at character 415
redash-master-worker-1     | FROM queries LEFT OUTER JOIN query_results AS query_results_1 ON query_results_1.id = queries.latest_query_data_id
redash-master-postgres-1   | STATEMENT:  SELECT data_sources.encrypted_options AS data_sources_encrypted_options, data_sources.id AS data_sources_id, data_sources.org_id AS data_sources_org_id, data_sources.name AS data_sources_name, data_sources.type AS data_sources_type, data_sources.queue_name AS data_sources_queue_name, data_sources.scheduled_queue_name AS data_sources_scheduled_queue_name, data_sources.created_at AS data_sources_created_at
redash-master-worker-1     | WHERE queries.schedule IS NOT NULL ORDER BY queries.id]
redash-master-postgres-1   |    FROM data_sources
redash-master-worker-1     | (Background on this error at: http://sqlalche.me/e/f405)
redash-master-worker-1     | [2021-10-07 15:00:07,212][PID:8][INFO][rq.worker] periodic: 526f2c7f55dfe92457914cd7df02cfffe4dec877
redash-master-worker-1     | [2021-10-07 15:00:07,233][PID:19][INFO][root] Performing version check.
redash-master-worker-1     | [2021-10-07 15:00:07,234][PID:19][INFO][root] Current version: 9.0.0-beta
redash-master-worker-1     | [2021-10-07 15:00:07,287][PID:19][ERROR][rq.worker] sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "organizations" does not exist
redash-master-worker-1     | LINE 2: FROM organizations
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     | [SQL: SELECT organizations.updated_at AS organizations_updated_at, organizations.created_at AS organizations_created_at, organizations.id AS organizations_id, organizations.name AS organizations_name, organizations.slug AS organizations_slug, organizations.settings AS organizations_settings
redash-master-worker-1     | FROM organizations
redash-master-worker-1     |  LIMIT %(param_1)s]
redash-master-worker-1     | [parameters: {'param_1': 1}]
redash-master-worker-1     | (Background on this error at: http://sqlalche.me/e/f405)
redash-master-worker-1     | Traceback (most recent call last):
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
redash-master-worker-1     |     cursor, statement, parameters, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 580, in do_execute
redash-master-worker-1     |     cursor.execute(statement, parameters)
redash-master-worker-1     | psycopg2.errors.UndefinedTable: relation "organizations" does not exist
redash-master-worker-1     | LINE 2: FROM organizations
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     |
redash-master-worker-1     | The above exception was the direct cause of the following exception:
redash-master-worker-1     |
redash-master-worker-1     | Traceback (most recent call last):
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/worker.py", line 934, in perform_job
redash-master-worker-1     |     rv = job.perform()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/job.py", line 686, in perform
redash-master-worker-1     |     self._result = self._execute()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/job.py", line 692, in _execute
redash-master-worker-1     |     return self.func(*self.args, **self.kwargs)
redash-master-worker-1     |   File "/app/redash/tasks/general.py", line 35, in version_check
redash-master-worker-1     |     run_version_check()
redash-master-worker-1     |   File "/app/redash/version_check.py", line 75, in run_version_check
redash-master-worker-1     |     if Organization.query.first().get_setting("beacon_consent"):
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3240, in first
redash-master-worker-1     |     ret = list(self[0:1])
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3018, in __getitem__
redash-master-worker-1     |     return list(res)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3342, in __iter__
redash-master-worker-1     |     return self._execute_and_instances(context)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3367, in _execute_and_instances
redash-master-worker-1     |     result = conn.execute(querycontext.statement, self._params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 988, in execute
redash-master-worker-1     |     return meth(self, multiparams, params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/sql/elements.py", line 287, in _execute_on_connection
redash-master-worker-1     |     return connection._execute_clauseelement(self, multiparams, params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1107, in _execute_clauseelement
redash-master-worker-1     |     distilled_params,
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1253, in _execute_context
redash-master-worker-1     |     e, statement, parameters, cursor, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1473, in _handle_dbapi_exception
redash-master-worker-1     |     util.raise_from_cause(sqlalchemy_exception, exc_info)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 398, in raise_from_cause
redash-master-worker-1     |     reraise(type(exception), exception, tb=exc_tb, cause=cause)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 152, in reraise
redash-master-worker-1     |     raise value.with_traceback(tb)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
redash-master-worker-1     |     cursor, statement, parameters, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 580, in do_execute
redash-master-worker-1     |     cursor.execute(statement, parameters)
redash-master-worker-1     | sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "organizations" does not exist
redash-master-worker-1     | LINE 2: FROM organizations
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     | [SQL: SELECT organizations.updated_at AS organizations_updated_at, organizations.created_at AS organizations_created_at, organizations.id AS organizations_id, organizations.name AS organizations_name, organizations.slug AS organizations_slug, organizations.settings AS organizations_settings
redash-master-worker-1     | FROM organizations
redash-master-worker-1     |  LIMIT %(param_1)s]
redash-master-worker-1     | [parameters: {'param_1': 1}]
redash-master-worker-1     | (Background on this error at: http://sqlalche.me/e/f405)
redash-master-worker-1     | Traceback (most recent call last):
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
redash-master-worker-1     |     cursor, statement, parameters, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 580, in do_execute
redash-master-worker-1     |     cursor.execute(statement, parameters)
redash-master-worker-1     | psycopg2.errors.UndefinedTable: relation "organizations" does not exist
redash-master-worker-1     | LINE 2: FROM organizations
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     |
redash-master-worker-1     | The above exception was the direct cause of the following exception:
redash-master-worker-1     |
redash-master-worker-1     | Traceback (most recent call last):
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/worker.py", line 934, in perform_job
redash-master-worker-1     |     rv = job.perform()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/job.py", line 686, in perform
redash-master-worker-1     |     self._result = self._execute()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/job.py", line 692, in _execute
redash-master-worker-1     |     return self.func(*self.args, **self.kwargs)
redash-master-worker-1     |   File "/app/redash/tasks/general.py", line 35, in version_check
redash-master-worker-1     |     run_version_check()
redash-master-worker-1     |   File "/app/redash/version_check.py", line 75, in run_version_check
redash-master-worker-1     |     if Organization.query.first().get_setting("beacon_consent"):
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3240, in first
redash-master-worker-1     |     ret = list(self[0:1])
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3018, in __getitem__
redash-master-worker-1     |     return list(res)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3342, in __iter__
redash-master-worker-1     |     return self._execute_and_instances(context)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3367, in _execute_and_instances
redash-master-worker-1     |     result = conn.execute(querycontext.statement, self._params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 988, in execute
redash-master-worker-1     |     return meth(self, multiparams, params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/sql/elements.py", line 287, in _execute_on_connection
redash-master-worker-1     |     return connection._execute_clauseelement(self, multiparams, params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1107, in _execute_clauseelement
redash-master-worker-1     |     distilled_params,
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1253, in _execute_context
redash-master-worker-1     |     e, statement, parameters, cursor, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1473, in _handle_dbapi_exception
redash-master-worker-1     |     util.raise_from_cause(sqlalchemy_exception, exc_info)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 398, in raise_from_cause
redash-master-worker-1     |     reraise(type(exception), exception, tb=exc_tb, cause=cause)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 152, in reraise
redash-master-worker-1     |     raise value.with_traceback(tb)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
redash-master-worker-1     |     cursor, statement, parameters, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 580, in do_execute
redash-master-worker-1     |     cursor.execute(statement, parameters)
redash-master-worker-1     | sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "organizations" does not exist
redash-master-worker-1     | LINE 2: FROM organizations
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     | [SQL: SELECT organizations.updated_at AS organizations_updated_at, organizations.created_at AS organizations_created_at, organizations.id AS organizations_id, organizations.name AS organizations_name, organizations.slug AS organizations_slug, organizations.settings AS organizations_settings
redash-master-worker-1     | FROM organizations
redash-master-worker-1     |  LIMIT %(param_1)s]
redash-master-worker-1     | [parameters: {'param_1': 1}]
redash-master-worker-1     | (Background on this error at: http://sqlalche.me/e/f405)
redash-master-worker-1     | [2021-10-07 15:00:07,312][PID:8][INFO][rq.worker] periodic: 52bcd40c254552539398db3cdb15055d4a9a536a
redash-master-worker-1     | [2021-10-07 15:00:07,329][PID:20][INFO][rq.job.redash.tasks.queries.maintenance] job.func_name=redash.tasks.queries.maintenance.refresh_schemas job.id=52bcd40c254552539398db3cdb15055d4a9a536a task=refresh_schemas state=start
redash-master-worker-1     | [2021-10-07 15:00:07,374][PID:20][ERROR][rq.worker] sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "data_sources" does not exist
redash-master-worker-1     | LINE 2: FROM data_sources
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     | [SQL: SELECT data_sources.encrypted_options AS data_sources_encrypted_options, data_sources.id AS data_sources_id, data_sources.org_id AS data_sources_org_id, data_sources.name AS data_sources_name, data_sources.type AS data_sources_type, data_sources.queue_name AS data_sources_queue_name, data_sources.scheduled_queue_name AS data_sources_scheduled_queue_name, data_sources.created_at AS data_sources_created_at
redash-master-worker-1     | FROM data_sources]
redash-master-worker-1     | (Background on this error at: http://sqlalche.me/e/f405)
redash-master-worker-1     | Traceback (most recent call last):
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
redash-master-worker-1     |     cursor, statement, parameters, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 580, in do_execute
redash-master-worker-1     |     cursor.execute(statement, parameters)
redash-master-worker-1     | psycopg2.errors.UndefinedTable: relation "data_sources" does not exist
redash-master-worker-1     | LINE 2: FROM data_sources
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     |
redash-master-worker-1     | The above exception was the direct cause of the following exception:
redash-master-worker-1     |
redash-master-postgres-1   | ERROR:  relation "queries" does not exist at character 875
redash-master-worker-1     | Traceback (most recent call last):
redash-master-postgres-1   | STATEMENT:  SELECT queries.query AS queries_query, queries.updated_at AS queries_updated_at, queries.created_at AS queries_created_at, queries.id AS queries_id, queries.version AS queries_version, queries.org_id AS queries_org_id, queries.data_source_id AS queries_data_source_id, queries.latest_query_data_id AS queries_latest_query_data_id, queries.name AS queries_name, queries.description AS queries_description, queries.query_hash AS queries_query_hash, queries.api_key AS queries_api_key, queries.user_id AS queries_user_id, queries.last_modified_by_id AS queries_last_modified_by_id, queries.is_archived AS queries_is_archived, queries.is_draft AS queries_is_draft, queries.schedule AS queries_schedule, queries.schedule_failures AS queries_schedule_failures, queries.options AS queries_options, queries.search_vector AS queries_search_vector, queries.tags AS queries_tags
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/worker.py", line 934, in perform_job
redash-master-postgres-1   |    FROM queries
redash-master-worker-1     |     rv = job.perform()
redash-master-postgres-1   |    WHERE queries.schedule IS NOT NULL ORDER BY queries.id
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/job.py", line 686, in perform
redash-master-worker-1     |     self._result = self._execute()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/job.py", line 692, in _execute
redash-master-worker-1     |     return self.func(*self.args, **self.kwargs)
redash-master-worker-1     |   File "/app/redash/tasks/queries/maintenance.py", line 210, in refresh_schemas
redash-master-worker-1     |     for ds in models.DataSource.query:
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3342, in __iter__
redash-master-worker-1     |     return self._execute_and_instances(context)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3367, in _execute_and_instances
redash-master-worker-1     |     result = conn.execute(querycontext.statement, self._params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 988, in execute
redash-master-worker-1     |     return meth(self, multiparams, params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/sql/elements.py", line 287, in _execute_on_connection
redash-master-worker-1     |     return connection._execute_clauseelement(self, multiparams, params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1107, in _execute_clauseelement
redash-master-worker-1     |     distilled_params,
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1253, in _execute_context
redash-master-worker-1     |     e, statement, parameters, cursor, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1473, in _handle_dbapi_exception
redash-master-worker-1     |     util.raise_from_cause(sqlalchemy_exception, exc_info)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 398, in raise_from_cause
redash-master-worker-1     |     reraise(type(exception), exception, tb=exc_tb, cause=cause)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 152, in reraise
redash-master-worker-1     |     raise value.with_traceback(tb)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
redash-master-worker-1     |     cursor, statement, parameters, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 580, in do_execute
redash-master-worker-1     |     cursor.execute(statement, parameters)
redash-master-worker-1     | sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "data_sources" does not exist
redash-master-worker-1     | LINE 2: FROM data_sources
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     | [SQL: SELECT data_sources.encrypted_options AS data_sources_encrypted_options, data_sources.id AS data_sources_id, data_sources.org_id AS data_sources_org_id, data_sources.name AS data_sources_name, data_sources.type AS data_sources_type, data_sources.queue_name AS data_sources_queue_name, data_sources.scheduled_queue_name AS data_sources_scheduled_queue_name, data_sources.created_at AS data_sources_created_at
redash-master-worker-1     | FROM data_sources]
redash-master-worker-1     | (Background on this error at: http://sqlalche.me/e/f405)
redash-master-worker-1     | Traceback (most recent call last):
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
redash-master-worker-1     |     cursor, statement, parameters, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 580, in do_execute
redash-master-worker-1     |     cursor.execute(statement, parameters)
redash-master-worker-1     | psycopg2.errors.UndefinedTable: relation "data_sources" does not exist
redash-master-worker-1     | LINE 2: FROM data_sources
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     |
redash-master-worker-1     | The above exception was the direct cause of the following exception:
redash-master-worker-1     |
redash-master-worker-1     | Traceback (most recent call last):
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/worker.py", line 934, in perform_job
redash-master-worker-1     |     rv = job.perform()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/job.py", line 686, in perform
redash-master-worker-1     |     self._result = self._execute()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/job.py", line 692, in _execute
redash-master-worker-1     |     return self.func(*self.args, **self.kwargs)
redash-master-worker-1     |   File "/app/redash/tasks/queries/maintenance.py", line 210, in refresh_schemas
redash-master-worker-1     |     for ds in models.DataSource.query:
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3342, in __iter__
redash-master-worker-1     |     return self._execute_and_instances(context)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3367, in _execute_and_instances
redash-master-worker-1     |     result = conn.execute(querycontext.statement, self._params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 988, in execute
redash-master-worker-1     |     return meth(self, multiparams, params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/sql/elements.py", line 287, in _execute_on_connection
redash-master-worker-1     |     return connection._execute_clauseelement(self, multiparams, params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1107, in _execute_clauseelement
redash-master-worker-1     |     distilled_params,
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1253, in _execute_context
redash-master-worker-1     |     e, statement, parameters, cursor, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1473, in _handle_dbapi_exception
redash-master-worker-1     |     util.raise_from_cause(sqlalchemy_exception, exc_info)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 398, in raise_from_cause
redash-master-worker-1     |     reraise(type(exception), exception, tb=exc_tb, cause=cause)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 152, in reraise
redash-master-worker-1     |     raise value.with_traceback(tb)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
redash-master-worker-1     |     cursor, statement, parameters, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 580, in do_execute
redash-master-worker-1     |     cursor.execute(statement, parameters)
redash-master-worker-1     | sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "data_sources" does not exist
redash-master-worker-1     | LINE 2: FROM data_sources
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     | [SQL: SELECT data_sources.encrypted_options AS data_sources_encrypted_options, data_sources.id AS data_sources_id, data_sources.org_id AS data_sources_org_id, data_sources.name AS data_sources_name, data_sources.type AS data_sources_type, data_sources.queue_name AS data_sources_queue_name, data_sources.scheduled_queue_name AS data_sources_scheduled_queue_name, data_sources.created_at AS data_sources_created_at
redash-master-worker-1     | FROM data_sources]
redash-master-worker-1     | (Background on this error at: http://sqlalche.me/e/f405)
redash-master-worker-1     | [2021-10-07 15:00:07,394][PID:8][INFO][rq.worker] periodic: 59a84668e68687338646f735965213c58e814b32
redash-master-worker-1     | [2021-10-07 15:00:07,415][PID:21][INFO][rq.job.redash.tasks.queries.maintenance] job.func_name=redash.tasks.queries.maintenance.remove_ghost_locks job.id=59a84668e68687338646f735965213c58e814b32 Locks found: 0, Locks removed: 0
redash-master-worker-1     | [2021-10-07 15:00:07,418][PID:21][INFO][rq.worker] periodic: Job OK (59a84668e68687338646f735965213c58e814b32)
redash-master-worker-1     | [2021-10-07 15:00:07,419][PID:21][INFO][rq.worker] Result is kept for 600 seconds
redash-master-worker-1     | [2021-10-07 15:00:07,437][PID:8][INFO][rq.worker] periodic: 75540cdf868e7873f5eec072177423b13b98dece
redash-master-worker-1     | [2021-10-07 15:00:07,452][PID:22][INFO][rq.job.redash.tasks.queries.maintenance] job.func_name=redash.tasks.queries.maintenance.empty_schedules job.id=75540cdf868e7873f5eec072177423b13b98dece Deleting schedules of past scheduled queries...
redash-master-worker-1     | [2021-10-07 15:00:07,526][PID:22][ERROR][rq.worker] sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "queries" does not exist
redash-master-worker-1     | LINE 2: FROM queries
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     | [SQL: SELECT queries.query AS queries_query, queries.updated_at AS queries_updated_at, queries.created_at AS queries_created_at, queries.id AS queries_id, queries.version AS queries_version, queries.org_id AS queries_org_id, queries.data_source_id AS queries_data_source_id, queries.latest_query_data_id AS queries_latest_query_data_id, queries.name AS queries_name, queries.description AS queries_description, queries.query_hash AS queries_query_hash, queries.api_key AS queries_api_key, queries.user_id AS queries_user_id, queries.last_modified_by_id AS queries_last_modified_by_id, queries.is_archived AS queries_is_archived, queries.is_draft AS queries_is_draft, queries.schedule AS queries_schedule, queries.schedule_failures AS queries_schedule_failures, queries.options AS queries_options, queries.search_vector AS queries_search_vector, queries.tags AS queries_tags
redash-master-worker-1     | FROM queries
redash-master-worker-1     | WHERE queries.schedule IS NOT NULL ORDER BY queries.id]
redash-master-worker-1     | (Background on this error at: http://sqlalche.me/e/f405)
redash-master-worker-1     | Traceback (most recent call last):
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
redash-master-worker-1     |     cursor, statement, parameters, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 580, in do_execute
redash-master-worker-1     |     cursor.execute(statement, parameters)
redash-master-worker-1     | psycopg2.errors.UndefinedTable: relation "queries" does not exist
redash-master-worker-1     | LINE 2: FROM queries
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     |
redash-master-worker-1     | The above exception was the direct cause of the following exception:
redash-master-worker-1     |
redash-master-worker-1     | Traceback (most recent call last):
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/worker.py", line 934, in perform_job
redash-master-worker-1     |     rv = job.perform()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/job.py", line 686, in perform
redash-master-worker-1     |     self._result = self._execute()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/job.py", line 692, in _execute
redash-master-worker-1     |     return self.func(*self.args, **self.kwargs)
redash-master-worker-1     |   File "/app/redash/tasks/queries/maintenance.py", line 23, in empty_schedules
redash-master-worker-1     |     queries = models.Query.past_scheduled_queries()
redash-master-worker-1     |   File "/app/redash/models/__init__.py", line 626, in past_scheduled_queries
redash-master-worker-1     |     for query in queries
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3342, in __iter__
redash-master-worker-1     |     return self._execute_and_instances(context)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3367, in _execute_and_instances
redash-master-worker-1     |     result = conn.execute(querycontext.statement, self._params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 988, in execute
redash-master-worker-1     |     return meth(self, multiparams, params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/sql/elements.py", line 287, in _execute_on_connection
redash-master-worker-1     |     return connection._execute_clauseelement(self, multiparams, params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1107, in _execute_clauseelement
redash-master-worker-1     |     distilled_params,
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1253, in _execute_context
redash-master-worker-1     |     e, statement, parameters, cursor, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1473, in _handle_dbapi_exception
redash-master-worker-1     |     util.raise_from_cause(sqlalchemy_exception, exc_info)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 398, in raise_from_cause
redash-master-worker-1     |     reraise(type(exception), exception, tb=exc_tb, cause=cause)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 152, in reraise
redash-master-worker-1     |     raise value.with_traceback(tb)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
redash-master-worker-1     |     cursor, statement, parameters, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 580, in do_execute
redash-master-worker-1     |     cursor.execute(statement, parameters)
redash-master-worker-1     | sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "queries" does not exist
redash-master-worker-1     | LINE 2: FROM queries
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     | [SQL: SELECT queries.query AS queries_query, queries.updated_at AS queries_updated_at, queries.created_at AS queries_created_at, queries.id AS queries_id, queries.version AS queries_version, queries.org_id AS queries_org_id, queries.data_source_id AS queries_data_source_id, queries.latest_query_data_id AS queries_latest_query_data_id, queries.name AS queries_name, queries.description AS queries_description, queries.query_hash AS queries_query_hash, queries.api_key AS queries_api_key, queries.user_id AS queries_user_id, queries.last_modified_by_id AS queries_last_modified_by_id, queries.is_archived AS queries_is_archived, queries.is_draft AS queries_is_draft, queries.schedule AS queries_schedule, queries.schedule_failures AS queries_schedule_failures, queries.options AS queries_options, queries.search_vector AS queries_search_vector, queries.tags AS queries_tags
redash-master-worker-1     | FROM queries
redash-master-worker-1     | WHERE queries.schedule IS NOT NULL ORDER BY queries.id]
redash-master-worker-1     | (Background on this error at: http://sqlalche.me/e/f405)
redash-master-worker-1     | Traceback (most recent call last):
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
redash-master-worker-1     |     cursor, statement, parameters, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 580, in do_execute
redash-master-worker-1     |     cursor.execute(statement, parameters)
redash-master-worker-1     | psycopg2.errors.UndefinedTable: relation "queries" does not exist
redash-master-worker-1     | LINE 2: FROM queries
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     |
redash-master-worker-1     | The above exception was the direct cause of the following exception:
redash-master-worker-1     |
redash-master-worker-1     | Traceback (most recent call last):
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/worker.py", line 934, in perform_job
redash-master-worker-1     |     rv = job.perform()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/job.py", line 686, in perform
redash-master-worker-1     |     self._result = self._execute()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/job.py", line 692, in _execute
redash-master-worker-1     |     return self.func(*self.args, **self.kwargs)
redash-master-postgres-1   | ERROR:  relation "query_results" does not exist at character 13
redash-master-worker-1     |   File "/app/redash/tasks/queries/maintenance.py", line 23, in empty_schedules
redash-master-postgres-1   | STATEMENT:  DELETE FROM query_results WHERE query_results.id IN (SELECT query_results.id
redash-master-worker-1     |     queries = models.Query.past_scheduled_queries()
redash-master-postgres-1   |    FROM query_results LEFT OUTER JOIN queries ON query_results.id = queries.latest_query_data_id
redash-master-worker-1     |   File "/app/redash/models/__init__.py", line 626, in past_scheduled_queries
redash-master-postgres-1   |    WHERE queries.id IS NULL AND query_results.retrieved_at < '2021-09-30T15:00:07.609277'::timestamp
redash-master-worker-1     |     for query in queries
redash-master-postgres-1   |     LIMIT 100)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3342, in __iter__
redash-master-worker-1     |     return self._execute_and_instances(context)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3367, in _execute_and_instances
redash-master-worker-1     |     result = conn.execute(querycontext.statement, self._params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 988, in execute
redash-master-worker-1     |     return meth(self, multiparams, params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/sql/elements.py", line 287, in _execute_on_connection
redash-master-worker-1     |     return connection._execute_clauseelement(self, multiparams, params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1107, in _execute_clauseelement
redash-master-worker-1     |     distilled_params,
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1253, in _execute_context
redash-master-worker-1     |     e, statement, parameters, cursor, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1473, in _handle_dbapi_exception
redash-master-worker-1     |     util.raise_from_cause(sqlalchemy_exception, exc_info)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 398, in raise_from_cause
redash-master-worker-1     |     reraise(type(exception), exception, tb=exc_tb, cause=cause)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 152, in reraise
redash-master-worker-1     |     raise value.with_traceback(tb)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
redash-master-worker-1     |     cursor, statement, parameters, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 580, in do_execute
redash-master-worker-1     |     cursor.execute(statement, parameters)
redash-master-worker-1     | sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "queries" does not exist
redash-master-worker-1     | LINE 2: FROM queries
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     | [SQL: SELECT queries.query AS queries_query, queries.updated_at AS queries_updated_at, queries.created_at AS queries_created_at, queries.id AS queries_id, queries.version AS queries_version, queries.org_id AS queries_org_id, queries.data_source_id AS queries_data_source_id, queries.latest_query_data_id AS queries_latest_query_data_id, queries.name AS queries_name, queries.description AS queries_description, queries.query_hash AS queries_query_hash, queries.api_key AS queries_api_key, queries.user_id AS queries_user_id, queries.last_modified_by_id AS queries_last_modified_by_id, queries.is_archived AS queries_is_archived, queries.is_draft AS queries_is_draft, queries.schedule AS queries_schedule, queries.schedule_failures AS queries_schedule_failures, queries.options AS queries_options, queries.search_vector AS queries_search_vector, queries.tags AS queries_tags
redash-master-worker-1     | FROM queries
redash-master-worker-1     | WHERE queries.schedule IS NOT NULL ORDER BY queries.id]
redash-master-worker-1     | (Background on this error at: http://sqlalche.me/e/f405)
redash-master-worker-1     | [2021-10-07 15:00:07,556][PID:8][INFO][rq.worker] periodic: 797f4f959c6c96c738efd445b17db75742db80a9
redash-master-worker-1     | [2021-10-07 15:00:07,574][PID:23][INFO][rq.worker] periodic: Job OK (797f4f959c6c96c738efd445b17db75742db80a9)
redash-master-worker-1     | [2021-10-07 15:00:07,574][PID:23][INFO][rq.worker] Result is kept for 7200 seconds
redash-master-worker-1     | [2021-10-07 15:00:07,591][PID:8][INFO][rq.worker] periodic: e27209059575fcc17c527c47d0957cb21756e551
redash-master-worker-1     | [2021-10-07 15:00:07,608][PID:24][INFO][rq.job.redash.tasks.queries.maintenance] job.func_name=redash.tasks.queries.maintenance.cleanup_query_results job.id=e27209059575fcc17c527c47d0957cb21756e551 Running query results clean up (removing maximum of 100 unused results, that are 7 days old or more)
redash-master-worker-1     | [2021-10-07 15:00:07,658][PID:24][ERROR][rq.worker] sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "query_results" does not exist
redash-master-worker-1     | LINE 1: DELETE FROM query_results WHERE query_results.id IN (SELECT ...
redash-master-worker-1     |                     ^
redash-master-worker-1     |
redash-master-worker-1     | [SQL: DELETE FROM query_results WHERE query_results.id IN (SELECT query_results.id
redash-master-worker-1     | FROM query_results LEFT OUTER JOIN queries ON query_results.id = queries.latest_query_data_id
redash-master-worker-1     | WHERE queries.id IS NULL AND query_results.retrieved_at < %(retrieved_at_1)s
redash-master-worker-1     |  LIMIT %(param_1)s)]
redash-master-worker-1     | [parameters: {'retrieved_at_1': datetime.datetime(2021, 9, 30, 15, 0, 7, 609277), 'param_1': 100}]
redash-master-worker-1     | (Background on this error at: http://sqlalche.me/e/f405)
redash-master-worker-1     | Traceback (most recent call last):
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
redash-master-worker-1     |     cursor, statement, parameters, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 580, in do_execute
redash-master-worker-1     |     cursor.execute(statement, parameters)
redash-master-worker-1     | psycopg2.errors.UndefinedTable: relation "query_results" does not exist
redash-master-worker-1     | LINE 1: DELETE FROM query_results WHERE query_results.id IN (SELECT ...
redash-master-worker-1     |                     ^
redash-master-worker-1     |
redash-master-worker-1     |
redash-master-worker-1     | The above exception was the direct cause of the following exception:
redash-master-worker-1     |
redash-master-worker-1     | Traceback (most recent call last):
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/worker.py", line 934, in perform_job
redash-master-worker-1     |     rv = job.perform()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/job.py", line 686, in perform
redash-master-worker-1     |     self._result = self._execute()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/job.py", line 692, in _execute
redash-master-worker-1     |     return self.func(*self.args, **self.kwargs)
redash-master-worker-1     |   File "/app/redash/tasks/queries/maintenance.py", line 142, in cleanup_query_results
redash-master-worker-1     |     ).delete(synchronize_session=False)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3727, in delete
redash-master-worker-1     |     delete_op.exec_()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 1693, in exec_
redash-master-worker-1     |     self._do_exec()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 1921, in _do_exec
redash-master-worker-1     |     self._execute_stmt(delete_stmt)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 1698, in _execute_stmt
redash-master-worker-1     |     self.result = self.query._execute_crud(stmt, self.mapper)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3375, in _execute_crud
redash-master-worker-1     |     return conn.execute(stmt, self._params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 988, in execute
redash-master-worker-1     |     return meth(self, multiparams, params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/sql/elements.py", line 287, in _execute_on_connection
redash-master-worker-1     |     return connection._execute_clauseelement(self, multiparams, params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1107, in _execute_clauseelement
redash-master-worker-1     |     distilled_params,
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1253, in _execute_context
redash-master-worker-1     |     e, statement, parameters, cursor, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1473, in _handle_dbapi_exception
redash-master-worker-1     |     util.raise_from_cause(sqlalchemy_exception, exc_info)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 398, in raise_from_cause
redash-master-worker-1     |     reraise(type(exception), exception, tb=exc_tb, cause=cause)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 152, in reraise
redash-master-worker-1     |     raise value.with_traceback(tb)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
redash-master-worker-1     |     cursor, statement, parameters, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 580, in do_execute
redash-master-worker-1     |     cursor.execute(statement, parameters)
redash-master-worker-1     | sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "query_results" does not exist
redash-master-worker-1     | LINE 1: DELETE FROM query_results WHERE query_results.id IN (SELECT ...
redash-master-worker-1     |                     ^
redash-master-worker-1     |
redash-master-worker-1     | [SQL: DELETE FROM query_results WHERE query_results.id IN (SELECT query_results.id
redash-master-worker-1     | FROM query_results LEFT OUTER JOIN queries ON query_results.id = queries.latest_query_data_id
redash-master-worker-1     | WHERE queries.id IS NULL AND query_results.retrieved_at < %(retrieved_at_1)s
redash-master-worker-1     |  LIMIT %(param_1)s)]
redash-master-worker-1     | [parameters: {'retrieved_at_1': datetime.datetime(2021, 9, 30, 15, 0, 7, 609277), 'param_1': 100}]
redash-master-worker-1     | (Background on this error at: http://sqlalche.me/e/f405)
redash-master-worker-1     | Traceback (most recent call last):
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
redash-master-worker-1     |     cursor, statement, parameters, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 580, in do_execute
redash-master-worker-1     |     cursor.execute(statement, parameters)
redash-master-worker-1     | psycopg2.errors.UndefinedTable: relation "query_results" does not exist
redash-master-worker-1     | LINE 1: DELETE FROM query_results WHERE query_results.id IN (SELECT ...
redash-master-worker-1     |                     ^
redash-master-worker-1     |
redash-master-worker-1     |
redash-master-worker-1     | The above exception was the direct cause of the following exception:
redash-master-worker-1     |
redash-master-worker-1     | Traceback (most recent call last):
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/worker.py", line 934, in perform_job
redash-master-worker-1     |     rv = job.perform()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/job.py", line 686, in perform
redash-master-worker-1     |     self._result = self._execute()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/job.py", line 692, in _execute
redash-master-worker-1     |     return self.func(*self.args, **self.kwargs)
redash-master-worker-1     |   File "/app/redash/tasks/queries/maintenance.py", line 142, in cleanup_query_results
redash-master-worker-1     |     ).delete(synchronize_session=False)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3727, in delete
redash-master-worker-1     |     delete_op.exec_()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 1693, in exec_
redash-master-worker-1     |     self._do_exec()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 1921, in _do_exec
redash-master-worker-1     |     self._execute_stmt(delete_stmt)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 1698, in _execute_stmt
redash-master-worker-1     |     self.result = self.query._execute_crud(stmt, self.mapper)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3375, in _execute_crud
redash-master-worker-1     |     return conn.execute(stmt, self._params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 988, in execute
redash-master-worker-1     |     return meth(self, multiparams, params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/sql/elements.py", line 287, in _execute_on_connection
redash-master-worker-1     |     return connection._execute_clauseelement(self, multiparams, params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1107, in _execute_clauseelement
redash-master-worker-1     |     distilled_params,
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1253, in _execute_context
redash-master-worker-1     |     e, statement, parameters, cursor, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1473, in _handle_dbapi_exception
redash-master-worker-1     |     util.raise_from_cause(sqlalchemy_exception, exc_info)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 398, in raise_from_cause
redash-master-worker-1     |     reraise(type(exception), exception, tb=exc_tb, cause=cause)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 152, in reraise
redash-master-worker-1     |     raise value.with_traceback(tb)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
redash-master-worker-1     |     cursor, statement, parameters, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 580, in do_execute
redash-master-worker-1     |     cursor.execute(statement, parameters)
redash-master-worker-1     | sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "query_results" does not exist
redash-master-worker-1     | LINE 1: DELETE FROM query_results WHERE query_results.id IN (SELECT ...
redash-master-worker-1     |                     ^
redash-master-worker-1     |
redash-master-worker-1     | [SQL: DELETE FROM query_results WHERE query_results.id IN (SELECT query_results.id
redash-master-worker-1     | FROM query_results LEFT OUTER JOIN queries ON query_results.id = queries.latest_query_data_id
redash-master-worker-1     | WHERE queries.id IS NULL AND query_results.retrieved_at < %(retrieved_at_1)s
redash-master-worker-1     |  LIMIT %(param_1)s)]
redash-master-worker-1     | [parameters: {'retrieved_at_1': datetime.datetime(2021, 9, 30, 15, 0, 7, 609277), 'param_1': 100}]
redash-master-worker-1     | (Background on this error at: http://sqlalche.me/e/f405)
redash-master-server-1     | [2021-10-07 15:00:10,685][PID:20][WARNING][werkzeug]  * Debugger is active!
redash-master-server-1     | [2021-10-07 15:00:10,692][PID:20][INFO][werkzeug]  * Debugger PIN: 276-972-177
redash-master-worker-1     | [2021-10-07 15:00:36,957][PID:8][INFO][rq.worker] periodic: 305c0cae0a196ae96915fd2b6f81001c435aad65
redash-master-worker-1     | [2021-10-07 15:00:36,974][PID:25][INFO][rq.job.redash.tasks.queries.maintenance] job.func_name=redash.tasks.queries.maintenance.refresh_queries job.id=305c0cae0a196ae96915fd2b6f81001c435aad65 Refreshing queries...
redash-master-postgres-1   | ERROR:  relation "queries" does not exist at character 979
redash-master-postgres-1   | STATEMENT:  SELECT queries.query AS queries_query, queries.updated_at AS queries_updated_at, queries.created_at AS queries_created_at, queries.id AS queries_id, queries.version AS queries_version, queries.org_id AS queries_org_id, queries.data_source_id AS queries_data_source_id, queries.latest_query_data_id AS queries_latest_query_data_id, queries.name AS queries_name, queries.description AS queries_description, queries.query_hash AS queries_query_hash, queries.api_key AS queries_api_key, queries.user_id AS queries_user_id, queries.last_modified_by_id AS queries_last_modified_by_id, queries.is_archived AS queries_is_archived, queries.is_draft AS queries_is_draft, queries.schedule AS queries_schedule, queries.schedule_failures AS queries_schedule_failures, queries.options AS queries_options, queries.search_vector AS queries_search_vector, queries.tags AS queries_tags, query_results_1.id AS query_results_1_id, query_results_1.retrieved_at AS query_results_1_retrieved_at
redash-master-postgres-1   |    FROM queries LEFT OUTER JOIN query_results AS query_results_1 ON query_results_1.id = queries.latest_query_data_id
redash-master-postgres-1   |    WHERE queries.schedule IS NOT NULL ORDER BY queries.id
redash-master-worker-1     | [2021-10-07 15:00:37,110][PID:25][ERROR][rq.worker] sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "queries" does not exist
redash-master-worker-1     | LINE 2: FROM queries LEFT OUTER JOIN query_results AS query_results_...
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     | [SQL: SELECT queries.query AS queries_query, queries.updated_at AS queries_updated_at, queries.created_at AS queries_created_at, queries.id AS queries_id, queries.version AS queries_version, queries.org_id AS queries_org_id, queries.data_source_id AS queries_data_source_id, queries.latest_query_data_id AS queries_latest_query_data_id, queries.name AS queries_name, queries.description AS queries_description, queries.query_hash AS queries_query_hash, queries.api_key AS queries_api_key, queries.user_id AS queries_user_id, queries.last_modified_by_id AS queries_last_modified_by_id, queries.is_archived AS queries_is_archived, queries.is_draft AS queries_is_draft, queries.schedule AS queries_schedule, queries.schedule_failures AS queries_schedule_failures, queries.options AS queries_options, queries.search_vector AS queries_search_vector, queries.tags AS queries_tags, query_results_1.id AS query_results_1_id, query_results_1.retrieved_at AS query_results_1_retrieved_at
redash-master-worker-1     | FROM queries LEFT OUTER JOIN query_results AS query_results_1 ON query_results_1.id = queries.latest_query_data_id
redash-master-worker-1     | WHERE queries.schedule IS NOT NULL ORDER BY queries.id]
redash-master-worker-1     | (Background on this error at: http://sqlalche.me/e/f405)
redash-master-worker-1     | Traceback (most recent call last):
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
redash-master-worker-1     |     cursor, statement, parameters, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 580, in do_execute
redash-master-worker-1     |     cursor.execute(statement, parameters)
redash-master-worker-1     | psycopg2.errors.UndefinedTable: relation "queries" does not exist
redash-master-worker-1     | LINE 2: FROM queries LEFT OUTER JOIN query_results AS query_results_...
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     |
redash-master-worker-1     | The above exception was the direct cause of the following exception:
redash-master-worker-1     |
redash-master-worker-1     | Traceback (most recent call last):
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/worker.py", line 934, in perform_job
redash-master-worker-1     |     rv = job.perform()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/job.py", line 686, in perform
redash-master-worker-1     |     self._result = self._execute()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/job.py", line 692, in _execute
redash-master-worker-1     |     return self.func(*self.args, **self.kwargs)
redash-master-worker-1     |   File "/app/redash/tasks/queries/maintenance.py", line 89, in refresh_queries
redash-master-worker-1     |     for query in models.Query.outdated_queries():
redash-master-worker-1     |   File "/app/redash/models/__init__.py", line 641, in outdated_queries
redash-master-worker-1     |     .order_by(Query.id)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3186, in all
redash-master-worker-1     |     return list(self)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3342, in __iter__
redash-master-worker-1     |     return self._execute_and_instances(context)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3367, in _execute_and_instances
redash-master-worker-1     |     result = conn.execute(querycontext.statement, self._params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 988, in execute
redash-master-worker-1     |     return meth(self, multiparams, params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/sql/elements.py", line 287, in _execute_on_connection
redash-master-worker-1     |     return connection._execute_clauseelement(self, multiparams, params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1107, in _execute_clauseelement
redash-master-worker-1     |     distilled_params,
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1253, in _execute_context
redash-master-worker-1     |     e, statement, parameters, cursor, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1473, in _handle_dbapi_exception
redash-master-worker-1     |     util.raise_from_cause(sqlalchemy_exception, exc_info)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 398, in raise_from_cause
redash-master-worker-1     |     reraise(type(exception), exception, tb=exc_tb, cause=cause)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 152, in reraise
redash-master-worker-1     |     raise value.with_traceback(tb)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
redash-master-worker-1     |     cursor, statement, parameters, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 580, in do_execute
redash-master-worker-1     |     cursor.execute(statement, parameters)
redash-master-worker-1     | sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "queries" does not exist
redash-master-worker-1     | LINE 2: FROM queries LEFT OUTER JOIN query_results AS query_results_...
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     | [SQL: SELECT queries.query AS queries_query, queries.updated_at AS queries_updated_at, queries.created_at AS queries_created_at, queries.id AS queries_id, queries.version AS queries_version, queries.org_id AS queries_org_id, queries.data_source_id AS queries_data_source_id, queries.latest_query_data_id AS queries_latest_query_data_id, queries.name AS queries_name, queries.description AS queries_description, queries.query_hash AS queries_query_hash, queries.api_key AS queries_api_key, queries.user_id AS queries_user_id, queries.last_modified_by_id AS queries_last_modified_by_id, queries.is_archived AS queries_is_archived, queries.is_draft AS queries_is_draft, queries.schedule AS queries_schedule, queries.schedule_failures AS queries_schedule_failures, queries.options AS queries_options, queries.search_vector AS queries_search_vector, queries.tags AS queries_tags, query_results_1.id AS query_results_1_id, query_results_1.retrieved_at AS query_results_1_retrieved_at
redash-master-worker-1     | FROM queries LEFT OUTER JOIN query_results AS query_results_1 ON query_results_1.id = queries.latest_query_data_id
redash-master-worker-1     | WHERE queries.schedule IS NOT NULL ORDER BY queries.id]
redash-master-worker-1     | (Background on this error at: http://sqlalche.me/e/f405)
redash-master-worker-1     | Traceback (most recent call last):
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
redash-master-worker-1     |     cursor, statement, parameters, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 580, in do_execute
redash-master-worker-1     |     cursor.execute(statement, parameters)
redash-master-worker-1     | psycopg2.errors.UndefinedTable: relation "queries" does not exist
redash-master-worker-1     | LINE 2: FROM queries LEFT OUTER JOIN query_results AS query_results_...
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     |
redash-master-worker-1     | The above exception was the direct cause of the following exception:
redash-master-worker-1     |
redash-master-worker-1     | Traceback (most recent call last):
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/worker.py", line 934, in perform_job
redash-master-worker-1     |     rv = job.perform()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/job.py", line 686, in perform
redash-master-worker-1     |     self._result = self._execute()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/job.py", line 692, in _execute
redash-master-worker-1     |     return self.func(*self.args, **self.kwargs)
redash-master-worker-1     |   File "/app/redash/tasks/queries/maintenance.py", line 89, in refresh_queries
redash-master-worker-1     |     for query in models.Query.outdated_queries():
redash-master-worker-1     |   File "/app/redash/models/__init__.py", line 641, in outdated_queries
redash-master-worker-1     |     .order_by(Query.id)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3186, in all
redash-master-worker-1     |     return list(self)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3342, in __iter__
redash-master-worker-1     |     return self._execute_and_instances(context)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3367, in _execute_and_instances
redash-master-worker-1     |     result = conn.execute(querycontext.statement, self._params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 988, in execute
redash-master-worker-1     |     return meth(self, multiparams, params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/sql/elements.py", line 287, in _execute_on_connection
redash-master-worker-1     |     return connection._execute_clauseelement(self, multiparams, params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1107, in _execute_clauseelement
redash-master-worker-1     |     distilled_params,
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1253, in _execute_context
redash-master-worker-1     |     e, statement, parameters, cursor, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1473, in _handle_dbapi_exception
redash-master-worker-1     |     util.raise_from_cause(sqlalchemy_exception, exc_info)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 398, in raise_from_cause
redash-master-worker-1     |     reraise(type(exception), exception, tb=exc_tb, cause=cause)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 152, in reraise
redash-master-worker-1     |     raise value.with_traceback(tb)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
redash-master-worker-1     |     cursor, statement, parameters, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 580, in do_execute
redash-master-worker-1     |     cursor.execute(statement, parameters)
redash-master-worker-1     | sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "queries" does not exist
redash-master-worker-1     | LINE 2: FROM queries LEFT OUTER JOIN query_results AS query_results_...
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     | [SQL: SELECT queries.query AS queries_query, queries.updated_at AS queries_updated_at, queries.created_at AS queries_created_at, queries.id AS queries_id, queries.version AS queries_version, queries.org_id AS queries_org_id, queries.data_source_id AS queries_data_source_id, queries.latest_query_data_id AS queries_latest_query_data_id, queries.name AS queries_name, queries.description AS queries_description, queries.query_hash AS queries_query_hash, queries.api_key AS queries_api_key, queries.user_id AS queries_user_id, queries.last_modified_by_id AS queries_last_modified_by_id, queries.is_archived AS queries_is_archived, queries.is_draft AS queries_is_draft, queries.schedule AS queries_schedule, queries.schedule_failures AS queries_schedule_failures, queries.options AS queries_options, queries.search_vector AS queries_search_vector, queries.tags AS queries_tags, query_results_1.id AS query_results_1_id, query_results_1.retrieved_at AS query_results_1_retrieved_at
redash-master-worker-1     | FROM queries LEFT OUTER JOIN query_results AS query_results_1 ON query_results_1.id = queries.latest_query_data_id
redash-master-worker-1     | WHERE queries.schedule IS NOT NULL ORDER BY queries.id]
redash-master-worker-1     | (Background on this error at: http://sqlalche.me/e/f405)
redash-master-worker-1     | [2021-10-07 15:01:06,974][PID:8][INFO][rq.worker] periodic: 18281a865ed3d1a60f366aeb8596fe2283aa421f
redash-master-worker-1     | [2021-10-07 15:01:07,001][PID:26][INFO][rq.worker] periodic: Job OK (18281a865ed3d1a60f366aeb8596fe2283aa421f)
redash-master-worker-1     | [2021-10-07 15:01:07,001][PID:26][INFO][rq.worker] Result is kept for 600 seconds
redash-master-worker-1     | [2021-10-07 15:01:07,020][PID:8][INFO][rq.worker] periodic: 305c0cae0a196ae96915fd2b6f81001c435aad65
redash-master-worker-1     | [2021-10-07 15:01:07,037][PID:27][INFO][rq.job.redash.tasks.queries.maintenance] job.func_name=redash.tasks.queries.maintenance.refresh_queries job.id=305c0cae0a196ae96915fd2b6f81001c435aad65 Refreshing queries...
redash-master-postgres-1   | ERROR:  relation "queries" does not exist at character 979
redash-master-postgres-1   | STATEMENT:  SELECT queries.query AS queries_query, queries.updated_at AS queries_updated_at, queries.created_at AS queries_created_at, queries.id AS queries_id, queries.version AS queries_version, queries.org_id AS queries_org_id, queries.data_source_id AS queries_data_source_id, queries.latest_query_data_id AS queries_latest_query_data_id, queries.name AS queries_name, queries.description AS queries_description, queries.query_hash AS queries_query_hash, queries.api_key AS queries_api_key, queries.user_id AS queries_user_id, queries.last_modified_by_id AS queries_last_modified_by_id, queries.is_archived AS queries_is_archived, queries.is_draft AS queries_is_draft, queries.schedule AS queries_schedule, queries.schedule_failures AS queries_schedule_failures, queries.options AS queries_options, queries.search_vector AS queries_search_vector, queries.tags AS queries_tags, query_results_1.id AS query_results_1_id, query_results_1.retrieved_at AS query_results_1_retrieved_at
redash-master-postgres-1   |    FROM queries LEFT OUTER JOIN query_results AS query_results_1 ON query_results_1.id = queries.latest_query_data_id
redash-master-postgres-1   |    WHERE queries.schedule IS NOT NULL ORDER BY queries.id
redash-master-worker-1     | [2021-10-07 15:01:07,091][PID:27][ERROR][rq.worker] sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "queries" does not exist
redash-master-worker-1     | LINE 2: FROM queries LEFT OUTER JOIN query_results AS query_results_...
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     | [SQL: SELECT queries.query AS queries_query, queries.updated_at AS queries_updated_at, queries.created_at AS queries_created_at, queries.id AS queries_id, queries.version AS queries_version, queries.org_id AS queries_org_id, queries.data_source_id AS queries_data_source_id, queries.latest_query_data_id AS queries_latest_query_data_id, queries.name AS queries_name, queries.description AS queries_description, queries.query_hash AS queries_query_hash, queries.api_key AS queries_api_key, queries.user_id AS queries_user_id, queries.last_modified_by_id AS queries_last_modified_by_id, queries.is_archived AS queries_is_archived, queries.is_draft AS queries_is_draft, queries.schedule AS queries_schedule, queries.schedule_failures AS queries_schedule_failures, queries.options AS queries_options, queries.search_vector AS queries_search_vector, queries.tags AS queries_tags, query_results_1.id AS query_results_1_id, query_results_1.retrieved_at AS query_results_1_retrieved_at
redash-master-worker-1     | FROM queries LEFT OUTER JOIN query_results AS query_results_1 ON query_results_1.id = queries.latest_query_data_id
redash-master-worker-1     | WHERE queries.schedule IS NOT NULL ORDER BY queries.id]
redash-master-worker-1     | (Background on this error at: http://sqlalche.me/e/f405)
redash-master-worker-1     | Traceback (most recent call last):
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
redash-master-worker-1     |     cursor, statement, parameters, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 580, in do_execute
redash-master-worker-1     |     cursor.execute(statement, parameters)
redash-master-worker-1     | psycopg2.errors.UndefinedTable: relation "queries" does not exist
redash-master-worker-1     | LINE 2: FROM queries LEFT OUTER JOIN query_results AS query_results_...
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     |
redash-master-worker-1     | The above exception was the direct cause of the following exception:
redash-master-worker-1     |
redash-master-worker-1     | Traceback (most recent call last):
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/worker.py", line 934, in perform_job
redash-master-worker-1     |     rv = job.perform()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/job.py", line 686, in perform
redash-master-worker-1     |     self._result = self._execute()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/job.py", line 692, in _execute
redash-master-worker-1     |     return self.func(*self.args, **self.kwargs)
redash-master-worker-1     |   File "/app/redash/tasks/queries/maintenance.py", line 89, in refresh_queries
redash-master-worker-1     |     for query in models.Query.outdated_queries():
redash-master-worker-1     |   File "/app/redash/models/__init__.py", line 641, in outdated_queries
redash-master-worker-1     |     .order_by(Query.id)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3186, in all
redash-master-worker-1     |     return list(self)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3342, in __iter__
redash-master-worker-1     |     return self._execute_and_instances(context)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3367, in _execute_and_instances
redash-master-worker-1     |     result = conn.execute(querycontext.statement, self._params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 988, in execute
redash-master-worker-1     |     return meth(self, multiparams, params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/sql/elements.py", line 287, in _execute_on_connection
redash-master-worker-1     |     return connection._execute_clauseelement(self, multiparams, params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1107, in _execute_clauseelement
redash-master-worker-1     |     distilled_params,
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1253, in _execute_context
redash-master-worker-1     |     e, statement, parameters, cursor, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1473, in _handle_dbapi_exception
redash-master-worker-1     |     util.raise_from_cause(sqlalchemy_exception, exc_info)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 398, in raise_from_cause
redash-master-worker-1     |     reraise(type(exception), exception, tb=exc_tb, cause=cause)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 152, in reraise
redash-master-worker-1     |     raise value.with_traceback(tb)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
redash-master-worker-1     |     cursor, statement, parameters, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 580, in do_execute
redash-master-worker-1     |     cursor.execute(statement, parameters)
redash-master-worker-1     | sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "queries" does not exist
redash-master-worker-1     | LINE 2: FROM queries LEFT OUTER JOIN query_results AS query_results_...
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     | [SQL: SELECT queries.query AS queries_query, queries.updated_at AS queries_updated_at, queries.created_at AS queries_created_at, queries.id AS queries_id, queries.version AS queries_version, queries.org_id AS queries_org_id, queries.data_source_id AS queries_data_source_id, queries.latest_query_data_id AS queries_latest_query_data_id, queries.name AS queries_name, queries.description AS queries_description, queries.query_hash AS queries_query_hash, queries.api_key AS queries_api_key, queries.user_id AS queries_user_id, queries.last_modified_by_id AS queries_last_modified_by_id, queries.is_archived AS queries_is_archived, queries.is_draft AS queries_is_draft, queries.schedule AS queries_schedule, queries.schedule_failures AS queries_schedule_failures, queries.options AS queries_options, queries.search_vector AS queries_search_vector, queries.tags AS queries_tags, query_results_1.id AS query_results_1_id, query_results_1.retrieved_at AS query_results_1_retrieved_at
redash-master-worker-1     | FROM queries LEFT OUTER JOIN query_results AS query_results_1 ON query_results_1.id = queries.latest_query_data_id
redash-master-worker-1     | WHERE queries.schedule IS NOT NULL ORDER BY queries.id]
redash-master-worker-1     | (Background on this error at: http://sqlalche.me/e/f405)
redash-master-worker-1     | Traceback (most recent call last):
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
redash-master-worker-1     |     cursor, statement, parameters, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 580, in do_execute
redash-master-worker-1     |     cursor.execute(statement, parameters)
redash-master-worker-1     | psycopg2.errors.UndefinedTable: relation "queries" does not exist
redash-master-worker-1     | LINE 2: FROM queries LEFT OUTER JOIN query_results AS query_results_...
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     |
redash-master-worker-1     | The above exception was the direct cause of the following exception:
redash-master-worker-1     |
redash-master-worker-1     | Traceback (most recent call last):
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/worker.py", line 934, in perform_job
redash-master-worker-1     |     rv = job.perform()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/job.py", line 686, in perform
redash-master-worker-1     |     self._result = self._execute()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/job.py", line 692, in _execute
redash-master-worker-1     |     return self.func(*self.args, **self.kwargs)
redash-master-worker-1     |   File "/app/redash/tasks/queries/maintenance.py", line 89, in refresh_queries
redash-master-worker-1     |     for query in models.Query.outdated_queries():
redash-master-worker-1     |   File "/app/redash/models/__init__.py", line 641, in outdated_queries
redash-master-worker-1     |     .order_by(Query.id)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3186, in all
redash-master-worker-1     |     return list(self)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3342, in __iter__
redash-master-worker-1     |     return self._execute_and_instances(context)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3367, in _execute_and_instances
redash-master-worker-1     |     result = conn.execute(querycontext.statement, self._params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 988, in execute
redash-master-worker-1     |     return meth(self, multiparams, params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/sql/elements.py", line 287, in _execute_on_connection
redash-master-worker-1     |     return connection._execute_clauseelement(self, multiparams, params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1107, in _execute_clauseelement
redash-master-worker-1     |     distilled_params,
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1253, in _execute_context
redash-master-worker-1     |     e, statement, parameters, cursor, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1473, in _handle_dbapi_exception
redash-master-worker-1     |     util.raise_from_cause(sqlalchemy_exception, exc_info)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 398, in raise_from_cause
redash-master-worker-1     |     reraise(type(exception), exception, tb=exc_tb, cause=cause)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 152, in reraise
redash-master-worker-1     |     raise value.with_traceback(tb)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
redash-master-worker-1     |     cursor, statement, parameters, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 580, in do_execute
redash-master-worker-1     |     cursor.execute(statement, parameters)
redash-master-worker-1     | sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "queries" does not exist
redash-master-worker-1     | LINE 2: FROM queries LEFT OUTER JOIN query_results AS query_results_...
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     | [SQL: SELECT queries.query AS queries_query, queries.updated_at AS queries_updated_at, queries.created_at AS queries_created_at, queries.id AS queries_id, queries.version AS queries_version, queries.org_id AS queries_org_id, queries.data_source_id AS queries_data_source_id, queries.latest_query_data_id AS queries_latest_query_data_id, queries.name AS queries_name, queries.description AS queries_description, queries.query_hash AS queries_query_hash, queries.api_key AS queries_api_key, queries.user_id AS queries_user_id, queries.last_modified_by_id AS queries_last_modified_by_id, queries.is_archived AS queries_is_archived, queries.is_draft AS queries_is_draft, queries.schedule AS queries_schedule, queries.schedule_failures AS queries_schedule_failures, queries.options AS queries_options, queries.search_vector AS queries_search_vector, queries.tags AS queries_tags, query_results_1.id AS query_results_1_id, query_results_1.retrieved_at AS query_results_1_retrieved_at
redash-master-worker-1     | FROM queries LEFT OUTER JOIN query_results AS query_results_1 ON query_results_1.id = queries.latest_query_data_id
redash-master-worker-1     | WHERE queries.schedule IS NOT NULL ORDER BY queries.id]
redash-master-worker-1     | (Background on this error at: http://sqlalche.me/e/f405)
redash-master-worker-1     | [2021-10-07 15:01:07,129][PID:8][INFO][rq.worker] periodic: 59a84668e68687338646f735965213c58e814b32
redash-master-worker-1     | [2021-10-07 15:01:07,159][PID:28][INFO][rq.job.redash.tasks.queries.maintenance] job.func_name=redash.tasks.queries.maintenance.remove_ghost_locks job.id=59a84668e68687338646f735965213c58e814b32 Locks found: 0, Locks removed: 0
redash-master-worker-1     | [2021-10-07 15:01:07,164][PID:28][INFO][rq.worker] periodic: Job OK (59a84668e68687338646f735965213c58e814b32)
redash-master-worker-1     | [2021-10-07 15:01:07,165][PID:28][INFO][rq.worker] Result is kept for 600 seconds
redash-master-worker-1     | [2021-10-07 15:01:37,002][PID:8][INFO][rq.worker] periodic: 305c0cae0a196ae96915fd2b6f81001c435aad65
redash-master-worker-1     | [2021-10-07 15:01:37,030][PID:29][INFO][rq.job.redash.tasks.queries.maintenance] job.func_name=redash.tasks.queries.maintenance.refresh_queries job.id=305c0cae0a196ae96915fd2b6f81001c435aad65 Refreshing queries...
redash-master-postgres-1   | ERROR:  relation "queries" does not exist at character 979
redash-master-postgres-1   | STATEMENT:  SELECT queries.query AS queries_query, queries.updated_at AS queries_updated_at, queries.created_at AS queries_created_at, queries.id AS queries_id, queries.version AS queries_version, queries.org_id AS queries_org_id, queries.data_source_id AS queries_data_source_id, queries.latest_query_data_id AS queries_latest_query_data_id, queries.name AS queries_name, queries.description AS queries_description, queries.query_hash AS queries_query_hash, queries.api_key AS queries_api_key, queries.user_id AS queries_user_id, queries.last_modified_by_id AS queries_last_modified_by_id, queries.is_archived AS queries_is_archived, queries.is_draft AS queries_is_draft, queries.schedule AS queries_schedule, queries.schedule_failures AS queries_schedule_failures, queries.options AS queries_options, queries.search_vector AS queries_search_vector, queries.tags AS queries_tags, query_results_1.id AS query_results_1_id, query_results_1.retrieved_at AS query_results_1_retrieved_at
redash-master-postgres-1   |    FROM queries LEFT OUTER JOIN query_results AS query_results_1 ON query_results_1.id = queries.latest_query_data_id
redash-master-postgres-1   |    WHERE queries.schedule IS NOT NULL ORDER BY queries.id
redash-master-worker-1     | [2021-10-07 15:01:37,111][PID:29][ERROR][rq.worker] sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "queries" does not exist
redash-master-worker-1     | LINE 2: FROM queries LEFT OUTER JOIN query_results AS query_results_...
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     | [SQL: SELECT queries.query AS queries_query, queries.updated_at AS queries_updated_at, queries.created_at AS queries_created_at, queries.id AS queries_id, queries.version AS queries_version, queries.org_id AS queries_org_id, queries.data_source_id AS queries_data_source_id, queries.latest_query_data_id AS queries_latest_query_data_id, queries.name AS queries_name, queries.description AS queries_description, queries.query_hash AS queries_query_hash, queries.api_key AS queries_api_key, queries.user_id AS queries_user_id, queries.last_modified_by_id AS queries_last_modified_by_id, queries.is_archived AS queries_is_archived, queries.is_draft AS queries_is_draft, queries.schedule AS queries_schedule, queries.schedule_failures AS queries_schedule_failures, queries.options AS queries_options, queries.search_vector AS queries_search_vector, queries.tags AS queries_tags, query_results_1.id AS query_results_1_id, query_results_1.retrieved_at AS query_results_1_retrieved_at
redash-master-worker-1     | FROM queries LEFT OUTER JOIN query_results AS query_results_1 ON query_results_1.id = queries.latest_query_data_id
redash-master-worker-1     | WHERE queries.schedule IS NOT NULL ORDER BY queries.id]
redash-master-worker-1     | (Background on this error at: http://sqlalche.me/e/f405)
redash-master-worker-1     | Traceback (most recent call last):
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
redash-master-worker-1     |     cursor, statement, parameters, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 580, in do_execute
redash-master-worker-1     |     cursor.execute(statement, parameters)
redash-master-worker-1     | psycopg2.errors.UndefinedTable: relation "queries" does not exist
redash-master-worker-1     | LINE 2: FROM queries LEFT OUTER JOIN query_results AS query_results_...
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     |
redash-master-worker-1     | The above exception was the direct cause of the following exception:
redash-master-worker-1     |
redash-master-worker-1     | Traceback (most recent call last):
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/worker.py", line 934, in perform_job
redash-master-worker-1     |     rv = job.perform()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/job.py", line 686, in perform
redash-master-worker-1     |     self._result = self._execute()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/job.py", line 692, in _execute
redash-master-worker-1     |     return self.func(*self.args, **self.kwargs)
redash-master-worker-1     |   File "/app/redash/tasks/queries/maintenance.py", line 89, in refresh_queries
redash-master-worker-1     |     for query in models.Query.outdated_queries():
redash-master-worker-1     |   File "/app/redash/models/__init__.py", line 641, in outdated_queries
redash-master-worker-1     |     .order_by(Query.id)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3186, in all
redash-master-worker-1     |     return list(self)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3342, in __iter__
redash-master-worker-1     |     return self._execute_and_instances(context)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3367, in _execute_and_instances
redash-master-worker-1     |     result = conn.execute(querycontext.statement, self._params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 988, in execute
redash-master-worker-1     |     return meth(self, multiparams, params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/sql/elements.py", line 287, in _execute_on_connection
redash-master-worker-1     |     return connection._execute_clauseelement(self, multiparams, params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1107, in _execute_clauseelement
redash-master-worker-1     |     distilled_params,
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1253, in _execute_context
redash-master-worker-1     |     e, statement, parameters, cursor, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1473, in _handle_dbapi_exception
redash-master-worker-1     |     util.raise_from_cause(sqlalchemy_exception, exc_info)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 398, in raise_from_cause
redash-master-worker-1     |     reraise(type(exception), exception, tb=exc_tb, cause=cause)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 152, in reraise
redash-master-worker-1     |     raise value.with_traceback(tb)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
redash-master-worker-1     |     cursor, statement, parameters, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 580, in do_execute
redash-master-worker-1     |     cursor.execute(statement, parameters)
redash-master-worker-1     | sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "queries" does not exist
redash-master-worker-1     | LINE 2: FROM queries LEFT OUTER JOIN query_results AS query_results_...
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     | [SQL: SELECT queries.query AS queries_query, queries.updated_at AS queries_updated_at, queries.created_at AS queries_created_at, queries.id AS queries_id, queries.version AS queries_version, queries.org_id AS queries_org_id, queries.data_source_id AS queries_data_source_id, queries.latest_query_data_id AS queries_latest_query_data_id, queries.name AS queries_name, queries.description AS queries_description, queries.query_hash AS queries_query_hash, queries.api_key AS queries_api_key, queries.user_id AS queries_user_id, queries.last_modified_by_id AS queries_last_modified_by_id, queries.is_archived AS queries_is_archived, queries.is_draft AS queries_is_draft, queries.schedule AS queries_schedule, queries.schedule_failures AS queries_schedule_failures, queries.options AS queries_options, queries.search_vector AS queries_search_vector, queries.tags AS queries_tags, query_results_1.id AS query_results_1_id, query_results_1.retrieved_at AS query_results_1_retrieved_at
redash-master-worker-1     | FROM queries LEFT OUTER JOIN query_results AS query_results_1 ON query_results_1.id = queries.latest_query_data_id
redash-master-worker-1     | WHERE queries.schedule IS NOT NULL ORDER BY queries.id]
redash-master-worker-1     | (Background on this error at: http://sqlalche.me/e/f405)
redash-master-worker-1     | Traceback (most recent call last):
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
redash-master-worker-1     |     cursor, statement, parameters, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 580, in do_execute
redash-master-worker-1     |     cursor.execute(statement, parameters)
redash-master-worker-1     | psycopg2.errors.UndefinedTable: relation "queries" does not exist
redash-master-worker-1     | LINE 2: FROM queries LEFT OUTER JOIN query_results AS query_results_...
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     |
redash-master-worker-1     | The above exception was the direct cause of the following exception:
redash-master-worker-1     |
redash-master-worker-1     | Traceback (most recent call last):
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/worker.py", line 934, in perform_job
redash-master-worker-1     |     rv = job.perform()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/job.py", line 686, in perform
redash-master-worker-1     |     self._result = self._execute()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/job.py", line 692, in _execute
redash-master-worker-1     |     return self.func(*self.args, **self.kwargs)
redash-master-worker-1     |   File "/app/redash/tasks/queries/maintenance.py", line 89, in refresh_queries
redash-master-worker-1     |     for query in models.Query.outdated_queries():
redash-master-worker-1     |   File "/app/redash/models/__init__.py", line 641, in outdated_queries
redash-master-worker-1     |     .order_by(Query.id)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3186, in all
redash-master-worker-1     |     return list(self)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3342, in __iter__
redash-master-worker-1     |     return self._execute_and_instances(context)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3367, in _execute_and_instances
redash-master-worker-1     |     result = conn.execute(querycontext.statement, self._params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 988, in execute
redash-master-worker-1     |     return meth(self, multiparams, params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/sql/elements.py", line 287, in _execute_on_connection
redash-master-worker-1     |     return connection._execute_clauseelement(self, multiparams, params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1107, in _execute_clauseelement
redash-master-worker-1     |     distilled_params,
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1253, in _execute_context
redash-master-worker-1     |     e, statement, parameters, cursor, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1473, in _handle_dbapi_exception
redash-master-worker-1     |     util.raise_from_cause(sqlalchemy_exception, exc_info)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 398, in raise_from_cause
redash-master-worker-1     |     reraise(type(exception), exception, tb=exc_tb, cause=cause)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 152, in reraise
redash-master-worker-1     |     raise value.with_traceback(tb)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
redash-master-worker-1     |     cursor, statement, parameters, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 580, in do_execute
redash-master-worker-1     |     cursor.execute(statement, parameters)
redash-master-worker-1     | sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "queries" does not exist
redash-master-worker-1     | LINE 2: FROM queries LEFT OUTER JOIN query_results AS query_results_...
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     | [SQL: SELECT queries.query AS queries_query, queries.updated_at AS queries_updated_at, queries.created_at AS queries_created_at, queries.id AS queries_id, queries.version AS queries_version, queries.org_id AS queries_org_id, queries.data_source_id AS queries_data_source_id, queries.latest_query_data_id AS queries_latest_query_data_id, queries.name AS queries_name, queries.description AS queries_description, queries.query_hash AS queries_query_hash, queries.api_key AS queries_api_key, queries.user_id AS queries_user_id, queries.last_modified_by_id AS queries_last_modified_by_id, queries.is_archived AS queries_is_archived, queries.is_draft AS queries_is_draft, queries.schedule AS queries_schedule, queries.schedule_failures AS queries_schedule_failures, queries.options AS queries_options, queries.search_vector AS queries_search_vector, queries.tags AS queries_tags, query_results_1.id AS query_results_1_id, query_results_1.retrieved_at AS query_results_1_retrieved_at
redash-master-worker-1     | FROM queries LEFT OUTER JOIN query_results AS query_results_1 ON query_results_1.id = queries.latest_query_data_id
redash-master-worker-1     | WHERE queries.schedule IS NOT NULL ORDER BY queries.id]
redash-master-worker-1     | (Background on this error at: http://sqlalche.me/e/f405)
redash-master-worker-1     | [2021-10-07 15:02:07,009][PID:8][INFO][rq.worker] periodic: 18281a865ed3d1a60f366aeb8596fe2283aa421f
redash-master-worker-1     | [2021-10-07 15:02:07,039][PID:30][INFO][rq.worker] periodic: Job OK (18281a865ed3d1a60f366aeb8596fe2283aa421f)
redash-master-worker-1     | [2021-10-07 15:02:07,039][PID:30][INFO][rq.worker] Result is kept for 600 seconds
redash-master-worker-1     | [2021-10-07 15:02:07,062][PID:8][INFO][rq.worker] periodic: 59a84668e68687338646f735965213c58e814b32
redash-master-worker-1     | [2021-10-07 15:02:07,086][PID:31][INFO][rq.job.redash.tasks.queries.maintenance] job.func_name=redash.tasks.queries.maintenance.remove_ghost_locks job.id=59a84668e68687338646f735965213c58e814b32 Locks found: 0, Locks removed: 0
redash-master-worker-1     | [2021-10-07 15:02:07,089][PID:31][INFO][rq.worker] periodic: Job OK (59a84668e68687338646f735965213c58e814b32)
redash-master-worker-1     | [2021-10-07 15:02:07,090][PID:31][INFO][rq.worker] Result is kept for 600 seconds
redash-master-worker-1     | [2021-10-07 15:02:07,118][PID:8][INFO][rq.worker] periodic: 305c0cae0a196ae96915fd2b6f81001c435aad65
redash-master-worker-1     | [2021-10-07 15:02:07,144][PID:32][INFO][rq.job.redash.tasks.queries.maintenance] job.func_name=redash.tasks.queries.maintenance.refresh_queries job.id=305c0cae0a196ae96915fd2b6f81001c435aad65 Refreshing queries...
redash-master-postgres-1   | ERROR:  relation "queries" does not exist at character 979
redash-master-postgres-1   | STATEMENT:  SELECT queries.query AS queries_query, queries.updated_at AS queries_updated_at, queries.created_at AS queries_created_at, queries.id AS queries_id, queries.version AS queries_version, queries.org_id AS queries_org_id, queries.data_source_id AS queries_data_source_id, queries.latest_query_data_id AS queries_latest_query_data_id, queries.name AS queries_name, queries.description AS queries_description, queries.query_hash AS queries_query_hash, queries.api_key AS queries_api_key, queries.user_id AS queries_user_id, queries.last_modified_by_id AS queries_last_modified_by_id, queries.is_archived AS queries_is_archived, queries.is_draft AS queries_is_draft, queries.schedule AS queries_schedule, queries.schedule_failures AS queries_schedule_failures, queries.options AS queries_options, queries.search_vector AS queries_search_vector, queries.tags AS queries_tags, query_results_1.id AS query_results_1_id, query_results_1.retrieved_at AS query_results_1_retrieved_at
redash-master-postgres-1   |    FROM queries LEFT OUTER JOIN query_results AS query_results_1 ON query_results_1.id = queries.latest_query_data_id
redash-master-postgres-1   |    WHERE queries.schedule IS NOT NULL ORDER BY queries.id
redash-master-worker-1     | [2021-10-07 15:02:07,200][PID:32][ERROR][rq.worker] sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "queries" does not exist
redash-master-worker-1     | LINE 2: FROM queries LEFT OUTER JOIN query_results AS query_results_...
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     | [SQL: SELECT queries.query AS queries_query, queries.updated_at AS queries_updated_at, queries.created_at AS queries_created_at, queries.id AS queries_id, queries.version AS queries_version, queries.org_id AS queries_org_id, queries.data_source_id AS queries_data_source_id, queries.latest_query_data_id AS queries_latest_query_data_id, queries.name AS queries_name, queries.description AS queries_description, queries.query_hash AS queries_query_hash, queries.api_key AS queries_api_key, queries.user_id AS queries_user_id, queries.last_modified_by_id AS queries_last_modified_by_id, queries.is_archived AS queries_is_archived, queries.is_draft AS queries_is_draft, queries.schedule AS queries_schedule, queries.schedule_failures AS queries_schedule_failures, queries.options AS queries_options, queries.search_vector AS queries_search_vector, queries.tags AS queries_tags, query_results_1.id AS query_results_1_id, query_results_1.retrieved_at AS query_results_1_retrieved_at
redash-master-worker-1     | FROM queries LEFT OUTER JOIN query_results AS query_results_1 ON query_results_1.id = queries.latest_query_data_id
redash-master-worker-1     | WHERE queries.schedule IS NOT NULL ORDER BY queries.id]
redash-master-worker-1     | (Background on this error at: http://sqlalche.me/e/f405)
redash-master-worker-1     | Traceback (most recent call last):
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
redash-master-worker-1     |     cursor, statement, parameters, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 580, in do_execute
redash-master-worker-1     |     cursor.execute(statement, parameters)
redash-master-worker-1     | psycopg2.errors.UndefinedTable: relation "queries" does not exist
redash-master-worker-1     | LINE 2: FROM queries LEFT OUTER JOIN query_results AS query_results_...
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     |
redash-master-worker-1     | The above exception was the direct cause of the following exception:
redash-master-worker-1     |
redash-master-worker-1     | Traceback (most recent call last):
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/worker.py", line 934, in perform_job
redash-master-worker-1     |     rv = job.perform()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/job.py", line 686, in perform
redash-master-worker-1     |     self._result = self._execute()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/job.py", line 692, in _execute
redash-master-worker-1     |     return self.func(*self.args, **self.kwargs)
redash-master-worker-1     |   File "/app/redash/tasks/queries/maintenance.py", line 89, in refresh_queries
redash-master-worker-1     |     for query in models.Query.outdated_queries():
redash-master-worker-1     |   File "/app/redash/models/__init__.py", line 641, in outdated_queries
redash-master-worker-1     |     .order_by(Query.id)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3186, in all
redash-master-worker-1     |     return list(self)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3342, in __iter__
redash-master-worker-1     |     return self._execute_and_instances(context)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3367, in _execute_and_instances
redash-master-worker-1     |     result = conn.execute(querycontext.statement, self._params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 988, in execute
redash-master-worker-1     |     return meth(self, multiparams, params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/sql/elements.py", line 287, in _execute_on_connection
redash-master-worker-1     |     return connection._execute_clauseelement(self, multiparams, params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1107, in _execute_clauseelement
redash-master-worker-1     |     distilled_params,
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1253, in _execute_context
redash-master-worker-1     |     e, statement, parameters, cursor, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1473, in _handle_dbapi_exception
redash-master-worker-1     |     util.raise_from_cause(sqlalchemy_exception, exc_info)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 398, in raise_from_cause
redash-master-worker-1     |     reraise(type(exception), exception, tb=exc_tb, cause=cause)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 152, in reraise
redash-master-worker-1     |     raise value.with_traceback(tb)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
redash-master-worker-1     |     cursor, statement, parameters, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 580, in do_execute
redash-master-worker-1     |     cursor.execute(statement, parameters)
redash-master-worker-1     | sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "queries" does not exist
redash-master-worker-1     | LINE 2: FROM queries LEFT OUTER JOIN query_results AS query_results_...
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     | [SQL: SELECT queries.query AS queries_query, queries.updated_at AS queries_updated_at, queries.created_at AS queries_created_at, queries.id AS queries_id, queries.version AS queries_version, queries.org_id AS queries_org_id, queries.data_source_id AS queries_data_source_id, queries.latest_query_data_id AS queries_latest_query_data_id, queries.name AS queries_name, queries.description AS queries_description, queries.query_hash AS queries_query_hash, queries.api_key AS queries_api_key, queries.user_id AS queries_user_id, queries.last_modified_by_id AS queries_last_modified_by_id, queries.is_archived AS queries_is_archived, queries.is_draft AS queries_is_draft, queries.schedule AS queries_schedule, queries.schedule_failures AS queries_schedule_failures, queries.options AS queries_options, queries.search_vector AS queries_search_vector, queries.tags AS queries_tags, query_results_1.id AS query_results_1_id, query_results_1.retrieved_at AS query_results_1_retrieved_at
redash-master-worker-1     | FROM queries LEFT OUTER JOIN query_results AS query_results_1 ON query_results_1.id = queries.latest_query_data_id
redash-master-worker-1     | WHERE queries.schedule IS NOT NULL ORDER BY queries.id]
redash-master-worker-1     | (Background on this error at: http://sqlalche.me/e/f405)
redash-master-worker-1     | Traceback (most recent call last):
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
redash-master-worker-1     |     cursor, statement, parameters, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 580, in do_execute
redash-master-worker-1     |     cursor.execute(statement, parameters)
redash-master-worker-1     | psycopg2.errors.UndefinedTable: relation "queries" does not exist
redash-master-worker-1     | LINE 2: FROM queries LEFT OUTER JOIN query_results AS query_results_...
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     |
redash-master-worker-1     | The above exception was the direct cause of the following exception:
redash-master-worker-1     |
redash-master-worker-1     | Traceback (most recent call last):
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/worker.py", line 934, in perform_job
redash-master-worker-1     |     rv = job.perform()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/job.py", line 686, in perform
redash-master-worker-1     |     self._result = self._execute()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/job.py", line 692, in _execute
redash-master-worker-1     |     return self.func(*self.args, **self.kwargs)
redash-master-worker-1     |   File "/app/redash/tasks/queries/maintenance.py", line 89, in refresh_queries
redash-master-worker-1     |     for query in models.Query.outdated_queries():
redash-master-worker-1     |   File "/app/redash/models/__init__.py", line 641, in outdated_queries
redash-master-worker-1     |     .order_by(Query.id)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3186, in all
redash-master-worker-1     |     return list(self)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3342, in __iter__
redash-master-worker-1     |     return self._execute_and_instances(context)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3367, in _execute_and_instances
redash-master-worker-1     |     result = conn.execute(querycontext.statement, self._params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 988, in execute
redash-master-worker-1     |     return meth(self, multiparams, params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/sql/elements.py", line 287, in _execute_on_connection
redash-master-worker-1     |     return connection._execute_clauseelement(self, multiparams, params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1107, in _execute_clauseelement
redash-master-worker-1     |     distilled_params,
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1253, in _execute_context
redash-master-worker-1     |     e, statement, parameters, cursor, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1473, in _handle_dbapi_exception
redash-master-worker-1     |     util.raise_from_cause(sqlalchemy_exception, exc_info)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 398, in raise_from_cause
redash-master-worker-1     |     reraise(type(exception), exception, tb=exc_tb, cause=cause)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 152, in reraise
redash-master-worker-1     |     raise value.with_traceback(tb)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
redash-master-worker-1     |     cursor, statement, parameters, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 580, in do_execute
redash-master-worker-1     |     cursor.execute(statement, parameters)
redash-master-worker-1     | sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "queries" does not exist
redash-master-worker-1     | LINE 2: FROM queries LEFT OUTER JOIN query_results AS query_results_...
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     | [SQL: SELECT queries.query AS queries_query, queries.updated_at AS queries_updated_at, queries.created_at AS queries_created_at, queries.id AS queries_id, queries.version AS queries_version, queries.org_id AS queries_org_id, queries.data_source_id AS queries_data_source_id, queries.latest_query_data_id AS queries_latest_query_data_id, queries.name AS queries_name, queries.description AS queries_description, queries.query_hash AS queries_query_hash, queries.api_key AS queries_api_key, queries.user_id AS queries_user_id, queries.last_modified_by_id AS queries_last_modified_by_id, queries.is_archived AS queries_is_archived, queries.is_draft AS queries_is_draft, queries.schedule AS queries_schedule, queries.schedule_failures AS queries_schedule_failures, queries.options AS queries_options, queries.search_vector AS queries_search_vector, queries.tags AS queries_tags, query_results_1.id AS query_results_1_id, query_results_1.retrieved_at AS query_results_1_retrieved_at
redash-master-worker-1     | FROM queries LEFT OUTER JOIN query_results AS query_results_1 ON query_results_1.id = queries.latest_query_data_id
redash-master-worker-1     | WHERE queries.schedule IS NOT NULL ORDER BY queries.id]
redash-master-worker-1     | (Background on this error at: http://sqlalche.me/e/f405)
redash-master-worker-1     | [2021-10-07 15:02:37,040][PID:8][INFO][rq.worker] periodic: 305c0cae0a196ae96915fd2b6f81001c435aad65
redash-master-worker-1     | [2021-10-07 15:02:37,053][PID:33][INFO][rq.job.redash.tasks.queries.maintenance] job.func_name=redash.tasks.queries.maintenance.refresh_queries job.id=305c0cae0a196ae96915fd2b6f81001c435aad65 Refreshing queries...
redash-master-postgres-1   | ERROR:  relation "queries" does not exist at character 979
redash-master-worker-1     | [2021-10-07 15:02:37,097][PID:33][ERROR][rq.worker] sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "queries" does not exist
redash-master-postgres-1   | STATEMENT:  SELECT queries.query AS queries_query, queries.updated_at AS queries_updated_at, queries.created_at AS queries_created_at, queries.id AS queries_id, queries.version AS queries_version, queries.org_id AS queries_org_id, queries.data_source_id AS queries_data_source_id, queries.latest_query_data_id AS queries_latest_query_data_id, queries.name AS queries_name, queries.description AS queries_description, queries.query_hash AS queries_query_hash, queries.api_key AS queries_api_key, queries.user_id AS queries_user_id, queries.last_modified_by_id AS queries_last_modified_by_id, queries.is_archived AS queries_is_archived, queries.is_draft AS queries_is_draft, queries.schedule AS queries_schedule, queries.schedule_failures AS queries_schedule_failures, queries.options AS queries_options, queries.search_vector AS queries_search_vector, queries.tags AS queries_tags, query_results_1.id AS query_results_1_id, query_results_1.retrieved_at AS query_results_1_retrieved_at
redash-master-worker-1     | LINE 2: FROM queries LEFT OUTER JOIN query_results AS query_results_...
redash-master-postgres-1   |    FROM queries LEFT OUTER JOIN query_results AS query_results_1 ON query_results_1.id = queries.latest_query_data_id
redash-master-worker-1     |              ^
redash-master-postgres-1   |    WHERE queries.schedule IS NOT NULL ORDER BY queries.id
redash-master-worker-1     |
redash-master-worker-1     | [SQL: SELECT queries.query AS queries_query, queries.updated_at AS queries_updated_at, queries.created_at AS queries_created_at, queries.id AS queries_id, queries.version AS queries_version, queries.org_id AS queries_org_id, queries.data_source_id AS queries_data_source_id, queries.latest_query_data_id AS queries_latest_query_data_id, queries.name AS queries_name, queries.description AS queries_description, queries.query_hash AS queries_query_hash, queries.api_key AS queries_api_key, queries.user_id AS queries_user_id, queries.last_modified_by_id AS queries_last_modified_by_id, queries.is_archived AS queries_is_archived, queries.is_draft AS queries_is_draft, queries.schedule AS queries_schedule, queries.schedule_failures AS queries_schedule_failures, queries.options AS queries_options, queries.search_vector AS queries_search_vector, queries.tags AS queries_tags, query_results_1.id AS query_results_1_id, query_results_1.retrieved_at AS query_results_1_retrieved_at
redash-master-worker-1     | FROM queries LEFT OUTER JOIN query_results AS query_results_1 ON query_results_1.id = queries.latest_query_data_id
redash-master-worker-1     | WHERE queries.schedule IS NOT NULL ORDER BY queries.id]
redash-master-worker-1     | (Background on this error at: http://sqlalche.me/e/f405)
redash-master-worker-1     | Traceback (most recent call last):
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
redash-master-worker-1     |     cursor, statement, parameters, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 580, in do_execute
redash-master-worker-1     |     cursor.execute(statement, parameters)
redash-master-worker-1     | psycopg2.errors.UndefinedTable: relation "queries" does not exist
redash-master-worker-1     | LINE 2: FROM queries LEFT OUTER JOIN query_results AS query_results_...
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     |
redash-master-worker-1     | The above exception was the direct cause of the following exception:
redash-master-worker-1     |
redash-master-worker-1     | Traceback (most recent call last):
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/worker.py", line 934, in perform_job
redash-master-worker-1     |     rv = job.perform()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/job.py", line 686, in perform
redash-master-worker-1     |     self._result = self._execute()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/job.py", line 692, in _execute
redash-master-worker-1     |     return self.func(*self.args, **self.kwargs)
redash-master-worker-1     |   File "/app/redash/tasks/queries/maintenance.py", line 89, in refresh_queries
redash-master-worker-1     |     for query in models.Query.outdated_queries():
redash-master-worker-1     |   File "/app/redash/models/__init__.py", line 641, in outdated_queries
redash-master-worker-1     |     .order_by(Query.id)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3186, in all
redash-master-worker-1     |     return list(self)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3342, in __iter__
redash-master-worker-1     |     return self._execute_and_instances(context)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3367, in _execute_and_instances
redash-master-worker-1     |     result = conn.execute(querycontext.statement, self._params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 988, in execute
redash-master-worker-1     |     return meth(self, multiparams, params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/sql/elements.py", line 287, in _execute_on_connection
redash-master-worker-1     |     return connection._execute_clauseelement(self, multiparams, params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1107, in _execute_clauseelement
redash-master-worker-1     |     distilled_params,
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1253, in _execute_context
redash-master-worker-1     |     e, statement, parameters, cursor, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1473, in _handle_dbapi_exception
redash-master-worker-1     |     util.raise_from_cause(sqlalchemy_exception, exc_info)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 398, in raise_from_cause
redash-master-worker-1     |     reraise(type(exception), exception, tb=exc_tb, cause=cause)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 152, in reraise
redash-master-worker-1     |     raise value.with_traceback(tb)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
redash-master-worker-1     |     cursor, statement, parameters, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 580, in do_execute
redash-master-worker-1     |     cursor.execute(statement, parameters)
redash-master-worker-1     | sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "queries" does not exist
redash-master-worker-1     | LINE 2: FROM queries LEFT OUTER JOIN query_results AS query_results_...
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     | [SQL: SELECT queries.query AS queries_query, queries.updated_at AS queries_updated_at, queries.created_at AS queries_created_at, queries.id AS queries_id, queries.version AS queries_version, queries.org_id AS queries_org_id, queries.data_source_id AS queries_data_source_id, queries.latest_query_data_id AS queries_latest_query_data_id, queries.name AS queries_name, queries.description AS queries_description, queries.query_hash AS queries_query_hash, queries.api_key AS queries_api_key, queries.user_id AS queries_user_id, queries.last_modified_by_id AS queries_last_modified_by_id, queries.is_archived AS queries_is_archived, queries.is_draft AS queries_is_draft, queries.schedule AS queries_schedule, queries.schedule_failures AS queries_schedule_failures, queries.options AS queries_options, queries.search_vector AS queries_search_vector, queries.tags AS queries_tags, query_results_1.id AS query_results_1_id, query_results_1.retrieved_at AS query_results_1_retrieved_at
redash-master-worker-1     | FROM queries LEFT OUTER JOIN query_results AS query_results_1 ON query_results_1.id = queries.latest_query_data_id
redash-master-worker-1     | WHERE queries.schedule IS NOT NULL ORDER BY queries.id]
redash-master-worker-1     | (Background on this error at: http://sqlalche.me/e/f405)
redash-master-worker-1     | Traceback (most recent call last):
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
redash-master-worker-1     |     cursor, statement, parameters, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 580, in do_execute
redash-master-worker-1     |     cursor.execute(statement, parameters)
redash-master-worker-1     | psycopg2.errors.UndefinedTable: relation "queries" does not exist
redash-master-worker-1     | LINE 2: FROM queries LEFT OUTER JOIN query_results AS query_results_...
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     |
redash-master-worker-1     | The above exception was the direct cause of the following exception:
redash-master-worker-1     |
redash-master-worker-1     | Traceback (most recent call last):
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/worker.py", line 934, in perform_job
redash-master-worker-1     |     rv = job.perform()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/job.py", line 686, in perform
redash-master-worker-1     |     self._result = self._execute()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/job.py", line 692, in _execute
redash-master-worker-1     |     return self.func(*self.args, **self.kwargs)
redash-master-worker-1     |   File "/app/redash/tasks/queries/maintenance.py", line 89, in refresh_queries
redash-master-worker-1     |     for query in models.Query.outdated_queries():
redash-master-worker-1     |   File "/app/redash/models/__init__.py", line 641, in outdated_queries
redash-master-worker-1     |     .order_by(Query.id)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3186, in all
redash-master-worker-1     |     return list(self)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3342, in __iter__
redash-master-worker-1     |     return self._execute_and_instances(context)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3367, in _execute_and_instances
redash-master-worker-1     |     result = conn.execute(querycontext.statement, self._params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 988, in execute
redash-master-worker-1     |     return meth(self, multiparams, params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/sql/elements.py", line 287, in _execute_on_connection
redash-master-worker-1     |     return connection._execute_clauseelement(self, multiparams, params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1107, in _execute_clauseelement
redash-master-worker-1     |     distilled_params,
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1253, in _execute_context
redash-master-worker-1     |     e, statement, parameters, cursor, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1473, in _handle_dbapi_exception
redash-master-worker-1     |     util.raise_from_cause(sqlalchemy_exception, exc_info)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 398, in raise_from_cause
redash-master-worker-1     |     reraise(type(exception), exception, tb=exc_tb, cause=cause)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 152, in reraise
redash-master-worker-1     |     raise value.with_traceback(tb)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
redash-master-worker-1     |     cursor, statement, parameters, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 580, in do_execute
redash-master-worker-1     |     cursor.execute(statement, parameters)
redash-master-worker-1     | sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "queries" does not exist
redash-master-worker-1     | LINE 2: FROM queries LEFT OUTER JOIN query_results AS query_results_...
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     | [SQL: SELECT queries.query AS queries_query, queries.updated_at AS queries_updated_at, queries.created_at AS queries_created_at, queries.id AS queries_id, queries.version AS queries_version, queries.org_id AS queries_org_id, queries.data_source_id AS queries_data_source_id, queries.latest_query_data_id AS queries_latest_query_data_id, queries.name AS queries_name, queries.description AS queries_description, queries.query_hash AS queries_query_hash, queries.api_key AS queries_api_key, queries.user_id AS queries_user_id, queries.last_modified_by_id AS queries_last_modified_by_id, queries.is_archived AS queries_is_archived, queries.is_draft AS queries_is_draft, queries.schedule AS queries_schedule, queries.schedule_failures AS queries_schedule_failures, queries.options AS queries_options, queries.search_vector AS queries_search_vector, queries.tags AS queries_tags, query_results_1.id AS query_results_1_id, query_results_1.retrieved_at AS query_results_1_retrieved_at
redash-master-worker-1     | FROM queries LEFT OUTER JOIN query_results AS query_results_1 ON query_results_1.id = queries.latest_query_data_id
redash-master-worker-1     | WHERE queries.schedule IS NOT NULL ORDER BY queries.id]
redash-master-worker-1     | (Background on this error at: http://sqlalche.me/e/f405)
redash-master-worker-1     | [2021-10-07 15:03:07,063][PID:8][INFO][rq.worker] periodic: 18281a865ed3d1a60f366aeb8596fe2283aa421f
redash-master-worker-1     | [2021-10-07 15:03:07,089][PID:34][INFO][rq.worker] periodic: Job OK (18281a865ed3d1a60f366aeb8596fe2283aa421f)
redash-master-worker-1     | [2021-10-07 15:03:07,089][PID:34][INFO][rq.worker] Result is kept for 600 seconds
redash-master-worker-1     | [2021-10-07 15:03:07,109][PID:8][INFO][rq.worker] periodic: 305c0cae0a196ae96915fd2b6f81001c435aad65
redash-master-worker-1     | [2021-10-07 15:03:07,125][PID:35][INFO][rq.job.redash.tasks.queries.maintenance] job.func_name=redash.tasks.queries.maintenance.refresh_queries job.id=305c0cae0a196ae96915fd2b6f81001c435aad65 Refreshing queries...
redash-master-postgres-1   | ERROR:  relation "queries" does not exist at character 979
redash-master-postgres-1   | STATEMENT:  SELECT queries.query AS queries_query, queries.updated_at AS queries_updated_at, queries.created_at AS queries_created_at, queries.id AS queries_id, queries.version AS queries_version, queries.org_id AS queries_org_id, queries.data_source_id AS queries_data_source_id, queries.latest_query_data_id AS queries_latest_query_data_id, queries.name AS queries_name, queries.description AS queries_description, queries.query_hash AS queries_query_hash, queries.api_key AS queries_api_key, queries.user_id AS queries_user_id, queries.last_modified_by_id AS queries_last_modified_by_id, queries.is_archived AS queries_is_archived, queries.is_draft AS queries_is_draft, queries.schedule AS queries_schedule, queries.schedule_failures AS queries_schedule_failures, queries.options AS queries_options, queries.search_vector AS queries_search_vector, queries.tags AS queries_tags, query_results_1.id AS query_results_1_id, query_results_1.retrieved_at AS query_results_1_retrieved_at
redash-master-postgres-1   |    FROM queries LEFT OUTER JOIN query_results AS query_results_1 ON query_results_1.id = queries.latest_query_data_id
redash-master-postgres-1   |    WHERE queries.schedule IS NOT NULL ORDER BY queries.id
redash-master-worker-1     | [2021-10-07 15:03:07,179][PID:35][ERROR][rq.worker] sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "queries" does not exist
redash-master-worker-1     | LINE 2: FROM queries LEFT OUTER JOIN query_results AS query_results_...
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     | [SQL: SELECT queries.query AS queries_query, queries.updated_at AS queries_updated_at, queries.created_at AS queries_created_at, queries.id AS queries_id, queries.version AS queries_version, queries.org_id AS queries_org_id, queries.data_source_id AS queries_data_source_id, queries.latest_query_data_id AS queries_latest_query_data_id, queries.name AS queries_name, queries.description AS queries_description, queries.query_hash AS queries_query_hash, queries.api_key AS queries_api_key, queries.user_id AS queries_user_id, queries.last_modified_by_id AS queries_last_modified_by_id, queries.is_archived AS queries_is_archived, queries.is_draft AS queries_is_draft, queries.schedule AS queries_schedule, queries.schedule_failures AS queries_schedule_failures, queries.options AS queries_options, queries.search_vector AS queries_search_vector, queries.tags AS queries_tags, query_results_1.id AS query_results_1_id, query_results_1.retrieved_at AS query_results_1_retrieved_at
redash-master-worker-1     | FROM queries LEFT OUTER JOIN query_results AS query_results_1 ON query_results_1.id = queries.latest_query_data_id
redash-master-worker-1     | WHERE queries.schedule IS NOT NULL ORDER BY queries.id]
redash-master-worker-1     | (Background on this error at: http://sqlalche.me/e/f405)
redash-master-worker-1     | Traceback (most recent call last):
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
redash-master-worker-1     |     cursor, statement, parameters, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 580, in do_execute
redash-master-worker-1     |     cursor.execute(statement, parameters)
redash-master-worker-1     | psycopg2.errors.UndefinedTable: relation "queries" does not exist
redash-master-worker-1     | LINE 2: FROM queries LEFT OUTER JOIN query_results AS query_results_...
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     |
redash-master-worker-1     | The above exception was the direct cause of the following exception:
redash-master-worker-1     |
redash-master-worker-1     | Traceback (most recent call last):
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/worker.py", line 934, in perform_job
redash-master-worker-1     |     rv = job.perform()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/job.py", line 686, in perform
redash-master-worker-1     |     self._result = self._execute()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/job.py", line 692, in _execute
redash-master-worker-1     |     return self.func(*self.args, **self.kwargs)
redash-master-worker-1     |   File "/app/redash/tasks/queries/maintenance.py", line 89, in refresh_queries
redash-master-worker-1     |     for query in models.Query.outdated_queries():
redash-master-worker-1     |   File "/app/redash/models/__init__.py", line 641, in outdated_queries
redash-master-worker-1     |     .order_by(Query.id)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3186, in all
redash-master-worker-1     |     return list(self)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3342, in __iter__
redash-master-worker-1     |     return self._execute_and_instances(context)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3367, in _execute_and_instances
redash-master-worker-1     |     result = conn.execute(querycontext.statement, self._params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 988, in execute
redash-master-worker-1     |     return meth(self, multiparams, params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/sql/elements.py", line 287, in _execute_on_connection
redash-master-worker-1     |     return connection._execute_clauseelement(self, multiparams, params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1107, in _execute_clauseelement
redash-master-worker-1     |     distilled_params,
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1253, in _execute_context
redash-master-worker-1     |     e, statement, parameters, cursor, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1473, in _handle_dbapi_exception
redash-master-worker-1     |     util.raise_from_cause(sqlalchemy_exception, exc_info)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 398, in raise_from_cause
redash-master-worker-1     |     reraise(type(exception), exception, tb=exc_tb, cause=cause)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 152, in reraise
redash-master-worker-1     |     raise value.with_traceback(tb)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
redash-master-worker-1     |     cursor, statement, parameters, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 580, in do_execute
redash-master-worker-1     |     cursor.execute(statement, parameters)
redash-master-worker-1     | sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "queries" does not exist
redash-master-worker-1     | LINE 2: FROM queries LEFT OUTER JOIN query_results AS query_results_...
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     | [SQL: SELECT queries.query AS queries_query, queries.updated_at AS queries_updated_at, queries.created_at AS queries_created_at, queries.id AS queries_id, queries.version AS queries_version, queries.org_id AS queries_org_id, queries.data_source_id AS queries_data_source_id, queries.latest_query_data_id AS queries_latest_query_data_id, queries.name AS queries_name, queries.description AS queries_description, queries.query_hash AS queries_query_hash, queries.api_key AS queries_api_key, queries.user_id AS queries_user_id, queries.last_modified_by_id AS queries_last_modified_by_id, queries.is_archived AS queries_is_archived, queries.is_draft AS queries_is_draft, queries.schedule AS queries_schedule, queries.schedule_failures AS queries_schedule_failures, queries.options AS queries_options, queries.search_vector AS queries_search_vector, queries.tags AS queries_tags, query_results_1.id AS query_results_1_id, query_results_1.retrieved_at AS query_results_1_retrieved_at
redash-master-worker-1     | FROM queries LEFT OUTER JOIN query_results AS query_results_1 ON query_results_1.id = queries.latest_query_data_id
redash-master-worker-1     | WHERE queries.schedule IS NOT NULL ORDER BY queries.id]
redash-master-worker-1     | (Background on this error at: http://sqlalche.me/e/f405)
redash-master-worker-1     | Traceback (most recent call last):
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
redash-master-worker-1     |     cursor, statement, parameters, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 580, in do_execute
redash-master-worker-1     |     cursor.execute(statement, parameters)
redash-master-worker-1     | psycopg2.errors.UndefinedTable: relation "queries" does not exist
redash-master-worker-1     | LINE 2: FROM queries LEFT OUTER JOIN query_results AS query_results_...
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     |
redash-master-worker-1     | The above exception was the direct cause of the following exception:
redash-master-worker-1     |
redash-master-worker-1     | Traceback (most recent call last):
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/worker.py", line 934, in perform_job
redash-master-worker-1     |     rv = job.perform()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/job.py", line 686, in perform
redash-master-worker-1     |     self._result = self._execute()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/job.py", line 692, in _execute
redash-master-worker-1     |     return self.func(*self.args, **self.kwargs)
redash-master-worker-1     |   File "/app/redash/tasks/queries/maintenance.py", line 89, in refresh_queries
redash-master-worker-1     |     for query in models.Query.outdated_queries():
redash-master-worker-1     |   File "/app/redash/models/__init__.py", line 641, in outdated_queries
redash-master-worker-1     |     .order_by(Query.id)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3186, in all
redash-master-worker-1     |     return list(self)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3342, in __iter__
redash-master-worker-1     |     return self._execute_and_instances(context)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3367, in _execute_and_instances
redash-master-worker-1     |     result = conn.execute(querycontext.statement, self._params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 988, in execute
redash-master-worker-1     |     return meth(self, multiparams, params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/sql/elements.py", line 287, in _execute_on_connection
redash-master-worker-1     |     return connection._execute_clauseelement(self, multiparams, params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1107, in _execute_clauseelement
redash-master-worker-1     |     distilled_params,
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1253, in _execute_context
redash-master-worker-1     |     e, statement, parameters, cursor, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1473, in _handle_dbapi_exception
redash-master-worker-1     |     util.raise_from_cause(sqlalchemy_exception, exc_info)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 398, in raise_from_cause
redash-master-worker-1     |     reraise(type(exception), exception, tb=exc_tb, cause=cause)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 152, in reraise
redash-master-worker-1     |     raise value.with_traceback(tb)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
redash-master-worker-1     |     cursor, statement, parameters, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 580, in do_execute
redash-master-worker-1     |     cursor.execute(statement, parameters)
redash-master-worker-1     | sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "queries" does not exist
redash-master-worker-1     | LINE 2: FROM queries LEFT OUTER JOIN query_results AS query_results_...
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     | [SQL: SELECT queries.query AS queries_query, queries.updated_at AS queries_updated_at, queries.created_at AS queries_created_at, queries.id AS queries_id, queries.version AS queries_version, queries.org_id AS queries_org_id, queries.data_source_id AS queries_data_source_id, queries.latest_query_data_id AS queries_latest_query_data_id, queries.name AS queries_name, queries.description AS queries_description, queries.query_hash AS queries_query_hash, queries.api_key AS queries_api_key, queries.user_id AS queries_user_id, queries.last_modified_by_id AS queries_last_modified_by_id, queries.is_archived AS queries_is_archived, queries.is_draft AS queries_is_draft, queries.schedule AS queries_schedule, queries.schedule_failures AS queries_schedule_failures, queries.options AS queries_options, queries.search_vector AS queries_search_vector, queries.tags AS queries_tags, query_results_1.id AS query_results_1_id, query_results_1.retrieved_at AS query_results_1_retrieved_at
redash-master-worker-1     | FROM queries LEFT OUTER JOIN query_results AS query_results_1 ON query_results_1.id = queries.latest_query_data_id
redash-master-worker-1     | WHERE queries.schedule IS NOT NULL ORDER BY queries.id]
redash-master-worker-1     | (Background on this error at: http://sqlalche.me/e/f405)
redash-master-worker-1     | [2021-10-07 15:03:07,203][PID:8][INFO][rq.worker] periodic: 59a84668e68687338646f735965213c58e814b32
redash-master-worker-1     | [2021-10-07 15:03:07,227][PID:36][INFO][rq.job.redash.tasks.queries.maintenance] job.func_name=redash.tasks.queries.maintenance.remove_ghost_locks job.id=59a84668e68687338646f735965213c58e814b32 Locks found: 0, Locks removed: 0
redash-master-worker-1     | [2021-10-07 15:03:07,233][PID:36][INFO][rq.worker] periodic: Job OK (59a84668e68687338646f735965213c58e814b32)
redash-master-worker-1     | [2021-10-07 15:03:07,234][PID:36][INFO][rq.worker] Result is kept for 600 seconds
redash-master-worker-1     | [2021-10-07 15:03:37,080][PID:8][INFO][rq.worker] periodic: 305c0cae0a196ae96915fd2b6f81001c435aad65
redash-master-worker-1     | [2021-10-07 15:03:37,097][PID:37][INFO][rq.job.redash.tasks.queries.maintenance] job.func_name=redash.tasks.queries.maintenance.refresh_queries job.id=305c0cae0a196ae96915fd2b6f81001c435aad65 Refreshing queries...
redash-master-postgres-1   | ERROR:  relation "queries" does not exist at character 979
redash-master-postgres-1   | STATEMENT:  SELECT queries.query AS queries_query, queries.updated_at AS queries_updated_at, queries.created_at AS queries_created_at, queries.id AS queries_id, queries.version AS queries_version, queries.org_id AS queries_org_id, queries.data_source_id AS queries_data_source_id, queries.latest_query_data_id AS queries_latest_query_data_id, queries.name AS queries_name, queries.description AS queries_description, queries.query_hash AS queries_query_hash, queries.api_key AS queries_api_key, queries.user_id AS queries_user_id, queries.last_modified_by_id AS queries_last_modified_by_id, queries.is_archived AS queries_is_archived, queries.is_draft AS queries_is_draft, queries.schedule AS queries_schedule, queries.schedule_failures AS queries_schedule_failures, queries.options AS queries_options, queries.search_vector AS queries_search_vector, queries.tags AS queries_tags, query_results_1.id AS query_results_1_id, query_results_1.retrieved_at AS query_results_1_retrieved_at
redash-master-postgres-1   |    FROM queries LEFT OUTER JOIN query_results AS query_results_1 ON query_results_1.id = queries.latest_query_data_id
redash-master-postgres-1   |    WHERE queries.schedule IS NOT NULL ORDER BY queries.id
redash-master-worker-1     | [2021-10-07 15:03:37,149][PID:37][ERROR][rq.worker] sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "queries" does not exist
redash-master-worker-1     | LINE 2: FROM queries LEFT OUTER JOIN query_results AS query_results_...
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     | [SQL: SELECT queries.query AS queries_query, queries.updated_at AS queries_updated_at, queries.created_at AS queries_created_at, queries.id AS queries_id, queries.version AS queries_version, queries.org_id AS queries_org_id, queries.data_source_id AS queries_data_source_id, queries.latest_query_data_id AS queries_latest_query_data_id, queries.name AS queries_name, queries.description AS queries_description, queries.query_hash AS queries_query_hash, queries.api_key AS queries_api_key, queries.user_id AS queries_user_id, queries.last_modified_by_id AS queries_last_modified_by_id, queries.is_archived AS queries_is_archived, queries.is_draft AS queries_is_draft, queries.schedule AS queries_schedule, queries.schedule_failures AS queries_schedule_failures, queries.options AS queries_options, queries.search_vector AS queries_search_vector, queries.tags AS queries_tags, query_results_1.id AS query_results_1_id, query_results_1.retrieved_at AS query_results_1_retrieved_at
redash-master-worker-1     | FROM queries LEFT OUTER JOIN query_results AS query_results_1 ON query_results_1.id = queries.latest_query_data_id
redash-master-worker-1     | WHERE queries.schedule IS NOT NULL ORDER BY queries.id]
redash-master-worker-1     | (Background on this error at: http://sqlalche.me/e/f405)
redash-master-worker-1     | Traceback (most recent call last):
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
redash-master-worker-1     |     cursor, statement, parameters, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 580, in do_execute
redash-master-worker-1     |     cursor.execute(statement, parameters)
redash-master-worker-1     | psycopg2.errors.UndefinedTable: relation "queries" does not exist
redash-master-worker-1     | LINE 2: FROM queries LEFT OUTER JOIN query_results AS query_results_...
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     |
redash-master-worker-1     | The above exception was the direct cause of the following exception:
redash-master-worker-1     |
redash-master-worker-1     | Traceback (most recent call last):
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/worker.py", line 934, in perform_job
redash-master-worker-1     |     rv = job.perform()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/job.py", line 686, in perform
redash-master-worker-1     |     self._result = self._execute()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/job.py", line 692, in _execute
redash-master-worker-1     |     return self.func(*self.args, **self.kwargs)
redash-master-worker-1     |   File "/app/redash/tasks/queries/maintenance.py", line 89, in refresh_queries
redash-master-worker-1     |     for query in models.Query.outdated_queries():
redash-master-worker-1     |   File "/app/redash/models/__init__.py", line 641, in outdated_queries
redash-master-worker-1     |     .order_by(Query.id)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3186, in all
redash-master-worker-1     |     return list(self)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3342, in __iter__
redash-master-worker-1     |     return self._execute_and_instances(context)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3367, in _execute_and_instances
redash-master-worker-1     |     result = conn.execute(querycontext.statement, self._params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 988, in execute
redash-master-worker-1     |     return meth(self, multiparams, params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/sql/elements.py", line 287, in _execute_on_connection
redash-master-worker-1     |     return connection._execute_clauseelement(self, multiparams, params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1107, in _execute_clauseelement
redash-master-worker-1     |     distilled_params,
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1253, in _execute_context
redash-master-worker-1     |     e, statement, parameters, cursor, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1473, in _handle_dbapi_exception
redash-master-worker-1     |     util.raise_from_cause(sqlalchemy_exception, exc_info)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 398, in raise_from_cause
redash-master-worker-1     |     reraise(type(exception), exception, tb=exc_tb, cause=cause)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 152, in reraise
redash-master-worker-1     |     raise value.with_traceback(tb)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
redash-master-worker-1     |     cursor, statement, parameters, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 580, in do_execute
redash-master-worker-1     |     cursor.execute(statement, parameters)
redash-master-worker-1     | sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "queries" does not exist
redash-master-worker-1     | LINE 2: FROM queries LEFT OUTER JOIN query_results AS query_results_...
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     | [SQL: SELECT queries.query AS queries_query, queries.updated_at AS queries_updated_at, queries.created_at AS queries_created_at, queries.id AS queries_id, queries.version AS queries_version, queries.org_id AS queries_org_id, queries.data_source_id AS queries_data_source_id, queries.latest_query_data_id AS queries_latest_query_data_id, queries.name AS queries_name, queries.description AS queries_description, queries.query_hash AS queries_query_hash, queries.api_key AS queries_api_key, queries.user_id AS queries_user_id, queries.last_modified_by_id AS queries_last_modified_by_id, queries.is_archived AS queries_is_archived, queries.is_draft AS queries_is_draft, queries.schedule AS queries_schedule, queries.schedule_failures AS queries_schedule_failures, queries.options AS queries_options, queries.search_vector AS queries_search_vector, queries.tags AS queries_tags, query_results_1.id AS query_results_1_id, query_results_1.retrieved_at AS query_results_1_retrieved_at
redash-master-worker-1     | FROM queries LEFT OUTER JOIN query_results AS query_results_1 ON query_results_1.id = queries.latest_query_data_id
redash-master-worker-1     | WHERE queries.schedule IS NOT NULL ORDER BY queries.id]
redash-master-worker-1     | (Background on this error at: http://sqlalche.me/e/f405)
redash-master-worker-1     | Traceback (most recent call last):
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
redash-master-worker-1     |     cursor, statement, parameters, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 580, in do_execute
redash-master-worker-1     |     cursor.execute(statement, parameters)
redash-master-worker-1     | psycopg2.errors.UndefinedTable: relation "queries" does not exist
redash-master-worker-1     | LINE 2: FROM queries LEFT OUTER JOIN query_results AS query_results_...
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     |
redash-master-worker-1     | The above exception was the direct cause of the following exception:
redash-master-worker-1     |
redash-master-worker-1     | Traceback (most recent call last):
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/worker.py", line 934, in perform_job
redash-master-worker-1     |     rv = job.perform()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/job.py", line 686, in perform
redash-master-worker-1     |     self._result = self._execute()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/job.py", line 692, in _execute
redash-master-worker-1     |     return self.func(*self.args, **self.kwargs)
redash-master-worker-1     |   File "/app/redash/tasks/queries/maintenance.py", line 89, in refresh_queries
redash-master-worker-1     |     for query in models.Query.outdated_queries():
redash-master-worker-1     |   File "/app/redash/models/__init__.py", line 641, in outdated_queries
redash-master-worker-1     |     .order_by(Query.id)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3186, in all
redash-master-worker-1     |     return list(self)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3342, in __iter__
redash-master-worker-1     |     return self._execute_and_instances(context)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3367, in _execute_and_instances
redash-master-worker-1     |     result = conn.execute(querycontext.statement, self._params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 988, in execute
redash-master-worker-1     |     return meth(self, multiparams, params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/sql/elements.py", line 287, in _execute_on_connection
redash-master-worker-1     |     return connection._execute_clauseelement(self, multiparams, params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1107, in _execute_clauseelement
redash-master-worker-1     |     distilled_params,
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1253, in _execute_context
redash-master-worker-1     |     e, statement, parameters, cursor, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1473, in _handle_dbapi_exception
redash-master-worker-1     |     util.raise_from_cause(sqlalchemy_exception, exc_info)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 398, in raise_from_cause
redash-master-worker-1     |     reraise(type(exception), exception, tb=exc_tb, cause=cause)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 152, in reraise
redash-master-worker-1     |     raise value.with_traceback(tb)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
redash-master-worker-1     |     cursor, statement, parameters, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 580, in do_execute
redash-master-worker-1     |     cursor.execute(statement, parameters)
redash-master-worker-1     | sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "queries" does not exist
redash-master-worker-1     | LINE 2: FROM queries LEFT OUTER JOIN query_results AS query_results_...
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     | [SQL: SELECT queries.query AS queries_query, queries.updated_at AS queries_updated_at, queries.created_at AS queries_created_at, queries.id AS queries_id, queries.version AS queries_version, queries.org_id AS queries_org_id, queries.data_source_id AS queries_data_source_id, queries.latest_query_data_id AS queries_latest_query_data_id, queries.name AS queries_name, queries.description AS queries_description, queries.query_hash AS queries_query_hash, queries.api_key AS queries_api_key, queries.user_id AS queries_user_id, queries.last_modified_by_id AS queries_last_modified_by_id, queries.is_archived AS queries_is_archived, queries.is_draft AS queries_is_draft, queries.schedule AS queries_schedule, queries.schedule_failures AS queries_schedule_failures, queries.options AS queries_options, queries.search_vector AS queries_search_vector, queries.tags AS queries_tags, query_results_1.id AS query_results_1_id, query_results_1.retrieved_at AS query_results_1_retrieved_at
redash-master-worker-1     | FROM queries LEFT OUTER JOIN query_results AS query_results_1 ON query_results_1.id = queries.latest_query_data_id
redash-master-worker-1     | WHERE queries.schedule IS NOT NULL ORDER BY queries.id]
redash-master-worker-1     | (Background on this error at: http://sqlalche.me/e/f405)
redash-master-worker-1     | [2021-10-07 15:04:07,109][PID:8][INFO][rq.worker] periodic: 18281a865ed3d1a60f366aeb8596fe2283aa421f
redash-master-worker-1     | [2021-10-07 15:04:07,131][PID:38][INFO][rq.worker] periodic: Job OK (18281a865ed3d1a60f366aeb8596fe2283aa421f)
redash-master-worker-1     | [2021-10-07 15:04:07,131][PID:38][INFO][rq.worker] Result is kept for 600 seconds
redash-master-worker-1     | [2021-10-07 15:04:07,148][PID:8][INFO][rq.worker] periodic: 305c0cae0a196ae96915fd2b6f81001c435aad65
redash-master-worker-1     | [2021-10-07 15:04:07,161][PID:39][INFO][rq.job.redash.tasks.queries.maintenance] job.func_name=redash.tasks.queries.maintenance.refresh_queries job.id=305c0cae0a196ae96915fd2b6f81001c435aad65 Refreshing queries...
redash-master-postgres-1   | ERROR:  relation "queries" does not exist at character 979
redash-master-postgres-1   | STATEMENT:  SELECT queries.query AS queries_query, queries.updated_at AS queries_updated_at, queries.created_at AS queries_created_at, queries.id AS queries_id, queries.version AS queries_version, queries.org_id AS queries_org_id, queries.data_source_id AS queries_data_source_id, queries.latest_query_data_id AS queries_latest_query_data_id, queries.name AS queries_name, queries.description AS queries_description, queries.query_hash AS queries_query_hash, queries.api_key AS queries_api_key, queries.user_id AS queries_user_id, queries.last_modified_by_id AS queries_last_modified_by_id, queries.is_archived AS queries_is_archived, queries.is_draft AS queries_is_draft, queries.schedule AS queries_schedule, queries.schedule_failures AS queries_schedule_failures, queries.options AS queries_options, queries.search_vector AS queries_search_vector, queries.tags AS queries_tags, query_results_1.id AS query_results_1_id, query_results_1.retrieved_at AS query_results_1_retrieved_at
redash-master-postgres-1   |    FROM queries LEFT OUTER JOIN query_results AS query_results_1 ON query_results_1.id = queries.latest_query_data_id
redash-master-postgres-1   |    WHERE queries.schedule IS NOT NULL ORDER BY queries.id
redash-master-worker-1     | [2021-10-07 15:04:07,212][PID:39][ERROR][rq.worker] sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "queries" does not exist
redash-master-worker-1     | LINE 2: FROM queries LEFT OUTER JOIN query_results AS query_results_...
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     | [SQL: SELECT queries.query AS queries_query, queries.updated_at AS queries_updated_at, queries.created_at AS queries_created_at, queries.id AS queries_id, queries.version AS queries_version, queries.org_id AS queries_org_id, queries.data_source_id AS queries_data_source_id, queries.latest_query_data_id AS queries_latest_query_data_id, queries.name AS queries_name, queries.description AS queries_description, queries.query_hash AS queries_query_hash, queries.api_key AS queries_api_key, queries.user_id AS queries_user_id, queries.last_modified_by_id AS queries_last_modified_by_id, queries.is_archived AS queries_is_archived, queries.is_draft AS queries_is_draft, queries.schedule AS queries_schedule, queries.schedule_failures AS queries_schedule_failures, queries.options AS queries_options, queries.search_vector AS queries_search_vector, queries.tags AS queries_tags, query_results_1.id AS query_results_1_id, query_results_1.retrieved_at AS query_results_1_retrieved_at
redash-master-worker-1     | FROM queries LEFT OUTER JOIN query_results AS query_results_1 ON query_results_1.id = queries.latest_query_data_id
redash-master-worker-1     | WHERE queries.schedule IS NOT NULL ORDER BY queries.id]
redash-master-worker-1     | (Background on this error at: http://sqlalche.me/e/f405)
redash-master-worker-1     | Traceback (most recent call last):
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
redash-master-worker-1     |     cursor, statement, parameters, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 580, in do_execute
redash-master-worker-1     |     cursor.execute(statement, parameters)
redash-master-worker-1     | psycopg2.errors.UndefinedTable: relation "queries" does not exist
redash-master-worker-1     | LINE 2: FROM queries LEFT OUTER JOIN query_results AS query_results_...
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     |
redash-master-worker-1     | The above exception was the direct cause of the following exception:
redash-master-worker-1     |
redash-master-worker-1     | Traceback (most recent call last):
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/worker.py", line 934, in perform_job
redash-master-worker-1     |     rv = job.perform()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/job.py", line 686, in perform
redash-master-worker-1     |     self._result = self._execute()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/job.py", line 692, in _execute
redash-master-worker-1     |     return self.func(*self.args, **self.kwargs)
redash-master-worker-1     |   File "/app/redash/tasks/queries/maintenance.py", line 89, in refresh_queries
redash-master-worker-1     |     for query in models.Query.outdated_queries():
redash-master-worker-1     |   File "/app/redash/models/__init__.py", line 641, in outdated_queries
redash-master-worker-1     |     .order_by(Query.id)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3186, in all
redash-master-worker-1     |     return list(self)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3342, in __iter__
redash-master-worker-1     |     return self._execute_and_instances(context)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3367, in _execute_and_instances
redash-master-worker-1     |     result = conn.execute(querycontext.statement, self._params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 988, in execute
redash-master-worker-1     |     return meth(self, multiparams, params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/sql/elements.py", line 287, in _execute_on_connection
redash-master-worker-1     |     return connection._execute_clauseelement(self, multiparams, params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1107, in _execute_clauseelement
redash-master-worker-1     |     distilled_params,
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1253, in _execute_context
redash-master-worker-1     |     e, statement, parameters, cursor, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1473, in _handle_dbapi_exception
redash-master-worker-1     |     util.raise_from_cause(sqlalchemy_exception, exc_info)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 398, in raise_from_cause
redash-master-worker-1     |     reraise(type(exception), exception, tb=exc_tb, cause=cause)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 152, in reraise
redash-master-worker-1     |     raise value.with_traceback(tb)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
redash-master-worker-1     |     cursor, statement, parameters, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 580, in do_execute
redash-master-worker-1     |     cursor.execute(statement, parameters)
redash-master-worker-1     | sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "queries" does not exist
redash-master-worker-1     | LINE 2: FROM queries LEFT OUTER JOIN query_results AS query_results_...
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     | [SQL: SELECT queries.query AS queries_query, queries.updated_at AS queries_updated_at, queries.created_at AS queries_created_at, queries.id AS queries_id, queries.version AS queries_version, queries.org_id AS queries_org_id, queries.data_source_id AS queries_data_source_id, queries.latest_query_data_id AS queries_latest_query_data_id, queries.name AS queries_name, queries.description AS queries_description, queries.query_hash AS queries_query_hash, queries.api_key AS queries_api_key, queries.user_id AS queries_user_id, queries.last_modified_by_id AS queries_last_modified_by_id, queries.is_archived AS queries_is_archived, queries.is_draft AS queries_is_draft, queries.schedule AS queries_schedule, queries.schedule_failures AS queries_schedule_failures, queries.options AS queries_options, queries.search_vector AS queries_search_vector, queries.tags AS queries_tags, query_results_1.id AS query_results_1_id, query_results_1.retrieved_at AS query_results_1_retrieved_at
redash-master-worker-1     | FROM queries LEFT OUTER JOIN query_results AS query_results_1 ON query_results_1.id = queries.latest_query_data_id
redash-master-worker-1     | WHERE queries.schedule IS NOT NULL ORDER BY queries.id]
redash-master-worker-1     | (Background on this error at: http://sqlalche.me/e/f405)
redash-master-worker-1     | Traceback (most recent call last):
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
redash-master-worker-1     |     cursor, statement, parameters, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 580, in do_execute
redash-master-worker-1     |     cursor.execute(statement, parameters)
redash-master-worker-1     | psycopg2.errors.UndefinedTable: relation "queries" does not exist
redash-master-worker-1     | LINE 2: FROM queries LEFT OUTER JOIN query_results AS query_results_...
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     |
redash-master-worker-1     | The above exception was the direct cause of the following exception:
redash-master-worker-1     |
redash-master-worker-1     | Traceback (most recent call last):
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/worker.py", line 934, in perform_job
redash-master-worker-1     |     rv = job.perform()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/job.py", line 686, in perform
redash-master-worker-1     |     self._result = self._execute()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/job.py", line 692, in _execute
redash-master-worker-1     |     return self.func(*self.args, **self.kwargs)
redash-master-worker-1     |   File "/app/redash/tasks/queries/maintenance.py", line 89, in refresh_queries
redash-master-worker-1     |     for query in models.Query.outdated_queries():
redash-master-worker-1     |   File "/app/redash/models/__init__.py", line 641, in outdated_queries
redash-master-worker-1     |     .order_by(Query.id)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3186, in all
redash-master-worker-1     |     return list(self)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3342, in __iter__
redash-master-worker-1     |     return self._execute_and_instances(context)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3367, in _execute_and_instances
redash-master-worker-1     |     result = conn.execute(querycontext.statement, self._params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 988, in execute
redash-master-worker-1     |     return meth(self, multiparams, params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/sql/elements.py", line 287, in _execute_on_connection
redash-master-worker-1     |     return connection._execute_clauseelement(self, multiparams, params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1107, in _execute_clauseelement
redash-master-worker-1     |     distilled_params,
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1253, in _execute_context
redash-master-worker-1     |     e, statement, parameters, cursor, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1473, in _handle_dbapi_exception
redash-master-worker-1     |     util.raise_from_cause(sqlalchemy_exception, exc_info)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 398, in raise_from_cause
redash-master-worker-1     |     reraise(type(exception), exception, tb=exc_tb, cause=cause)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 152, in reraise
redash-master-worker-1     |     raise value.with_traceback(tb)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
redash-master-worker-1     |     cursor, statement, parameters, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 580, in do_execute
redash-master-worker-1     |     cursor.execute(statement, parameters)
redash-master-worker-1     | sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "queries" does not exist
redash-master-worker-1     | LINE 2: FROM queries LEFT OUTER JOIN query_results AS query_results_...
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     | [SQL: SELECT queries.query AS queries_query, queries.updated_at AS queries_updated_at, queries.created_at AS queries_created_at, queries.id AS queries_id, queries.version AS queries_version, queries.org_id AS queries_org_id, queries.data_source_id AS queries_data_source_id, queries.latest_query_data_id AS queries_latest_query_data_id, queries.name AS queries_name, queries.description AS queries_description, queries.query_hash AS queries_query_hash, queries.api_key AS queries_api_key, queries.user_id AS queries_user_id, queries.last_modified_by_id AS queries_last_modified_by_id, queries.is_archived AS queries_is_archived, queries.is_draft AS queries_is_draft, queries.schedule AS queries_schedule, queries.schedule_failures AS queries_schedule_failures, queries.options AS queries_options, queries.search_vector AS queries_search_vector, queries.tags AS queries_tags, query_results_1.id AS query_results_1_id, query_results_1.retrieved_at AS query_results_1_retrieved_at
redash-master-worker-1     | FROM queries LEFT OUTER JOIN query_results AS query_results_1 ON query_results_1.id = queries.latest_query_data_id
redash-master-worker-1     | WHERE queries.schedule IS NOT NULL ORDER BY queries.id]
redash-master-worker-1     | (Background on this error at: http://sqlalche.me/e/f405)
redash-master-worker-1     | [2021-10-07 15:04:07,240][PID:8][INFO][rq.worker] periodic: 59a84668e68687338646f735965213c58e814b32
redash-master-worker-1     | [2021-10-07 15:04:07,265][PID:40][INFO][rq.job.redash.tasks.queries.maintenance] job.func_name=redash.tasks.queries.maintenance.remove_ghost_locks job.id=59a84668e68687338646f735965213c58e814b32 Locks found: 0, Locks removed: 0
redash-master-worker-1     | [2021-10-07 15:04:07,270][PID:40][INFO][rq.worker] periodic: Job OK (59a84668e68687338646f735965213c58e814b32)
redash-master-worker-1     | [2021-10-07 15:04:07,270][PID:40][INFO][rq.worker] Result is kept for 600 seconds
redash-master-worker-1     | [2021-10-07 15:04:37,128][PID:8][INFO][rq.worker] periodic: 305c0cae0a196ae96915fd2b6f81001c435aad65
redash-master-worker-1     | [2021-10-07 15:04:37,139][PID:41][INFO][rq.job.redash.tasks.queries.maintenance] job.func_name=redash.tasks.queries.maintenance.refresh_queries job.id=305c0cae0a196ae96915fd2b6f81001c435aad65 Refreshing queries...
redash-master-postgres-1   | ERROR:  relation "queries" does not exist at character 979
redash-master-postgres-1   | STATEMENT:  SELECT queries.query AS queries_query, queries.updated_at AS queries_updated_at, queries.created_at AS queries_created_at, queries.id AS queries_id, queries.version AS queries_version, queries.org_id AS queries_org_id, queries.data_source_id AS queries_data_source_id, queries.latest_query_data_id AS queries_latest_query_data_id, queries.name AS queries_name, queries.description AS queries_description, queries.query_hash AS queries_query_hash, queries.api_key AS queries_api_key, queries.user_id AS queries_user_id, queries.last_modified_by_id AS queries_last_modified_by_id, queries.is_archived AS queries_is_archived, queries.is_draft AS queries_is_draft, queries.schedule AS queries_schedule, queries.schedule_failures AS queries_schedule_failures, queries.options AS queries_options, queries.search_vector AS queries_search_vector, queries.tags AS queries_tags, query_results_1.id AS query_results_1_id, query_results_1.retrieved_at AS query_results_1_retrieved_at
redash-master-postgres-1   |    FROM queries LEFT OUTER JOIN query_results AS query_results_1 ON query_results_1.id = queries.latest_query_data_id
redash-master-postgres-1   |    WHERE queries.schedule IS NOT NULL ORDER BY queries.id
redash-master-worker-1     | [2021-10-07 15:04:37,188][PID:41][ERROR][rq.worker] sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "queries" does not exist
redash-master-worker-1     | LINE 2: FROM queries LEFT OUTER JOIN query_results AS query_results_...
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     | [SQL: SELECT queries.query AS queries_query, queries.updated_at AS queries_updated_at, queries.created_at AS queries_created_at, queries.id AS queries_id, queries.version AS queries_version, queries.org_id AS queries_org_id, queries.data_source_id AS queries_data_source_id, queries.latest_query_data_id AS queries_latest_query_data_id, queries.name AS queries_name, queries.description AS queries_description, queries.query_hash AS queries_query_hash, queries.api_key AS queries_api_key, queries.user_id AS queries_user_id, queries.last_modified_by_id AS queries_last_modified_by_id, queries.is_archived AS queries_is_archived, queries.is_draft AS queries_is_draft, queries.schedule AS queries_schedule, queries.schedule_failures AS queries_schedule_failures, queries.options AS queries_options, queries.search_vector AS queries_search_vector, queries.tags AS queries_tags, query_results_1.id AS query_results_1_id, query_results_1.retrieved_at AS query_results_1_retrieved_at
redash-master-worker-1     | FROM queries LEFT OUTER JOIN query_results AS query_results_1 ON query_results_1.id = queries.latest_query_data_id
redash-master-worker-1     | WHERE queries.schedule IS NOT NULL ORDER BY queries.id]
redash-master-worker-1     | (Background on this error at: http://sqlalche.me/e/f405)
redash-master-worker-1     | Traceback (most recent call last):
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
redash-master-worker-1     |     cursor, statement, parameters, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 580, in do_execute
redash-master-worker-1     |     cursor.execute(statement, parameters)
redash-master-worker-1     | psycopg2.errors.UndefinedTable: relation "queries" does not exist
redash-master-worker-1     | LINE 2: FROM queries LEFT OUTER JOIN query_results AS query_results_...
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     |
redash-master-worker-1     | The above exception was the direct cause of the following exception:
redash-master-worker-1     |
redash-master-worker-1     | Traceback (most recent call last):
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/worker.py", line 934, in perform_job
redash-master-worker-1     |     rv = job.perform()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/job.py", line 686, in perform
redash-master-worker-1     |     self._result = self._execute()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/job.py", line 692, in _execute
redash-master-worker-1     |     return self.func(*self.args, **self.kwargs)
redash-master-worker-1     |   File "/app/redash/tasks/queries/maintenance.py", line 89, in refresh_queries
redash-master-worker-1     |     for query in models.Query.outdated_queries():
redash-master-worker-1     |   File "/app/redash/models/__init__.py", line 641, in outdated_queries
redash-master-worker-1     |     .order_by(Query.id)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3186, in all
redash-master-worker-1     |     return list(self)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3342, in __iter__
redash-master-worker-1     |     return self._execute_and_instances(context)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3367, in _execute_and_instances
redash-master-worker-1     |     result = conn.execute(querycontext.statement, self._params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 988, in execute
redash-master-worker-1     |     return meth(self, multiparams, params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/sql/elements.py", line 287, in _execute_on_connection
redash-master-worker-1     |     return connection._execute_clauseelement(self, multiparams, params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1107, in _execute_clauseelement
redash-master-worker-1     |     distilled_params,
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1253, in _execute_context
redash-master-worker-1     |     e, statement, parameters, cursor, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1473, in _handle_dbapi_exception
redash-master-worker-1     |     util.raise_from_cause(sqlalchemy_exception, exc_info)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 398, in raise_from_cause
redash-master-worker-1     |     reraise(type(exception), exception, tb=exc_tb, cause=cause)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 152, in reraise
redash-master-worker-1     |     raise value.with_traceback(tb)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
redash-master-worker-1     |     cursor, statement, parameters, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 580, in do_execute
redash-master-worker-1     |     cursor.execute(statement, parameters)
redash-master-worker-1     | sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "queries" does not exist
redash-master-worker-1     | LINE 2: FROM queries LEFT OUTER JOIN query_results AS query_results_...
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     | [SQL: SELECT queries.query AS queries_query, queries.updated_at AS queries_updated_at, queries.created_at AS queries_created_at, queries.id AS queries_id, queries.version AS queries_version, queries.org_id AS queries_org_id, queries.data_source_id AS queries_data_source_id, queries.latest_query_data_id AS queries_latest_query_data_id, queries.name AS queries_name, queries.description AS queries_description, queries.query_hash AS queries_query_hash, queries.api_key AS queries_api_key, queries.user_id AS queries_user_id, queries.last_modified_by_id AS queries_last_modified_by_id, queries.is_archived AS queries_is_archived, queries.is_draft AS queries_is_draft, queries.schedule AS queries_schedule, queries.schedule_failures AS queries_schedule_failures, queries.options AS queries_options, queries.search_vector AS queries_search_vector, queries.tags AS queries_tags, query_results_1.id AS query_results_1_id, query_results_1.retrieved_at AS query_results_1_retrieved_at
redash-master-worker-1     | FROM queries LEFT OUTER JOIN query_results AS query_results_1 ON query_results_1.id = queries.latest_query_data_id
redash-master-worker-1     | WHERE queries.schedule IS NOT NULL ORDER BY queries.id]
redash-master-worker-1     | (Background on this error at: http://sqlalche.me/e/f405)
redash-master-worker-1     | Traceback (most recent call last):
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
redash-master-worker-1     |     cursor, statement, parameters, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 580, in do_execute
redash-master-worker-1     |     cursor.execute(statement, parameters)
redash-master-worker-1     | psycopg2.errors.UndefinedTable: relation "queries" does not exist
redash-master-worker-1     | LINE 2: FROM queries LEFT OUTER JOIN query_results AS query_results_...
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     |
redash-master-worker-1     | The above exception was the direct cause of the following exception:
redash-master-worker-1     |
redash-master-worker-1     | Traceback (most recent call last):
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/worker.py", line 934, in perform_job
redash-master-worker-1     |     rv = job.perform()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/job.py", line 686, in perform
redash-master-worker-1     |     self._result = self._execute()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/job.py", line 692, in _execute
redash-master-worker-1     |     return self.func(*self.args, **self.kwargs)
redash-master-worker-1     |   File "/app/redash/tasks/queries/maintenance.py", line 89, in refresh_queries
redash-master-worker-1     |     for query in models.Query.outdated_queries():
redash-master-worker-1     |   File "/app/redash/models/__init__.py", line 641, in outdated_queries
redash-master-worker-1     |     .order_by(Query.id)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3186, in all
redash-master-worker-1     |     return list(self)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3342, in __iter__
redash-master-worker-1     |     return self._execute_and_instances(context)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3367, in _execute_and_instances
redash-master-worker-1     |     result = conn.execute(querycontext.statement, self._params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 988, in execute
redash-master-worker-1     |     return meth(self, multiparams, params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/sql/elements.py", line 287, in _execute_on_connection
redash-master-worker-1     |     return connection._execute_clauseelement(self, multiparams, params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1107, in _execute_clauseelement
redash-master-worker-1     |     distilled_params,
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1253, in _execute_context
redash-master-worker-1     |     e, statement, parameters, cursor, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1473, in _handle_dbapi_exception
redash-master-worker-1     |     util.raise_from_cause(sqlalchemy_exception, exc_info)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 398, in raise_from_cause
redash-master-worker-1     |     reraise(type(exception), exception, tb=exc_tb, cause=cause)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 152, in reraise
redash-master-worker-1     |     raise value.with_traceback(tb)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
redash-master-worker-1     |     cursor, statement, parameters, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 580, in do_execute
redash-master-worker-1     |     cursor.execute(statement, parameters)
redash-master-worker-1     | sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "queries" does not exist
redash-master-worker-1     | LINE 2: FROM queries LEFT OUTER JOIN query_results AS query_results_...
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     | [SQL: SELECT queries.query AS queries_query, queries.updated_at AS queries_updated_at, queries.created_at AS queries_created_at, queries.id AS queries_id, queries.version AS queries_version, queries.org_id AS queries_org_id, queries.data_source_id AS queries_data_source_id, queries.latest_query_data_id AS queries_latest_query_data_id, queries.name AS queries_name, queries.description AS queries_description, queries.query_hash AS queries_query_hash, queries.api_key AS queries_api_key, queries.user_id AS queries_user_id, queries.last_modified_by_id AS queries_last_modified_by_id, queries.is_archived AS queries_is_archived, queries.is_draft AS queries_is_draft, queries.schedule AS queries_schedule, queries.schedule_failures AS queries_schedule_failures, queries.options AS queries_options, queries.search_vector AS queries_search_vector, queries.tags AS queries_tags, query_results_1.id AS query_results_1_id, query_results_1.retrieved_at AS query_results_1_retrieved_at
redash-master-worker-1     | FROM queries LEFT OUTER JOIN query_results AS query_results_1 ON query_results_1.id = queries.latest_query_data_id
redash-master-worker-1     | WHERE queries.schedule IS NOT NULL ORDER BY queries.id]
redash-master-worker-1     | (Background on this error at: http://sqlalche.me/e/f405)
redash-master-redis-1      | 1:M 07 Oct 15:04:55.091 * 100 changes in 300 seconds. Saving...
redash-master-redis-1      | 1:M 07 Oct 15:04:55.091 * Background saving started by pid 11
redash-master-redis-1      | 11:C 07 Oct 15:04:55.096 * DB saved on disk
redash-master-redis-1      | 11:C 07 Oct 15:04:55.096 * RDB: 0 MB of memory used by copy-on-write
redash-master-redis-1      | 1:M 07 Oct 15:04:55.192 * Background saving terminated with success
redash-master-worker-1     | [2021-10-07 15:05:07,145][PID:8][INFO][rq.worker] periodic: e27209059575fcc17c527c47d0957cb21756e551
redash-master-worker-1     | [2021-10-07 15:05:07,158][PID:42][INFO][rq.job.redash.tasks.queries.maintenance] job.func_name=redash.tasks.queries.maintenance.cleanup_query_results job.id=e27209059575fcc17c527c47d0957cb21756e551 Running query results clean up (removing maximum of 100 unused results, that are 7 days old or more)
redash-master-postgres-1   | ERROR:  relation "query_results" does not exist at character 13
redash-master-postgres-1   | STATEMENT:  DELETE FROM query_results WHERE query_results.id IN (SELECT query_results.id
redash-master-postgres-1   |    FROM query_results LEFT OUTER JOIN queries ON query_results.id = queries.latest_query_data_id
redash-master-postgres-1   |    WHERE queries.id IS NULL AND query_results.retrieved_at < '2021-09-30T15:05:07.158841'::timestamp
redash-master-postgres-1   |     LIMIT 100)
redash-master-worker-1     | [2021-10-07 15:05:07,200][PID:42][ERROR][rq.worker] sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "query_results" does not exist
redash-master-worker-1     | LINE 1: DELETE FROM query_results WHERE query_results.id IN (SELECT ...
redash-master-worker-1     |                     ^
redash-master-worker-1     |
redash-master-worker-1     | [SQL: DELETE FROM query_results WHERE query_results.id IN (SELECT query_results.id
redash-master-worker-1     | FROM query_results LEFT OUTER JOIN queries ON query_results.id = queries.latest_query_data_id
redash-master-worker-1     | WHERE queries.id IS NULL AND query_results.retrieved_at < %(retrieved_at_1)s
redash-master-worker-1     |  LIMIT %(param_1)s)]
redash-master-worker-1     | [parameters: {'retrieved_at_1': datetime.datetime(2021, 9, 30, 15, 5, 7, 158841), 'param_1': 100}]
redash-master-worker-1     | (Background on this error at: http://sqlalche.me/e/f405)
redash-master-worker-1     | Traceback (most recent call last):
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
redash-master-worker-1     |     cursor, statement, parameters, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 580, in do_execute
redash-master-worker-1     |     cursor.execute(statement, parameters)
redash-master-worker-1     | psycopg2.errors.UndefinedTable: relation "query_results" does not exist
redash-master-worker-1     | LINE 1: DELETE FROM query_results WHERE query_results.id IN (SELECT ...
redash-master-worker-1     |                     ^
redash-master-worker-1     |
redash-master-worker-1     |
redash-master-worker-1     | The above exception was the direct cause of the following exception:
redash-master-worker-1     |
redash-master-worker-1     | Traceback (most recent call last):
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/worker.py", line 934, in perform_job
redash-master-worker-1     |     rv = job.perform()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/job.py", line 686, in perform
redash-master-worker-1     |     self._result = self._execute()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/job.py", line 692, in _execute
redash-master-worker-1     |     return self.func(*self.args, **self.kwargs)
redash-master-worker-1     |   File "/app/redash/tasks/queries/maintenance.py", line 142, in cleanup_query_results
redash-master-worker-1     |     ).delete(synchronize_session=False)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3727, in delete
redash-master-worker-1     |     delete_op.exec_()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 1693, in exec_
redash-master-worker-1     |     self._do_exec()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 1921, in _do_exec
redash-master-worker-1     |     self._execute_stmt(delete_stmt)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 1698, in _execute_stmt
redash-master-worker-1     |     self.result = self.query._execute_crud(stmt, self.mapper)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3375, in _execute_crud
redash-master-worker-1     |     return conn.execute(stmt, self._params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 988, in execute
redash-master-worker-1     |     return meth(self, multiparams, params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/sql/elements.py", line 287, in _execute_on_connection
redash-master-worker-1     |     return connection._execute_clauseelement(self, multiparams, params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1107, in _execute_clauseelement
redash-master-worker-1     |     distilled_params,
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1253, in _execute_context
redash-master-worker-1     |     e, statement, parameters, cursor, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1473, in _handle_dbapi_exception
redash-master-worker-1     |     util.raise_from_cause(sqlalchemy_exception, exc_info)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 398, in raise_from_cause
redash-master-worker-1     |     reraise(type(exception), exception, tb=exc_tb, cause=cause)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 152, in reraise
redash-master-worker-1     |     raise value.with_traceback(tb)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
redash-master-worker-1     |     cursor, statement, parameters, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 580, in do_execute
redash-master-worker-1     |     cursor.execute(statement, parameters)
redash-master-worker-1     | sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "query_results" does not exist
redash-master-worker-1     | LINE 1: DELETE FROM query_results WHERE query_results.id IN (SELECT ...
redash-master-worker-1     |                     ^
redash-master-worker-1     |
redash-master-worker-1     | [SQL: DELETE FROM query_results WHERE query_results.id IN (SELECT query_results.id
redash-master-worker-1     | FROM query_results LEFT OUTER JOIN queries ON query_results.id = queries.latest_query_data_id
redash-master-worker-1     | WHERE queries.id IS NULL AND query_results.retrieved_at < %(retrieved_at_1)s
redash-master-worker-1     |  LIMIT %(param_1)s)]
redash-master-worker-1     | [parameters: {'retrieved_at_1': datetime.datetime(2021, 9, 30, 15, 5, 7, 158841), 'param_1': 100}]
redash-master-worker-1     | (Background on this error at: http://sqlalche.me/e/f405)
redash-master-worker-1     | Traceback (most recent call last):
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
redash-master-worker-1     |     cursor, statement, parameters, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 580, in do_execute
redash-master-worker-1     |     cursor.execute(statement, parameters)
redash-master-worker-1     | psycopg2.errors.UndefinedTable: relation "query_results" does not exist
redash-master-worker-1     | LINE 1: DELETE FROM query_results WHERE query_results.id IN (SELECT ...
redash-master-worker-1     |                     ^
redash-master-worker-1     |
redash-master-worker-1     |
redash-master-worker-1     | The above exception was the direct cause of the following exception:
redash-master-worker-1     |
redash-master-worker-1     | Traceback (most recent call last):
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/worker.py", line 934, in perform_job
redash-master-worker-1     |     rv = job.perform()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/job.py", line 686, in perform
redash-master-worker-1     |     self._result = self._execute()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/job.py", line 692, in _execute
redash-master-worker-1     |     return self.func(*self.args, **self.kwargs)
redash-master-worker-1     |   File "/app/redash/tasks/queries/maintenance.py", line 142, in cleanup_query_results
redash-master-worker-1     |     ).delete(synchronize_session=False)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3727, in delete
redash-master-worker-1     |     delete_op.exec_()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 1693, in exec_
redash-master-worker-1     |     self._do_exec()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 1921, in _do_exec
redash-master-worker-1     |     self._execute_stmt(delete_stmt)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/persistence.py", line 1698, in _execute_stmt
redash-master-worker-1     |     self.result = self.query._execute_crud(stmt, self.mapper)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3375, in _execute_crud
redash-master-worker-1     |     return conn.execute(stmt, self._params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 988, in execute
redash-master-worker-1     |     return meth(self, multiparams, params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/sql/elements.py", line 287, in _execute_on_connection
redash-master-worker-1     |     return connection._execute_clauseelement(self, multiparams, params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1107, in _execute_clauseelement
redash-master-worker-1     |     distilled_params,
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1253, in _execute_context
redash-master-worker-1     |     e, statement, parameters, cursor, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1473, in _handle_dbapi_exception
redash-master-worker-1     |     util.raise_from_cause(sqlalchemy_exception, exc_info)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 398, in raise_from_cause
redash-master-worker-1     |     reraise(type(exception), exception, tb=exc_tb, cause=cause)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 152, in reraise
redash-master-worker-1     |     raise value.with_traceback(tb)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
redash-master-worker-1     |     cursor, statement, parameters, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 580, in do_execute
redash-master-worker-1     |     cursor.execute(statement, parameters)
redash-master-worker-1     | sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "query_results" does not exist
redash-master-worker-1     | LINE 1: DELETE FROM query_results WHERE query_results.id IN (SELECT ...
redash-master-worker-1     |                     ^
redash-master-worker-1     |
redash-master-worker-1     | [SQL: DELETE FROM query_results WHERE query_results.id IN (SELECT query_results.id
redash-master-worker-1     | FROM query_results LEFT OUTER JOIN queries ON query_results.id = queries.latest_query_data_id
redash-master-worker-1     | WHERE queries.id IS NULL AND query_results.retrieved_at < %(retrieved_at_1)s
redash-master-worker-1     |  LIMIT %(param_1)s)]
redash-master-worker-1     | [parameters: {'retrieved_at_1': datetime.datetime(2021, 9, 30, 15, 5, 7, 158841), 'param_1': 100}]
redash-master-worker-1     | (Background on this error at: http://sqlalche.me/e/f405)
redash-master-worker-1     | [2021-10-07 15:05:07,223][PID:8][INFO][rq.worker] periodic: 18281a865ed3d1a60f366aeb8596fe2283aa421f
redash-master-worker-1     | [2021-10-07 15:05:07,257][PID:43][INFO][rq.worker] periodic: Job OK (18281a865ed3d1a60f366aeb8596fe2283aa421f)
redash-master-worker-1     | [2021-10-07 15:05:07,258][PID:43][INFO][rq.worker] Result is kept for 600 seconds
redash-master-worker-1     | [2021-10-07 15:05:07,279][PID:8][INFO][rq.worker] periodic: 305c0cae0a196ae96915fd2b6f81001c435aad65
redash-master-worker-1     | [2021-10-07 15:05:07,300][PID:44][INFO][rq.job.redash.tasks.queries.maintenance] job.func_name=redash.tasks.queries.maintenance.refresh_queries job.id=305c0cae0a196ae96915fd2b6f81001c435aad65 Refreshing queries...
redash-master-postgres-1   | ERROR:  relation "queries" does not exist at character 979
redash-master-postgres-1   | STATEMENT:  SELECT queries.query AS queries_query, queries.updated_at AS queries_updated_at, queries.created_at AS queries_created_at, queries.id AS queries_id, queries.version AS queries_version, queries.org_id AS queries_org_id, queries.data_source_id AS queries_data_source_id, queries.latest_query_data_id AS queries_latest_query_data_id, queries.name AS queries_name, queries.description AS queries_description, queries.query_hash AS queries_query_hash, queries.api_key AS queries_api_key, queries.user_id AS queries_user_id, queries.last_modified_by_id AS queries_last_modified_by_id, queries.is_archived AS queries_is_archived, queries.is_draft AS queries_is_draft, queries.schedule AS queries_schedule, queries.schedule_failures AS queries_schedule_failures, queries.options AS queries_options, queries.search_vector AS queries_search_vector, queries.tags AS queries_tags, query_results_1.id AS query_results_1_id, query_results_1.retrieved_at AS query_results_1_retrieved_at
redash-master-postgres-1   |    FROM queries LEFT OUTER JOIN query_results AS query_results_1 ON query_results_1.id = queries.latest_query_data_id
redash-master-postgres-1   |    WHERE queries.schedule IS NOT NULL ORDER BY queries.id
redash-master-worker-1     | [2021-10-07 15:05:07,372][PID:44][ERROR][rq.worker] sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "queries" does not exist
redash-master-worker-1     | LINE 2: FROM queries LEFT OUTER JOIN query_results AS query_results_...
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     | [SQL: SELECT queries.query AS queries_query, queries.updated_at AS queries_updated_at, queries.created_at AS queries_created_at, queries.id AS queries_id, queries.version AS queries_version, queries.org_id AS queries_org_id, queries.data_source_id AS queries_data_source_id, queries.latest_query_data_id AS queries_latest_query_data_id, queries.name AS queries_name, queries.description AS queries_description, queries.query_hash AS queries_query_hash, queries.api_key AS queries_api_key, queries.user_id AS queries_user_id, queries.last_modified_by_id AS queries_last_modified_by_id, queries.is_archived AS queries_is_archived, queries.is_draft AS queries_is_draft, queries.schedule AS queries_schedule, queries.schedule_failures AS queries_schedule_failures, queries.options AS queries_options, queries.search_vector AS queries_search_vector, queries.tags AS queries_tags, query_results_1.id AS query_results_1_id, query_results_1.retrieved_at AS query_results_1_retrieved_at
redash-master-worker-1     | FROM queries LEFT OUTER JOIN query_results AS query_results_1 ON query_results_1.id = queries.latest_query_data_id
redash-master-worker-1     | WHERE queries.schedule IS NOT NULL ORDER BY queries.id]
redash-master-worker-1     | (Background on this error at: http://sqlalche.me/e/f405)
redash-master-worker-1     | Traceback (most recent call last):
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
redash-master-worker-1     |     cursor, statement, parameters, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 580, in do_execute
redash-master-worker-1     |     cursor.execute(statement, parameters)
redash-master-worker-1     | psycopg2.errors.UndefinedTable: relation "queries" does not exist
redash-master-worker-1     | LINE 2: FROM queries LEFT OUTER JOIN query_results AS query_results_...
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     |
redash-master-worker-1     | The above exception was the direct cause of the following exception:
redash-master-worker-1     |
redash-master-worker-1     | Traceback (most recent call last):
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/worker.py", line 934, in perform_job
redash-master-worker-1     |     rv = job.perform()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/job.py", line 686, in perform
redash-master-worker-1     |     self._result = self._execute()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/job.py", line 692, in _execute
redash-master-worker-1     |     return self.func(*self.args, **self.kwargs)
redash-master-worker-1     |   File "/app/redash/tasks/queries/maintenance.py", line 89, in refresh_queries
redash-master-worker-1     |     for query in models.Query.outdated_queries():
redash-master-worker-1     |   File "/app/redash/models/__init__.py", line 641, in outdated_queries
redash-master-worker-1     |     .order_by(Query.id)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3186, in all
redash-master-worker-1     |     return list(self)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3342, in __iter__
redash-master-worker-1     |     return self._execute_and_instances(context)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3367, in _execute_and_instances
redash-master-worker-1     |     result = conn.execute(querycontext.statement, self._params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 988, in execute
redash-master-worker-1     |     return meth(self, multiparams, params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/sql/elements.py", line 287, in _execute_on_connection
redash-master-worker-1     |     return connection._execute_clauseelement(self, multiparams, params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1107, in _execute_clauseelement
redash-master-worker-1     |     distilled_params,
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1253, in _execute_context
redash-master-worker-1     |     e, statement, parameters, cursor, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1473, in _handle_dbapi_exception
redash-master-worker-1     |     util.raise_from_cause(sqlalchemy_exception, exc_info)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 398, in raise_from_cause
redash-master-worker-1     |     reraise(type(exception), exception, tb=exc_tb, cause=cause)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 152, in reraise
redash-master-worker-1     |     raise value.with_traceback(tb)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
redash-master-worker-1     |     cursor, statement, parameters, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 580, in do_execute
redash-master-worker-1     |     cursor.execute(statement, parameters)
redash-master-worker-1     | sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "queries" does not exist
redash-master-worker-1     | LINE 2: FROM queries LEFT OUTER JOIN query_results AS query_results_...
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     | [SQL: SELECT queries.query AS queries_query, queries.updated_at AS queries_updated_at, queries.created_at AS queries_created_at, queries.id AS queries_id, queries.version AS queries_version, queries.org_id AS queries_org_id, queries.data_source_id AS queries_data_source_id, queries.latest_query_data_id AS queries_latest_query_data_id, queries.name AS queries_name, queries.description AS queries_description, queries.query_hash AS queries_query_hash, queries.api_key AS queries_api_key, queries.user_id AS queries_user_id, queries.last_modified_by_id AS queries_last_modified_by_id, queries.is_archived AS queries_is_archived, queries.is_draft AS queries_is_draft, queries.schedule AS queries_schedule, queries.schedule_failures AS queries_schedule_failures, queries.options AS queries_options, queries.search_vector AS queries_search_vector, queries.tags AS queries_tags, query_results_1.id AS query_results_1_id, query_results_1.retrieved_at AS query_results_1_retrieved_at
redash-master-worker-1     | FROM queries LEFT OUTER JOIN query_results AS query_results_1 ON query_results_1.id = queries.latest_query_data_id
redash-master-worker-1     | WHERE queries.schedule IS NOT NULL ORDER BY queries.id]
redash-master-worker-1     | (Background on this error at: http://sqlalche.me/e/f405)
redash-master-worker-1     | Traceback (most recent call last):
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
redash-master-worker-1     |     cursor, statement, parameters, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 580, in do_execute
redash-master-worker-1     |     cursor.execute(statement, parameters)
redash-master-worker-1     | psycopg2.errors.UndefinedTable: relation "queries" does not exist
redash-master-worker-1     | LINE 2: FROM queries LEFT OUTER JOIN query_results AS query_results_...
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     |
redash-master-worker-1     | The above exception was the direct cause of the following exception:
redash-master-worker-1     |
redash-master-worker-1     | Traceback (most recent call last):
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/worker.py", line 934, in perform_job
redash-master-worker-1     |     rv = job.perform()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/job.py", line 686, in perform
redash-master-worker-1     |     self._result = self._execute()
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/rq/job.py", line 692, in _execute
redash-master-worker-1     |     return self.func(*self.args, **self.kwargs)
redash-master-worker-1     |   File "/app/redash/tasks/queries/maintenance.py", line 89, in refresh_queries
redash-master-worker-1     |     for query in models.Query.outdated_queries():
redash-master-worker-1     |   File "/app/redash/models/__init__.py", line 641, in outdated_queries
redash-master-worker-1     |     .order_by(Query.id)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3186, in all
redash-master-worker-1     |     return list(self)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3342, in __iter__
redash-master-worker-1     |     return self._execute_and_instances(context)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/orm/query.py", line 3367, in _execute_and_instances
redash-master-worker-1     |     result = conn.execute(querycontext.statement, self._params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 988, in execute
redash-master-worker-1     |     return meth(self, multiparams, params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/sql/elements.py", line 287, in _execute_on_connection
redash-master-worker-1     |     return connection._execute_clauseelement(self, multiparams, params)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1107, in _execute_clauseelement
redash-master-worker-1     |     distilled_params,
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1253, in _execute_context
redash-master-worker-1     |     e, statement, parameters, cursor, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1473, in _handle_dbapi_exception
redash-master-worker-1     |     util.raise_from_cause(sqlalchemy_exception, exc_info)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 398, in raise_from_cause
redash-master-worker-1     |     reraise(type(exception), exception, tb=exc_tb, cause=cause)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/util/compat.py", line 152, in reraise
redash-master-worker-1     |     raise value.with_traceback(tb)
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/base.py", line 1249, in _execute_context
redash-master-worker-1     |     cursor, statement, parameters, context
redash-master-worker-1     |   File "/usr/local/lib/python3.7/site-packages/sqlalchemy/engine/default.py", line 580, in do_execute
redash-master-worker-1     |     cursor.execute(statement, parameters)
redash-master-worker-1     | sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "queries" does not exist
redash-master-worker-1     | LINE 2: FROM queries LEFT OUTER JOIN query_results AS query_results_...
redash-master-worker-1     |              ^
redash-master-worker-1     |
redash-master-worker-1     | [SQL: SELECT queries.query AS queries_query, queries.updated_at AS queries_updated_at, queries.created_at AS queries_created_at, queries.id AS queries_id, queries.version AS queries_version, queries.org_id AS queries_org_id, queries.data_source_id AS queries_data_source_id, queries.latest_query_data_id AS queries_latest_query_data_id, queries.name AS queries_name, queries.description AS queries_description, queries.query_hash AS queries_query_hash, queries.api_key AS queries_api_key, queries.user_id AS queries_user_id, queries.last_modified_by_id AS queries_last_modified_by_id, queries.is_archived AS queries_is_archived, queries.is_draft AS queries_is_draft, queries.schedule AS queries_schedule, queries.schedule_failures AS queries_schedule_failures, queries.options AS queries_options, queries.search_vector AS queries_search_vector, queries.tags AS queries_tags, query_results_1.id AS query_results_1_id, query_results_1.retrieved_at AS query_results_1_retrieved_at
redash-master-worker-1     | FROM queries LEFT OUTER JOIN query_results AS query_results_1 ON query_results_1.id = queries.latest_query_data_id
redash-master-worker-1     | WHERE queries.schedule IS NOT NULL ORDER BY queries.id]
redash-master-worker-1     | (Background on this error at: http://sqlalche.me/e/f405)
redash-master-worker-1     | [2021-10-07 15:05:07,401][PID:8][INFO][rq.worker] periodic: 59a84668e68687338646f735965213c58e814b32
redash-master-worker-1     | [2021-10-07 15:05:07,431][PID:45][INFO][rq.job.redash.tasks.queries.maintenance] job.func_name=redash.tasks.queries.maintenance.remove_ghost_locks job.id=59a84668e68687338646f735965213c58e814b32 Locks found: 0, Locks removed: 0
redash-master-worker-1     | [2021-10-07 15:05:07,436][PID:45][INFO][rq.worker] periodic: Job OK (59a84668e68687338646f735965213c58e814b32)
redash-master-worker-1     | [2021-10-07 15:05:07,436][PID:45][INFO][rq.worker] Result is kept for 600 seconds
